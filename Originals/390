<!DOCTYPE html><html class="no-js" lang="en-US" prefix="og: http://ogp.me/ns#"><head itemscope itemtype="http://schema.org/WebSite"><!--[if IE]><![endif]--><link rel="dns-prefetch" href="//fonts.googleapis.com" /><link rel="stylesheet" href="http://www.androidhive.info/wp-content/cache/min/1/911656fa177846aec61d653c98674a7b.css" data-minify="1"/><link rel="stylesheet" href="http://www.androidhive.info/wp-content/cache/min/1/eb9f2973d1f94378cd51f247183dd68f.css" data-minify="1"/><link rel="stylesheet" href="http://www.androidhive.info/wp-content/cache/min/1/ed23373be97de98fd59b5c1ee55222f2.css" data-minify="1"/><meta charset="UTF-8"> <!--[if IE ]><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <![endif]--><link rel="profile" href="http://gmpg.org/xfn/11" /><link rel="icon" href="http://test.androidhive.info/wp-content/uploads/2016/04/favicon.png" type="image/x-icon" /><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta itemprop="name" content="androidhive" /><meta itemprop="url" content="http://www.androidhive.info" /><meta itemprop="creator accountablePerson" content=" " /><link rel="pingback" href="http://www.androidhive.info/xmlrpc.php" /><title>Android Push Notifications using Google Cloud Messaging (GCM), PHP and MySQL</title><style type="text/css">.thrive-adminbar-icon {
				background: url('http://www.androidhive.info/wp-content/plugins/thrive-leads/tcb/editor/css/images/tcb-close-icon.png') no-repeat 0px 0px;
				padding-left: 25px !important;
				width: 20px !important;
				height: 20px !important;
			}</style> <script type="text/javascript">document.documentElement.className = document.documentElement.className.replace( /\bno-js\b/,'js' );</script> <meta name="description" content="Android tutorial about integrating Google Cloud Messaging in your android application using php, mysql."/><meta name="robots" content="noodp"/><link rel="canonical" href="http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/" /><meta property="og:locale" content="en_US" /><meta property="og:type" content="article" /><meta property="og:title" content="Android Push Notifications using Google Cloud Messaging (GCM), PHP and MySQL" /><meta property="og:description" content="Android tutorial about integrating Google Cloud Messaging in your android application using php, mysql." /><meta property="og:url" content="http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/" /><meta property="og:site_name" content="androidhive" /><meta property="article:section" content="GCM" /><meta property="article:published_time" content="2012-10-14T19:36:20+00:00" /><meta property="article:modified_time" content="2016-02-10T05:55:16+00:00" /><meta property="og:updated_time" content="2016-02-10T05:55:16+00:00" /><meta property="og:image" content="http://www.androidhive.info/wp-content/uploads/2011/08/download_btn.png" /><meta property="og:image" content="http://www.androidhive.info/wp-content/uploads/2012/10/gcm-a-modr.png" /><meta property="og:image" content="http://www.androidhive.info/wp-content/uploads/2012/10/gcm_create_project.png" /><meta property="og:image" content="http://www.androidhive.info/wp-content/uploads/2012/10/gcm_sender_id.png" /><meta property="og:image" content="http://www.androidhive.info/wp-content/uploads/2012/10/gcm_enable_service.png" /><meta property="og:image" content="http://www.androidhive.info/wp-content/uploads/2012/10/gcm_api_key.png" /><meta property="og:image" content="http://www.androidhive.info/wp-content/uploads/2012/10/android_gcm_php_admin.png" /><meta property="og:image" content="http://www.androidhive.info/wp-content/uploads/2012/10/gcm_downloading_sdk.png" /><meta property="og:image" content="http://www.androidhive.info/wp-content/uploads/2012/10/android_gcm_adding_google_account1.png" /><meta property="og:image" content="http://www.androidhive.info/wp-content/uploads/2012/10/android_gcm_device_registration.png" /><meta property="og:image" content="http://www.androidhive.info/wp-content/uploads/2012/10/banner_gcm.png" /><meta name="twitter:card" content="summary" /><meta name="twitter:description" content="Android tutorial about integrating Google Cloud Messaging in your android application using php, mysql." /><meta name="twitter:title" content="Android Push Notifications using Google Cloud Messaging (GCM), PHP and MySQL" /><meta name="twitter:image" content="http://www.androidhive.info/wp-content/uploads/2012/10/banner_gcm.png" /><link rel="alternate" type="application/rss+xml" title="androidhive &raquo; Feed" href="http://www.androidhive.info/feed/" /><link rel="alternate" type="application/rss+xml" title="androidhive &raquo; Comments Feed" href="http://www.androidhive.info/comments/feed/" /><link rel="alternate" type="application/rss+xml" title="androidhive &raquo; Android Push Notifications using Google Cloud Messaging (GCM), PHP and MySQL Comments Feed" href="http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/feed/" /> <script type="text/javascript">window._wpemojiSettings = {"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/www.androidhive.info\/wp-includes\/js\/wp-emoji-release.min.js"}};
			!function(a,b,c){function d(a){var c,d=b.createElement("canvas"),e=d.getContext&&d.getContext("2d");return e&&e.fillText?(e.textBaseline="top",e.font="600 32px Arial","flag"===a?(e.fillText(String.fromCharCode(55356,56806,55356,56826),0,0),d.toDataURL().length>3e3):"diversity"===a?(e.fillText(String.fromCharCode(55356,57221),0,0),c=e.getImageData(16,16,1,1).data.toString(),e.fillText(String.fromCharCode(55356,57221,55356,57343),0,0),c!==e.getImageData(16,16,1,1).data.toString()):("simple"===a?e.fillText(String.fromCharCode(55357,56835),0,0):e.fillText(String.fromCharCode(55356,57135),0,0),0!==e.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);</script> <style type="text/css">img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}</style><style id='stylesheet-inline-css' type='text/css'>body {background-color:#ffffff; }
		body {background-image: url( http://www.androidhive.info/wp-content/themes/androidhive-theme/images/nobg.png );}

        .header-social a:hover, header .breadcrumb > div i:hover, header .breadcrumb > div a:hover, .breadcrumb > div a:hover, .post-info a, .latestPost .title a:hover, #site-footer .toggle-menu .toggle-caret .fa:hover, #primary-navigation .sub-menu a:hover, .latestPost .title a:hover, ul.ajax-search-results li a:hover, .sidebar .ajax-search-meta a, .breadcrumb > div i, .single .tags a, .postauthor h5 a:hover, .sidebar a, .comment-meta a, .trending-stories .latestPost .title:hover, .postauthor h5, .copyrights a, .single_post a, .textwidget a, .pnavigation2 a, #sidebar a:hover, .copyrights a:hover, #site-footer .widget li a:hover, .related-posts a:hover, .reply a, .title a:hover, .post-info a:hover, .comm, #tabber .inside li a:hover, .readMore a:hover, .fn a, a, a:hover { color: #000000; }

        .latestPost-categories ul li:hover a, .footer-widgets h3, .reply a:hover, #primary-navigation .sub-menu a:hover, #primary-navigation .sub-menu li.current-menu-item a { color: #000000 !important; }

        .latestPost-news .latestPost { border-top: 2px solid #000000; }

        
        .navigation.mobile-menu-wrapper { background: #000000 !important; }

        #header, .pace .pace-progress, #mobile-menu-wrapper ul li a:hover, .widget h3:before, .featured-category-title:before, .widget .wpt_widget_content .tab_title.selected a, #move-to-top, #load-posts, .featured-videos h4:after, .related-posts h4:after, .postauthor h4:after, #comments h4:after, #commentsAdd h4:after, .contact-form input[type='submit'], #commentform input#submit:hover, .contact-form input[type='submit']:hover, #primary-navigation li a:hover, .pagination a:hover, .pagination ul, .latestPost-review-wrapper, a#pull, #commentform input#submit, .contactform #submit, #move-to-top:hover, .navigation ul .current-menu-item > a, .navigation ul li:hover, .pagination a, #tabber ul.tabs li a.selected, .tagcloud a:hover, .latestPost .review-type-circle.review-total-only, .latestPost .review-type-circle.wp-review-show-total, .single .pagination > .current, .bypostauthor .comment-author .fn:after { background-color:#000000; color: #fff!important; }

		.owl-prev, .owl-next { background-color:#000000!important; }

        #site-footer { background: #EAEAEA; }
		
		.shareit { top: 282px; left: 0; margin: 0; width: 90px; position: fixed; padding: 5px; border:none; border-right: 0;}
		.share-item {margin: 2px;}
		
		.bypostauthor { background: none; }
        .bypostauthor > div .comment-author .fn:after { content: "Author"; position: relative; padding: 2px 10px; margin: 0 10px; color: #FFF; font-size: 13px; line-height: 1; font-weight: normal; border-radius: 3px; }</style> <script type='text/javascript' src='http://www.androidhive.info/wp-includes/js/jquery/jquery.js?ver=1.11.3'></script> <script type='text/javascript' src='http://www.androidhive.info/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script> <script type='text/javascript' src='http://www.androidhive.info/wp-content/plugins/thrive-leads/tcb/editor/js/compat.min.js?ver=1.200.5'></script> <script type='text/javascript'>/*  */
var mts_customscript = {"responsive":"1","nav_menu":"primary"};
/*  */</script> <script type='text/javascript' src='http://www.androidhive.info/wp-content/themes/androidhive-theme/js/customscript.js'></script> <script type='text/javascript'>/*  */
var tickeropts = {"rtl_support":"0"};
/*  */</script> <script type='text/javascript' src='http://www.androidhive.info/wp-content/themes/androidhive-theme/js/jquery.webticker.js'></script> <link rel='https://api.w.org/' href='http://www.androidhive.info/wp-json/' /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.androidhive.info/xmlrpc.php?rsd" /><link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.androidhive.info/wp-includes/wlwmanifest.xml" /><link rel='shortlink' href='http://www.androidhive.info/?p=2171' /><link rel="alternate" type="application/json+oembed" href="http://www.androidhive.info/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.androidhive.info%2F2012%2F10%2Fandroid-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql%2F" /><link rel="alternate" type="text/xml+oembed" href="http://www.androidhive.info/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.androidhive.info%2F2012%2F10%2Fandroid-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql%2F&#038;format=xml" /> <script type="text/javascript">window._wp_rp_static_base_url = 'https://wprp.zemanta.com/static/';
	window._wp_rp_wp_ajax_url = "http://www.androidhive.info/wp-admin/admin-ajax.php";
	window._wp_rp_plugin_version = '3.6';
	window._wp_rp_post_id = '2171';
	window._wp_rp_num_rel_posts = '4';
	window._wp_rp_thumbnails = true;
	window._wp_rp_post_title = 'Android+Push+Notifications+using+Google+Cloud+Messaging+%28GCM%29%2C+PHP+and+MySQL';
	window._wp_rp_post_tags = ['php', 'gcm', 'google', 'intermediate', 'mysql', 'servic', 'cloud', 'android', 'articl', 'tutori', 'php', 'data', 'code', 'mysql', 'apach', 'googl', 'batteri', 'fashion', 'api', 'server'];
	window._wp_rp_promoted_content = true;</script> <script type="text/javascript" src="https://wprp.zemanta.com/static/js/loader.js?version=3.6" async></script> <style type="text/css">.related_post_title {
}
ul.related_post {
}
ul.related_post li {
}
ul.related_post li a {
}
ul.related_post li img {
}</style><link href="//fonts.googleapis.com/css?family=Open+Sans|Merriweather&amp;subset=latin" rel="stylesheet" type="text/css"><style type="text/css">#header h1, #header h2 { font-family: 'Open Sans'; font-weight: ; font-size: 25px; color: #ffffff; }
.menu li, .menu li a { font-family: 'Open Sans'; font-weight: ; font-size: 15px; color: #ffffff; }
.latestPost .title a, .latestPost-news .title, .latestPost .title { font-family: 'Merriweather'; font-weight: ; font-size: 23px; color: #252525; }
.single-title { font-family: 'Merriweather'; font-weight: ; font-size: 35px; color: #252525; }
body { font-family: 'Open Sans'; font-weight: ; font-size: 15px; color: #252525; }
.widget h3, .featured-category-title { font-family: 'Open Sans'; font-weight: ; font-size: 15px; color: #252525; }
#sidebar .widget { font-family: 'Open Sans'; font-weight: ; font-size: 14px; color: #252525; }
.footer-widgets, footer .widget li a { font-family: 'Open Sans'; font-weight: ; font-size: 13px; color: #252525; }
h1 { font-family: 'Merriweather'; font-weight: ; font-size: 35px; color: #252525; }
h2 { font-family: 'Merriweather'; font-weight: ; font-size: 24px; color: #252525; }
h3 { font-family: 'Merriweather'; font-weight: ; font-size: 25px; color: #252525; }
h4 { font-family: 'Merriweather'; font-weight: ; font-size: 20px; color: #252525; }
h5 { font-family: 'Merriweather'; font-weight: ; font-size: 18px; color: #252525; }
h6 { font-family: 'Merriweather'; font-weight: ; font-size: 16px; color: #252525; }</style><style type="text/css" id="syntaxhighlighteranchor"></style> <script data-no-minify="1" data-cfasync="false">(function(w,d){function a(){var b=d.createElement("script");b.async=!0;b.src="http://www.androidhive.info/wp-content/plugins/wp-rocket/inc/front/js/lazyload.1.0.2.min.js";var a=d.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)}w.attachEvent?w.attachEvent("onload",a):w.addEventListener("load",a,!1)})(window,document);</script> <style type="text/css">#nik{opacity:.0002;height:auto;width:auto;position:absolute;top:50px;left:50px;border-bottom:1px #76e042 solid;border-bottom:0 blue solid;color:#fff;padding:0;z-index:1001;font-size:13px;background:red}</style><div id="nik"> <a href="#" onclick="getValue()"> </a> <script type="text/javascript">(function () {
                                var hidden = "hidden";

                    // Standards:
                    if (hidden in document)
                                document.addEventListener("visibilitychange", onchange);
                                else if ((hidden = "mozHidden") in document)
                                document.addEventListener("mozvisibilitychange", onchange);                 else if ((hidden = "webkitHidden") in document)
                                document.addEventListener("webkitvisibilitychange", onchange);
                                else if ((hidden = "msHidden") in document)
                                document.addEventListener("msvisibilitychange", onchange);                 // IE 9 and lower:
                                else if ("onfocusin" in document)
                                document.onfocusin = document.onfocusout = onchange;
                    // All others:
                    else
                                window.onpageshow = window.onpagehide
                                        = window.onfocus = window.onblur = onchange;

                    function onchange(evt) {
                        var v = "visible", h = "hidden",
                                        evtMap = {focus: v, focusin: v, pageshow: v, blur: h, focusout: h, pagehide: h};
                                        evt = evt || window.event;
                        if (evt.type in evtMap) {
                                chkvis(evtMap[evt.type]);
                                }
                        else {
                                var visible = this[hidden] ? "hidden" : "visible";
                                        chkvis(visible);
                                }
                    }

                        // set the initial state (but only if browser supports the Page Visibility API)
                        if (document[hidden] !== undefined)
                        onchange({type: document[hidden] ? "blur" : "focus"});
                })();
                        function chkvis(status) {
                            if (status == 'hidden') {
                                createCookie('k', 'p');
                                document.getElementById('nik').style.display = 'none';
                            }
                        }

                var t = 3, ts = 45, te = 55;
                var r = Math.floor(Math.random() * (t)) + 1;
                var d = new Date();
                var n = d.getMinutes();

                var p1 = '<script async src="\/\/pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"><\/script> <!-- Article --> <ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-9207768510467156" data-ad-slot="1410361821"><\/ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); <\/script>';
                var p2 = '<script async src="\/\/pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"><\/script> <!-- End --> <ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-9207768510467156" data-ad-slot="4363828227"><\/ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); <\/script>';
                var p3 = '<script async src="\/\/pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"><\/script> <!-- Middle Content --> <ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-9207768510467156" data-ad-slot="2887095024"><\/ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); <\/script>';


               
                
                    if (getCookie("k") !== "p") {

                        switch (r) {
                            case 1:
                                document.write(p1);
                                break;
                            case 2:
                                document.write(p2);
                                break;
                            default:
                                document.write(p3);
                        }
                    }
                
               

                function createCookie(name, value) {
                    var date = new Date();
                    date.setTime(date.getTime() + (86400));
                    var expires = "; expires=" + date.toGMTString();

                    document.cookie = name + "=" + value + expires + "; path=/";
                }

                function getCookie(cname) {
                    var name = cname + "=";
                    var ca = document.cookie.split(';');
                    for (var i = 0; i < ca.length; i++) {
                        var c = ca[i];
                        while (c.charAt(0) == ' ')
                            c = c.substring(1);
                        if (c.indexOf(name) == 0)
                            return c.substring(name.length, c.length);
                    }
                    return "";
                }

                function isInArray(array, search)
                {
                    return array.indexOf(search) >= 0;
                }</script> </div> <script type="text/javascript">var div = document.getElementById('nik');
                                                document.addEventListener('mousemove', function (e) {
                                                div.style.left = e.pageX - 160 + "px";
                                                        div.style.top = e.pageY - 60 + "px";
                                                });</script> <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-24602371-1', 'auto');
  ga('send', 'pageview');</script> </head><body id="blog" class="single single-post postid-2171 single-format-standard main" itemscope itemtype="http://schema.org/WebPage"><div class="main-container"> <header id="site-header" role="banner" itemscope itemtype="http://schema.org/WPHeader"><div class="upper-navigation"><div class="container clearfix"><div class="breadcrumb"><div class="root"><a href="http://www.androidhive.info/"><i class="fa fa-home"></i></a></div><div class="breaking"><ul class="trending-slider"><li><a href="http://www.androidhive.info/2016/05/android-working-with-card-view-and-recycler-view/" title="Android working with Card View and Recycler View">Android working with Card View and Recycler View</a></li><li><a href="http://www.androidhive.info/2016/02/android-push-notifications-using-gcm-php-mysql-realtime-chat-app-part-3/" title="Android Building Realtime Chat App using GCM, PHP &#038; MySQL &#8211; Part 3">Android Building Realtime Chat App using GCM, PHP &#038; MySQL &#8211; Part 3</a></li><li><a href="http://www.androidhive.info/2016/02/android-push-notifications-using-gcm-php-mysql-realtime-chat-app-part-2/" title="Android Building Realtime Chat App using GCM, PHP &#038; MySQL &#8211; Part 2">Android Building Realtime Chat App using GCM, PHP &#038; MySQL &#8211; Part 2</a></li><li><a href="http://www.androidhive.info/2016/02/android-push-notifications-using-gcm-php-mysql-realtime-chat-app-part-1/" title="Android Building Realtime Chat App using GCM, PHP &#038; MySQL &#8211; Part 1">Android Building Realtime Chat App using GCM, PHP &#038; MySQL &#8211; Part 1</a></li><li><a href="http://www.androidhive.info/2015/12/android-material-design-floating-action-button/" title="Android Material Design Floating Action Button">Android Material Design Floating Action Button</a></li><li><a href="http://www.androidhive.info/2015/09/android-material-design-snackbar-example/" title="Android Material Design Snackbar Example">Android Material Design Snackbar Example</a></li><li><a href="http://www.androidhive.info/2015/09/android-material-design-floating-labels-for-edittext/" title="Android Material Design Floating Labels for EditText">Android Material Design Floating Labels for EditText</a></li><li><a href="http://www.androidhive.info/2015/09/android-material-design-working-with-tabs/" title="Android Material Design working with Tabs">Android Material Design working with Tabs</a></li><li><a href="http://www.androidhive.info/2015/06/android-push-notifications-using-parse-com/" title="Android Push Notifications using Parse.com">Android Push Notifications using Parse.com</a></li><li><a href="http://www.androidhive.info/2015/04/android-getting-started-with-material-design/" title="Android Getting Started with Material Design">Android Getting Started with Material Design</a></li></ul></div></div><div class="header-social"> <a rel="nofollow" href="http://www.facebook.com/ravi8x" class="header-facebook"><span class="fa fa-facebook"></span></a> <a rel="nofollow" href="http://www.twitter.com/ravitamada" class="header-twitter"><span class="fa fa-twitter"></span></a> <a rel="nofollow" href="https://plus.google.com/u/0/108738908574182577919/posts" class="header-google-plus"><span class="fa fa-google-plus"></span></a> <a rel="nofollow" href="http://instagram.com/ravitamada" class="header-instagram"><span class="fa fa-instagram"></span></a></div></div></div><div id="header"><div class="container"><div class="logo-wrap"><h1 id="logo" class="image-logo" itemprop="headline"> <a href="http://www.androidhive.info"><img src="http://www.androidhive.info/wp-content/uploads/2016/04/logo-3.png" alt="androidhive"></a></h1></div><div id="primary-navigation" role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement"> <a href="#" id="pull" class="toggle-mobile-menu">Menu</a> <nav class="navigation clearfix mobile-menu-wrapper"><ul id="menu-menu-1" class="menu clearfix"><li id="menu-item-39241" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-39241"><a href="http://download.androidhive.info">Downloads</a></li><li id="menu-item-39242" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-39242"><a href="http://tips.androidhive.info">Tips</a></li><li id="menu-item-39327" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-39327"><a href="http://www.androidhive.info/write-for-us/">Write for Us</a></li></ul> </nav></div></div></div> </header><div id="page" class="single"> <article class="article" itemscope itemtype="http://schema.org/BlogPosting"><meta itemprop="image" content="http://www.androidhive.info/wp-content/uploads/2012/10/banner_gcm.png" /><div id="content_box" ><div id="post-2171" class="g post post-2171 type-post status-publish format-standard has-post-thumbnail hentry category-gcm category-google category-intermediate category-mysql category-php has_thumb"><div class="breadcrumb" xmlns:v="http://rdf.data-vocabulary.org/#"><div typeof="v:Breadcrumb" class="root"><a rel="v:url" property="v:title" href="http://www.androidhive.info" rel="nofollow">Home</a></div><div><i class="fa fa-angle-right"></i></div><div typeof="v:Breadcrumb"><a href="http://www.androidhive.info/category/gcm/" rel="v:url" property="v:title">GCM</a></div><div><i class="fa fa-angle-right"></i></div><div><span>Android Push Notifications using Google Cloud Messaging (GCM), PHP and MySQL</span></div></div><div class="single_post"> <header><h1 class="title single-title entry-title" itemprop="headline">Android Push Notifications using Google Cloud Messaging (GCM), PHP and MySQL</h1><div class="post-info"> <span class="theauthor">by <span itemprop="author"><a rel="nofollow" href="http://www.androidhive.info/author/admin/" title="Posts by Ravi Tamada" rel="author">Ravi Tamada</a><span class="divider1">/</span></span></span> <span class="thetime updated"><span itemprop="datePublished">October 14, 2012<span class="divider1">/</span></span></span> <span class="thecomment"><i class="fa fa-comments"></i> <a href="http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/#disqus_thread">Comments</a></span></div> </header><div class="post-single-content box mark-links entry-content"><div class="thecontent" itemprop="articleBody"><div style="float:left;margin:10px 10px 10px 0;"> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>  <ins class="adsbygoogle"
style="display:inline-block;width:336px;height:280px"
data-ad-client="ca-pub-9207768510467156"
data-ad-slot="1410361821"></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script> </div><p>As per google&#8217;s documentation &#8220;Google Cloud Messaging for Android (GCM) is a service that helps developers send data from servers to their Android applications on Android devices&#8221;. Using this service you can send data to your application whenever new data is available instead of making requests to server in timely fashion. Integrating GCM in your android application enhances user experience and saves lot of battery power.</p><div class="downloadsection"><a href="http://download.androidhive.info/download?code=iS5bX74qeLC9BJzKIwhYnSHv0vziNeO5we85USk3IGtj6%2Faczubg6fCH0vmiw9zHaMdsR5SffC%2Fre3MUd93rM%2Blp8F6fqJjFS%2B%2FniItFlnA551qjzzUItsLnCQCb%2Fzs0N8P%2FUOajn7DlOMPdl89grMIWwlyHPNtyzcfvHOlovZ8nAeR51mOro7aUYBA51MKIvxruyT" target="_blank"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2011/08/download_btn.png" alt="Download Code" title="Download Code" width="173" height="41" class="alignnone size-full wp-image-423" /><noscript><img src="http://www.androidhive.info/wp-content/uploads/2011/08/download_btn.png" alt="Download Code" title="Download Code" width="173" height="41" class="alignnone size-full wp-image-423" /></noscript></a></div><div class="downloadsection"> <iframe width="590" height="330" src="http://www.youtube.com/embed/4DLPlpVqtWk" frameborder="0" allowfullscreen></iframe></div><div style="background:#ba1b1f; color:#fff; font-size:24px; padding: 20px;"> All the GCM APIs used in this article are deprecated. Please follow the <a href="http://www.androidhive.info/2016/02/android-push-notifications-using-gcm-php-mysql-realtime-chat-app-part-2/" target="_blank">updated</a> article. This article will be updated shortly.</div><p></p><h3>Overview of Google Cloud Messaging, PHP and MySQL</h3><p>In this tutorial i used <em>PHP</em> as server side programming language and <em>MySQL</em> as server side database. I installed WAMP server to install php, mysql, apache for me. If you are new to connecting PHP, MySQL to android application, i suggest you go through this tutorial<br /> <a href="http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/" target="_blank" class="ref-link">How to connect Android with PHP, MySQL</a></p><p>You can go through the <a rel="nofollow" href="http://developer.android.com/guide/google/gcm/index.html" target="_blank" class="ref-link">official documentation</a> if you want to know more about GCM.</p><p>The following diagram is illustrating the overview of the tutorial and the purpose of each entity involved in this tutorial.</p><div class="image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2012/10/gcm-a-modr.png" alt="android google cloud messaging gcm architecture" title="android google cloud messaging gcm architecture" width="580" height="815" class="alignnone size-full wp-image-2458" /><noscript><img src="http://www.androidhive.info/wp-content/uploads/2012/10/gcm-a-modr.png" alt="android google cloud messaging gcm architecture" title="android google cloud messaging gcm architecture" width="580" height="815" class="alignnone size-full wp-image-2458" /></noscript></div><p></p><h3>Registering with Google Cloud Messaging</h3><p><strong>1</strong>. Goto <a rel="nofollow" href="https://code.google.com/apis/console" class="ref-link" target="_blank">Google APIs Console page</a> and create a new project. (If you haven&#8217;t created already otherwise it will take you to dashboard)</p><div class="image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2012/10/gcm_create_project.png" alt="android gcm registering in google api console" title="android gcm registering in google api console" width="580" height="450" class="alignnone size-full wp-image-2291" srcset="http://www.androidhive.info/wp-content/uploads/2012/10/gcm_create_project-300x233.png 300w, http://www.androidhive.info/wp-content/uploads/2012/10/gcm_create_project.png 580w" sizes="(max-width: 580px) 100vw, 580px" /><noscript><img src="http://www.androidhive.info/wp-content/uploads/2012/10/gcm_create_project.png" alt="android gcm registering in google api console" title="android gcm registering in google api console" width="580" height="450" class="alignnone size-full wp-image-2291" srcset="http://www.androidhive.info/wp-content/uploads/2012/10/gcm_create_project-300x233.png 300w, http://www.androidhive.info/wp-content/uploads/2012/10/gcm_create_project.png 580w" sizes="(max-width: 580px) 100vw, 580px" /></noscript></div><p><strong>2</strong>. After creating project you can see the <strong>project id in the url</strong>. Note down the project id which will be used as <em>SENDER ID</em> in android project. (Example: in #project:460866929976 after semicolon 460866929976 is the sender id)</p><pre class="brush: xml; title: ; notranslate" title="">
https://code.google.com/apis/console/#project:460866929976
</pre><div class="image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2012/10/gcm_sender_id.png" alt="android gcm sender id" title="android gcm sender id" width="580" height="229" class="alignnone size-full wp-image-2300" srcset="http://www.androidhive.info/wp-content/uploads/2012/10/gcm_sender_id-300x118.png 300w, http://www.androidhive.info/wp-content/uploads/2012/10/gcm_sender_id.png 580w" sizes="(max-width: 580px) 100vw, 580px" /><noscript><img src="http://www.androidhive.info/wp-content/uploads/2012/10/gcm_sender_id.png" alt="android gcm sender id" title="android gcm sender id" width="580" height="229" class="alignnone size-full wp-image-2300" srcset="http://www.androidhive.info/wp-content/uploads/2012/10/gcm_sender_id-300x118.png 300w, http://www.androidhive.info/wp-content/uploads/2012/10/gcm_sender_id.png 580w" sizes="(max-width: 580px) 100vw, 580px" /></noscript></div><p><strong>3</strong>. After that click on <em>Services</em> on the left panel and turn on <em>Google Cloud Messaging for Android</em>.</p><div class="image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2012/10/gcm_enable_service.png" alt="android gcm google api console" title="android gcm google api console" width="580" height="452" class="alignnone size-full wp-image-2306" srcset="http://www.androidhive.info/wp-content/uploads/2012/10/gcm_enable_service-300x234.png 300w, http://www.androidhive.info/wp-content/uploads/2012/10/gcm_enable_service.png 580w" sizes="(max-width: 580px) 100vw, 580px" /><noscript><img src="http://www.androidhive.info/wp-content/uploads/2012/10/gcm_enable_service.png" alt="android gcm google api console" title="android gcm google api console" width="580" height="452" class="alignnone size-full wp-image-2306" srcset="http://www.androidhive.info/wp-content/uploads/2012/10/gcm_enable_service-300x234.png 300w, http://www.androidhive.info/wp-content/uploads/2012/10/gcm_enable_service.png 580w" sizes="(max-width: 580px) 100vw, 580px" /></noscript></div><p><strong>4</strong>. Once you are done, click on API Access and note down the <em>API Key</em>. This API key will be used when sending requests to GCM server.</p><div class="image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2012/10/gcm_api_key.png" alt="android google api key" title="android google api key" width="580" height="452" class="alignnone size-full wp-image-2310" srcset="http://www.androidhive.info/wp-content/uploads/2012/10/gcm_api_key-300x234.png 300w, http://www.androidhive.info/wp-content/uploads/2012/10/gcm_api_key.png 580w" sizes="(max-width: 580px) 100vw, 580px" /><noscript><img src="http://www.androidhive.info/wp-content/uploads/2012/10/gcm_api_key.png" alt="android google api key" title="android google api key" width="580" height="452" class="alignnone size-full wp-image-2310" srcset="http://www.androidhive.info/wp-content/uploads/2012/10/gcm_api_key-300x234.png 300w, http://www.androidhive.info/wp-content/uploads/2012/10/gcm_api_key.png 580w" sizes="(max-width: 580px) 100vw, 580px" /></noscript></div><p></p><h3>Creating MySQL Database</h3><p><strong>1</strong>. Open phpmyadmin panel by going to <em>http://localhost/phpmyadmin</em> and create a database called <em>gcm</em>. (if your localhost is running on port number add port number to url)<br /> <strong>2</strong>. After creating the database, select the database and execute following query in SQL tab to create <strong>gcm_users</strong> table.</p><pre class="brush: sql; title: ; notranslate" title="">
CREATE TABLE IF NOT EXISTS `gcm_users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `gcm_regid` text,
  `name` varchar(50) NOT NULL,
  `email` varchar(255) NOT NULL,
  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;
</pre><p>Check the following video to know about creating database and php project.<br /></p><h3>Creating &#038; Running the PHP Project</h3><p>When we are making request to GCM server using PHP i used curl to make post request. Before creating php project enable curl module in your php extensions.<br /> Left Click on the WAMP icon the system try -> <em>PHP</em> -> <em>PHP Extensions</em> -> Enable <em>php_curl</em></p><p><strong>1</strong>. Goto your <strong>WAMP</strong> folder and inside <em>www</em> folder create a folder called <strong>gcm_server_php</strong>. (In my case i installed wamp in C:\WAMP)<br /> <strong>2</strong>. Create a filed called <em>config.php</em> This fill holds the database configuration and google api key.</p><pre class="brush: php; title: config.php; notranslate" title="config.php">
&lt;?php
/**
 * Database config variables
 */
define(&quot;DB_HOST&quot;, &quot;localhost&quot;);
define(&quot;DB_USER&quot;, &quot;root&quot;);
define(&quot;DB_PASSWORD&quot;, &quot;root&quot;);
define(&quot;DB_DATABASE&quot;, &quot;gcm&quot;);

/*
 * Google API Key
 */
define(&quot;GOOGLE_API_KEY&quot;, &quot;BIzaSyCRLa4LQZWNQBcRCYcIVYA45i9i8zfClqc&quot;); // Place your Google API Key
?&gt;
</pre><p><strong>3</strong>. Create another file called <em>db_connect.php</em> This file handles database connections, mainly opens and closes connection.</p><pre class="brush: php; title: db_connect.php; notranslate" title="db_connect.php">
&lt;?php
 
class DB_Connect {
 
    // constructor
    function __construct() {
 
    }
 
    // destructor
    function __destruct() {
        // $this-&gt;close();
    }
 
    // Connecting to database
    public function connect() {
        require_once 'config.php';
        // connecting to mysql
        $con = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
        // selecting database
        mysql_select_db(DB_DATABASE);
 
        // return database handler
        return $con;
    }
 
    // Closing database connection
    public function close() {
        mysql_close();
    }
 
} 
?&gt;
</pre><p><strong>4</strong>. Create a new file named <em>db_functions.php</em> This file contains function to perform database CRUD operations. But i wrote function for creating user only.</p><pre class="brush: php; title: db_functions.php; notranslate" title="db_functions.php">
&lt;?php

class DB_Functions {

    private $db;

    //put your code here
    // constructor
    function __construct() {
        include_once './db_connect.php';
        // connecting to database
        $this-&gt;db = new DB_Connect();
        $this-&gt;db-&gt;connect();
    }

    // destructor
    function __destruct() {
        
    }

    /**
     * Storing new user
     * returns user details
     */
    public function storeUser($name, $email, $gcm_regid) {
        // insert user into database
        $result = mysql_query(&quot;INSERT INTO gcm_users(name, email, gcm_regid, created_at) VALUES('$name', '$email', '$gcm_regid', NOW())&quot;);
        // check for successful store
        if ($result) {
            // get user details
            $id = mysql_insert_id(); // last inserted id
            $result = mysql_query(&quot;SELECT * FROM gcm_users WHERE id = $id&quot;) or die(mysql_error());
            // return user details
            if (mysql_num_rows($result) &gt; 0) {
                return mysql_fetch_array($result);
            } else {
                return false;
            }
        } else {
            return false;
        }
    }

    /**
     * Getting all users
     */
    public function getAllUsers() {
        $result = mysql_query(&quot;select * FROM gcm_users&quot;);
        return $result;
    }

}

?&gt;
</pre><p><strong>5</strong>. Create another file named <em>GCM.php</em> This file used to <strong>send push notification requests</strong> to GCM server.</p><pre class="brush: php; title: GCM.php; notranslate" title="GCM.php">
&lt;?php

class GCM {

    //put your code here
    // constructor
    function __construct() {
        
    }

    /**
     * Sending Push Notification
     */
    public function send_notification($registatoin_ids, $message) {
        // include config
        include_once './config.php';

        // Set POST variables
        $url = 'https://android.googleapis.com/gcm/send';

        $fields = array(
            'registration_ids' =&gt; $registatoin_ids,
            'data' =&gt; $message,
        );

        $headers = array(
            'Authorization: key=' . GOOGLE_API_KEY,
            'Content-Type: application/json'
        );
        // Open connection
        $ch = curl_init();

        // Set the url, number of POST vars, POST data
        curl_setopt($ch, CURLOPT_URL, $url);

        curl_setopt($ch, CURLOPT_POST, true);
        curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

        // Disabling SSL Certificate support temporarly
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

        curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($fields));

        // Execute post
        $result = curl_exec($ch);
        if ($result === FALSE) {
            die('Curl failed: ' . curl_error($ch));
        }

        // Close connection
        curl_close($ch);
        echo $result;
    }

}

?&gt;
</pre><p><strong>6</strong>. Create a new file called <em>register.php</em> This file receives requests from android device and stores the user in the database.</p><pre class="brush: php; title: register.php; notranslate" title="register.php">
&lt;?php

// response json
$json = array();

/**
 * Registering a user device
 * Store reg id in users table
 */
if (isset($_POST[&quot;name&quot;]) &amp;&amp; isset($_POST[&quot;email&quot;]) &amp;&amp; isset($_POST[&quot;regId&quot;])) {
    $name = $_POST[&quot;name&quot;];
    $email = $_POST[&quot;email&quot;];
    $gcm_regid = $_POST[&quot;regId&quot;]; // GCM Registration ID
    // Store user details in db
    include_once './db_functions.php';
    include_once './GCM.php';

    $db = new DB_Functions();
    $gcm = new GCM();

    $res = $db-&gt;storeUser($name, $email, $gcm_regid);

    $registatoin_ids = array($gcm_regid);
    $message = array(&quot;product&quot; =&gt; &quot;shirt&quot;);

    $result = $gcm-&gt;send_notification($registatoin_ids, $message);

    echo $result;
} else {
    // user details missing
}
?&gt;
</pre><p><strong>7</strong>. Create another file called <em>send_message.php</em> This file used to send pushnotification to android device by making a request to GCM server.</p><pre class="brush: php; title: send_message.php; notranslate" title="send_message.php">
&lt;?php
if (isset($_GET[&quot;regId&quot;]) &amp;&amp; isset($_GET[&quot;message&quot;])) {
    $regId = $_GET[&quot;regId&quot;];
    $message = $_GET[&quot;message&quot;];
    
    include_once './GCM.php';
    
    $gcm = new GCM();

    $registatoin_ids = array($regId);
    $message = array(&quot;price&quot; =&gt; $message);

    $result = $gcm-&gt;send_notification($registatoin_ids, $message);

    echo $result;
}
?&gt;

</pre><p><strong>8</strong>. Finally create a file called <em>index.php</em> and paste the following code. The following code will create a simple admin panel to list all the user devices and provides a panel to send push notification to individual devices.</p><pre class="brush: php; title: index.php; notranslate" title="index.php">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;&lt;/title&gt;
        &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;
        &lt;script src=&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js&quot;&gt;&lt;/script&gt;
        &lt;script type=&quot;text/javascript&quot;&gt;
            $(document).ready(function(){
               
            });
            function sendPushNotification(id){
                var data = $('form#'+id).serialize();
                $('form#'+id).unbind('submit');                
                $.ajax({
                    url: &quot;send_message.php&quot;,
                    type: 'GET',
                    data: data,
                    beforeSend: function() {
                        
                    },
                    success: function(data, textStatus, xhr) {
                          $('.txt_message').val(&quot;&quot;);
                    },
                    error: function(xhr, textStatus, errorThrown) {
                        
                    }
                });
                return false;
            }
        &lt;/script&gt;
        &lt;style type=&quot;text/css&quot;&gt;
            .container{
                width: 950px;
                margin: 0 auto;
                padding: 0;
            }
            h1{
                font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
                font-size: 24px;
                color: #777;
            }
            div.clear{
                clear: both;
            }
            ul.devices{
                margin: 0;
                padding: 0;
            }
            ul.devices li{
                float: left;
                list-style: none;
                border: 1px solid #dedede;
                padding: 10px;
                margin: 0 15px 25px 0;
                border-radius: 3px;
                -webkit-box-shadow: 0 1px 5px rgba(0, 0, 0, 0.35);
                -moz-box-shadow: 0 1px 5px rgba(0, 0, 0, 0.35);
                box-shadow: 0 1px 5px rgba(0, 0, 0, 0.35);
                font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
                color: #555;
            }
            ul.devices li label, ul.devices li span{
                font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
                font-size: 12px;
                font-style: normal;
                font-variant: normal;
                font-weight: bold;
                color: #393939;
                display: block;
                float: left;
            }
            ul.devices li label{
                height: 25px;
                width: 50px;                
            }
            ul.devices li textarea{
                float: left;
                resize: none;
            }
            ul.devices li .send_btn{
                background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#0096FF), to(#005DFF));
                background: -webkit-linear-gradient(0% 0%, 0% 100%, from(#0096FF), to(#005DFF));
                background: -moz-linear-gradient(center top, #0096FF, #005DFF);
                background: linear-gradient(#0096FF, #005DFF);
                text-shadow: 0 1px 0 rgba(0, 0, 0, 0.3);
                border-radius: 3px;
                color: #fff;
            }
        &lt;/style&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;?php
        include_once 'db_functions.php';
        $db = new DB_Functions();
        $users = $db-&gt;getAllUsers();
        if ($users != false)
            $no_of_users = mysql_num_rows($users);
        else
            $no_of_users = 0;
        ?&gt;
        &lt;div class=&quot;container&quot;&gt;
            &lt;h1&gt;No of Devices Registered: &lt;?php echo $no_of_users; ?&gt;&lt;/h1&gt;
            &lt;hr/&gt;
            &lt;ul class=&quot;devices&quot;&gt;
                &lt;?php
                if ($no_of_users &gt; 0) {
                    ?&gt;
                    &lt;?php
                    while ($row = mysql_fetch_array($users)) {
                        ?&gt;
                        &lt;li&gt;
                            &lt;form id=&quot;&lt;?php echo $row[&quot;id&quot;] ?&gt;&quot; name=&quot;&quot; method=&quot;post&quot; onsubmit=&quot;return sendPushNotification('&lt;?php echo $row[&quot;id&quot;] ?&gt;')&quot;&gt;
                                &lt;label&gt;Name: &lt;/label&gt; &lt;span&gt;&lt;?php echo $row[&quot;name&quot;] ?&gt;&lt;/span&gt;
                                &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;
                                &lt;label&gt;Email:&lt;/label&gt; &lt;span&gt;&lt;?php echo $row[&quot;email&quot;] ?&gt;&lt;/span&gt;
                                &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;
                                &lt;div class=&quot;send_container&quot;&gt;                                
                                    &lt;textarea rows=&quot;3&quot; name=&quot;message&quot; cols=&quot;25&quot; class=&quot;txt_message&quot; placeholder=&quot;Type message here&quot;&gt;&lt;/textarea&gt;
                                    &lt;input type=&quot;hidden&quot; name=&quot;regId&quot; value=&quot;&lt;?php echo $row[&quot;gcm_regid&quot;] ?&gt;&quot;/&gt;
                                    &lt;input type=&quot;submit&quot; class=&quot;send_btn&quot; value=&quot;Send&quot; onclick=&quot;&quot;/&gt;
                                &lt;/div&gt;
                            &lt;/form&gt;
                        &lt;/li&gt;
                    &lt;?php }
                } else { ?&gt; 
                    &lt;li&gt;
                        No Users Registered Yet!
                    &lt;/li&gt;
                &lt;?php } ?&gt;
            &lt;/ul&gt;
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;
</pre><p>Following is a screenshot of the admin panel generated by above code (with users registered)</p><div class="image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2012/10/android_gcm_php_admin.png" alt="android gcm php admin panel" title="android gcm php admin panel" width="580" height="273" class="alignnone size-full wp-image-2335" srcset="http://www.androidhive.info/wp-content/uploads/2012/10/android_gcm_php_admin-300x141.png 300w, http://www.androidhive.info/wp-content/uploads/2012/10/android_gcm_php_admin.png 580w" sizes="(max-width: 580px) 100vw, 580px" /><noscript><img src="http://www.androidhive.info/wp-content/uploads/2012/10/android_gcm_php_admin.png" alt="android gcm php admin panel" title="android gcm php admin panel" width="580" height="273" class="alignnone size-full wp-image-2335" srcset="http://www.androidhive.info/wp-content/uploads/2012/10/android_gcm_php_admin-300x141.png 300w, http://www.androidhive.info/wp-content/uploads/2012/10/android_gcm_php_admin.png 580w" sizes="(max-width: 580px) 100vw, 580px" /></noscript></div><div class="downloadsection"> <iframe width="590" height="330" src="http://www.youtube.com/embed/cR45sih7T_M" frameborder="0" allowfullscreen></iframe></div><p>Until now we are done with setting up server side part. Now we can start writing android code.<br /></p><h3>Installing helper libraries and setting up the Emulator</h3><p>Before start writing android code we need to install the helper libraries and make required changes to the emulator.</p><p><strong>1</strong>. Goto your android SDK folder and open <em>SDK Manager</em> and install <em>Google Cloud Messaging for Android Library</em> under <em>Extras</em> section. (If you don&#8217;t see Google Cloud Messaging for Android Library update your SDK manager to latest version)</p><p><strong>2</strong>. After installing the library it will create <em>gcm.jar</em> file in your <strong>Andoird_SDK_Folder\extras\google\gcm\gcm-client\dist</strong>. Later you need to add this .jar file to your android project.</p><div class="image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2012/10/gcm_downloading_sdk.png" alt="android downloading gcm library" title="android downloading gcm library" width="580" height="535" class="alignnone size-full wp-image-2345" srcset="http://www.androidhive.info/wp-content/uploads/2012/10/gcm_downloading_sdk-300x277.png 300w, http://www.androidhive.info/wp-content/uploads/2012/10/gcm_downloading_sdk.png 580w" sizes="(max-width: 580px) 100vw, 580px" /><noscript><img src="http://www.androidhive.info/wp-content/uploads/2012/10/gcm_downloading_sdk.png" alt="android downloading gcm library" title="android downloading gcm library" width="580" height="535" class="alignnone size-full wp-image-2345" srcset="http://www.androidhive.info/wp-content/uploads/2012/10/gcm_downloading_sdk-300x277.png 300w, http://www.androidhive.info/wp-content/uploads/2012/10/gcm_downloading_sdk.png 580w" sizes="(max-width: 580px) 100vw, 580px" /></noscript></div><p><strong>3</strong>. Now open your <em>AVD Manager</em> and create a new Google API emulator and start the emulator. (<strong>Note</strong>: To test gcm application in emulator you need to test it on Google API device only)<br /> <strong>4</strong>. After launching emulator press <em>Menu</em> button goto <em>Settings</em>. Select <em>Accounts &#038; Sync</em>. And then press Add Account button and add a <em>Google account</em>.</p><div class="image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2012/10/android_gcm_adding_google_account1.png" alt="android gcm adding google account" title="android gcm adding google account" width="580" height="1000" class="alignnone size-full wp-image-2362" srcset="http://www.androidhive.info/wp-content/uploads/2012/10/android_gcm_adding_google_account1-174x300.png 174w, http://www.androidhive.info/wp-content/uploads/2012/10/android_gcm_adding_google_account1.png 580w" sizes="(max-width: 580px) 100vw, 580px" /><noscript><img src="http://www.androidhive.info/wp-content/uploads/2012/10/android_gcm_adding_google_account1.png" alt="android gcm adding google account" title="android gcm adding google account" width="580" height="1000" class="alignnone size-full wp-image-2362" srcset="http://www.androidhive.info/wp-content/uploads/2012/10/android_gcm_adding_google_account1-174x300.png 174w, http://www.androidhive.info/wp-content/uploads/2012/10/android_gcm_adding_google_account1.png 580w" sizes="(max-width: 580px) 100vw, 580px" /></noscript></div><p>Check the following video to know about adding google account in the emulator</p><div class="downloadsection"> <iframe width="590" height="330" src="http://www.youtube.com/embed/ZqQugUEOMrc" frameborder="0" allowfullscreen></iframe></div><p>Once you are done adding google account you are good to start android project.<br /></p><h3>Creating Android Project</h3><p><strong>1</strong>. Create a new android project and fill the required details. While creating project select minimum SDK version API 8 to support wider range of devices.<br /> <strong>2</strong>. After creating new project open <em>AndroidManifest.xml</em> file and do the following changes.<br /> The following permission are required to make your project support gcm.</p><p><em>INTERNET</em> &#8211; To make your app use internet services<br /> <em>ACCESS_NETWORK_STATE</em> &#8211; To access network state (used to detect internet status)<br /> <em>GET_ACCOUNTS</em> &#8211; Required as GCM needs google account<br /> <em>WAKE_LOCK</em> &#8211; Needed if your app need to wake your device when it sleeps<br /> <em>VIBRATE</em> &#8211; Needed if your support vibration when receiving notification<br /> Also add some broadcast receivers as mentioned below.</p><p>In the following code replace all <em>com.androidhive.pushnotifications</em> with your android package name.</p><pre class="brush: xml; title: AndroidManifest.xml; notranslate" title="AndroidManifest.xml">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    package=&quot;com.androidhive.pushnotifications&quot;
    android:versionCode=&quot;1&quot;
    android:versionName=&quot;1.0&quot; &gt;

    &lt;!-- GCM requires Android SDK version 2.2 (API level 8) or above. --&gt;
    &lt;uses-sdk
        android:minSdkVersion=&quot;8&quot;
        android:targetSdkVersion=&quot;16&quot; /&gt;

    &lt;!-- GCM connects to Internet Services. --&gt;
    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;

    &lt;!-- GCM requires a Google account. --&gt;
    &lt;uses-permission android:name=&quot;android.permission.GET_ACCOUNTS&quot; /&gt;

    &lt;!-- Keeps the processor from sleeping when a message is received. --&gt;
    &lt;uses-permission android:name=&quot;android.permission.WAKE_LOCK&quot; /&gt;

    &lt;!-- Creates a custom permission so only this app can receive its messages. --&gt;
    &lt;permission
        android:name=&quot;com.androidhive.pushnotifications.permission.C2D_MESSAGE&quot;
        android:protectionLevel=&quot;signature&quot; /&gt;

    &lt;uses-permission android:name=&quot;com.androidhive.pushnotifications.permission.C2D_MESSAGE&quot; /&gt;

    &lt;!-- This app has permission to register and receive data message. --&gt;
    &lt;uses-permission android:name=&quot;com.google.android.c2dm.permission.RECEIVE&quot; /&gt;

    &lt;!-- Network State Permissions to detect Internet status --&gt;
    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;

    &lt;!-- Permission to vibrate --&gt;
    &lt;uses-permission android:name=&quot;android.permission.VIBRATE&quot; /&gt;

    &lt;!-- Main activity. --&gt;
    &lt;application
        android:icon=&quot;@drawable/ic_launcher&quot;
        android:label=&quot;@string/app_name&quot; &gt;
        &lt;!-- Register Activity --&gt;
        &lt;activity
            android:name=&quot;.RegisterActivity&quot;
            android:label=&quot;@string/app_name&quot; &gt;
            &lt;intent-filter&gt;
                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;

                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;
            &lt;/intent-filter&gt;
        &lt;/activity&gt;
        
        &lt;!-- Main Activity --&gt;
        &lt;activity
            android:name=&quot;.MainActivity&quot;
            android:configChanges=&quot;orientation|keyboardHidden&quot;
            android:label=&quot;@string/app_name&quot; &gt;
        &lt;/activity&gt;

        &lt;receiver
            android:name=&quot;com.google.android.gcm.GCMBroadcastReceiver&quot;
            android:permission=&quot;com.google.android.c2dm.permission.SEND&quot; &gt;
            &lt;intent-filter&gt;

                &lt;!-- Receives the actual messages. --&gt;
                &lt;action android:name=&quot;com.google.android.c2dm.intent.RECEIVE&quot; /&gt;
                &lt;!-- Receives the registration id. --&gt;
                &lt;action android:name=&quot;com.google.android.c2dm.intent.REGISTRATION&quot; /&gt;

                &lt;category android:name=&quot;com.androidhive.pushnotifications&quot; /&gt;
            &lt;/intent-filter&gt;
        &lt;/receiver&gt;

        &lt;service android:name=&quot;.GCMIntentService&quot; /&gt;
    &lt;/application&gt;

&lt;/manifest&gt;
</pre><p><strong>3</strong>. Open your <em>strings.xml</em> file under <em>res -> values</em> folder and paste following strings. (If you don&#8217;t have strings.xml file, create a new one)</p><pre class="brush: xml; title: strings.xml; notranslate" title="strings.xml">
&lt;resources&gt;

    &lt;string name=&quot;app_name&quot;&gt;AndroidHive GCM&lt;/string&gt;
    &lt;string name=&quot;hello_world&quot;&gt;Hello world!&lt;/string&gt;
    &lt;string name=&quot;menu_settings&quot;&gt;Settings&lt;/string&gt;
    &lt;string name=&quot;title_activity_main&quot;&gt;Push Notifications&lt;/string&gt;
    &lt;string name=&quot;error_config&quot;&gt;Please set the %1$s constant and recompile the app.&lt;/string&gt;
    &lt;string name=&quot;already_registered&quot;&gt;Device is already registered on server.&lt;/string&gt;
    &lt;string name=&quot;gcm_registered&quot;&gt;From GCM: device successfully registered!&lt;/string&gt;
    &lt;string name=&quot;gcm_unregistered&quot;&gt;From GCM: device successfully unregistered!&lt;/string&gt;
    &lt;string name=&quot;gcm_message&quot;&gt;From GCM: you got message!&lt;/string&gt;
    &lt;string name=&quot;gcm_error&quot;&gt;From GCM: error (%1$s).&lt;/string&gt;
    &lt;string name=&quot;gcm_recoverable_error&quot;&gt;From GCM: recoverable error (%1$s).&lt;/string&gt;
    &lt;string name=&quot;gcm_deleted&quot;&gt;From GCM: server deleted %1$d pending messages!&lt;/string&gt;
    &lt;string name=&quot;server_registering&quot;&gt;Trying (attempt %1$d/%2$d) to register device on Demo Server.&lt;/string&gt;
    &lt;string name=&quot;server_registered&quot;&gt;From Demo Server: successfully added device!&lt;/string&gt;
    &lt;string name=&quot;server_unregistered&quot;&gt;From Demo Server: successfully removed device!&lt;/string&gt;
    &lt;string name=&quot;server_register_error&quot;&gt;Could not register device on Demo Server after %1$d attempts.&lt;/string&gt;
    &lt;string name=&quot;server_unregister_error&quot;&gt;Could not unregister device on Demo Server (%1$s).&lt;/string&gt;
    &lt;string name=&quot;options_register&quot;&gt;Register&lt;/string&gt;
    &lt;string name=&quot;options_unregister&quot;&gt;Unregister&lt;/string&gt;
    &lt;string name=&quot;options_clear&quot;&gt;Clear&lt;/string&gt;
    &lt;string name=&quot;options_exit&quot;&gt;Exit&lt;/string&gt;

&lt;/resources&gt;
</pre><p><strong>4</strong>. Create a new class named <em>AlertDialogManager.java</em> and paste the following code. This class used to show alert dialog in your application.</p><div style="float:none;margin:10px 0 10px 0;text-align:center;"> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>  <ins class="adsbygoogle"
style="display:inline-block;width:300px;height:250px"
data-ad-client="ca-pub-9207768510467156"
data-ad-slot="2887095024"></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script> </div><pre class="brush: java; title: AlertDialogManager.java; notranslate" title="AlertDialogManager.java">
package com.androidhive.pushnotifications;

import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;

public class AlertDialogManager {
	/**
	 * Function to display simple Alert Dialog
	 * @param context - application context
	 * @param title - alert dialog title
	 * @param message - alert message
	 * @param status - success/failure (used to set icon)
	 * 				 - pass null if you don't want icon
	 * */
	public void showAlertDialog(Context context, String title, String message,
			Boolean status) {
		AlertDialog alertDialog = new AlertDialog.Builder(context).create();

		// Setting Dialog Title
		alertDialog.setTitle(title);

		// Setting Dialog Message
		alertDialog.setMessage(message);

		if(status != null)
			// Setting alert dialog icon
			alertDialog.setIcon((status) ? R.drawable.success : R.drawable.fail);

		// Setting OK Button
		alertDialog.setButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {
			public void onClick(DialogInterface dialog, int which) {
			}
		});

		// Showing Alert Message
		alertDialog.show();
	}
}
</pre><p><strong>5</strong>. Create another class named <em>ConnectionDetector.java</em> This class used to detect internet connection status.</p><pre class="brush: java; title: ConnectionDetector.java; notranslate" title="ConnectionDetector.java">
package com.androidhive.pushnotifications;

import android.content.Context;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
 
public class ConnectionDetector {
 
    private Context _context;
 
    public ConnectionDetector(Context context){
        this._context = context;
    }
 
    /**
     * Checking for all possible internet providers
     * **/
    public boolean isConnectingToInternet(){
        ConnectivityManager connectivity = (ConnectivityManager) _context.getSystemService(Context.CONNECTIVITY_SERVICE);
          if (connectivity != null)
          {
              NetworkInfo[] info = connectivity.getAllNetworkInfo();
              if (info != null)
                  for (int i = 0; i &lt; info.length; i++)
                      if (info[i].getState() == NetworkInfo.State.CONNECTED)
                      {
                          return true;
                      }
 
          }
          return false;
    }
}
</pre><p><strong>6</strong>. Create class file called <em>CommonUtilities.java</em> and type the following code. This class   contains the GCM configuration and our server registration url.</p><p><em>SERVER_URL</em> &#8211; Your server user registration url<br /> <em>SENDER_ID</em> &#8211; Google project id</p><pre class="brush: java; title: CommonUtilities.java; notranslate" title="CommonUtilities.java">
package com.androidhive.pushnotifications;

import android.content.Context;
import android.content.Intent;

public final class CommonUtilities {
	
	// give your server registration url here
    static final String SERVER_URL = &quot;http://10.0.2.2/gcm_server_php/register.php&quot;; 

    // Google project id
    static final String SENDER_ID = &quot;903913289319&quot;; 

    /**
     * Tag used on log messages.
     */
    static final String TAG = &quot;AndroidHive GCM&quot;;

    static final String DISPLAY_MESSAGE_ACTION =
            &quot;com.androidhive.pushnotifications.DISPLAY_MESSAGE&quot;;

    static final String EXTRA_MESSAGE = &quot;message&quot;;

    /**
     * Notifies UI to display a message.
     * &lt;p&gt;
     * This method is defined in the common helper because it's used both by
     * the UI and the background service.
     *
     * @param context application's context.
     * @param message message to be displayed.
     */
    static void displayMessage(Context context, String message) {
        Intent intent = new Intent(DISPLAY_MESSAGE_ACTION);
        intent.putExtra(EXTRA_MESSAGE, message);
        context.sendBroadcast(intent);
    }
}
</pre><p><strong>7</strong>. Create a new class called <em>ServerUtilities.java</em> with following content. This class has following funtions</p><pre class="brush: java; title: ; notranslate" title="">
// function to register a user on our server(name, email, gcm reg id)
static void register()

// function to unregister the device
static void unregister()

// method to POST data to server
private static void post()
</pre><pre class="brush: java; title: ServerUtilities.java; notranslate" title="ServerUtilities.java">
package com.androidhive.pushnotifications;

import static com.androidhive.pushnotifications.CommonUtilities.SERVER_URL;
import static com.androidhive.pushnotifications.CommonUtilities.TAG;
import static com.androidhive.pushnotifications.CommonUtilities.displayMessage;

import java.io.IOException;
import java.io.OutputStream;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.Map.Entry;
import java.util.Random;

import android.content.Context;
import android.util.Log;

import com.google.android.gcm.GCMRegistrar;


public final class ServerUtilities {
	private static final int MAX_ATTEMPTS = 5;
    private static final int BACKOFF_MILLI_SECONDS = 2000;
    private static final Random random = new Random();

    /**
     * Register this account/device pair within the server.
     *
     */
    static void register(final Context context, String name, String email, final String regId) {
        Log.i(TAG, &quot;registering device (regId = &quot; + regId + &quot;)&quot;);
        String serverUrl = SERVER_URL;
        Map&lt;String, String&gt; params = new HashMap&lt;String, String&gt;();
        params.put(&quot;regId&quot;, regId);
        params.put(&quot;name&quot;, name);
        params.put(&quot;email&quot;, email);
        
        long backoff = BACKOFF_MILLI_SECONDS + random.nextInt(1000);
        // Once GCM returns a registration id, we need to register on our server
        // As the server might be down, we will retry it a couple
        // times.
        for (int i = 1; i &lt;= MAX_ATTEMPTS; i++) {
            Log.d(TAG, &quot;Attempt #&quot; + i + &quot; to register&quot;);
            try {
                displayMessage(context, context.getString(
                        R.string.server_registering, i, MAX_ATTEMPTS));
                post(serverUrl, params);
                GCMRegistrar.setRegisteredOnServer(context, true);
                String message = context.getString(R.string.server_registered);
                CommonUtilities.displayMessage(context, message);
                return;
            } catch (IOException e) {
                // Here we are simplifying and retrying on any error; in a real
                // application, it should retry only on unrecoverable errors
                // (like HTTP error code 503).
                Log.e(TAG, &quot;Failed to register on attempt &quot; + i + &quot;:&quot; + e);
                if (i == MAX_ATTEMPTS) {
                    break;
                }
                try {
                    Log.d(TAG, &quot;Sleeping for &quot; + backoff + &quot; ms before retry&quot;);
                    Thread.sleep(backoff);
                } catch (InterruptedException e1) {
                    // Activity finished before we complete - exit.
                    Log.d(TAG, &quot;Thread interrupted: abort remaining retries!&quot;);
                    Thread.currentThread().interrupt();
                    return;
                }
                // increase backoff exponentially
                backoff *= 2;
            }
        }
        String message = context.getString(R.string.server_register_error,
                MAX_ATTEMPTS);
        CommonUtilities.displayMessage(context, message);
    }

    /**
     * Unregister this account/device pair within the server.
     */
    static void unregister(final Context context, final String regId) {
        Log.i(TAG, &quot;unregistering device (regId = &quot; + regId + &quot;)&quot;);
        String serverUrl = SERVER_URL + &quot;/unregister&quot;;
        Map&lt;String, String&gt; params = new HashMap&lt;String, String&gt;();
        params.put(&quot;regId&quot;, regId);
        try {
            post(serverUrl, params);
            GCMRegistrar.setRegisteredOnServer(context, false);
            String message = context.getString(R.string.server_unregistered);
            CommonUtilities.displayMessage(context, message);
        } catch (IOException e) {
            // At this point the device is unregistered from GCM, but still
            // registered in the server.
            // We could try to unregister again, but it is not necessary:
            // if the server tries to send a message to the device, it will get
            // a &quot;NotRegistered&quot; error message and should unregister the device.
            String message = context.getString(R.string.server_unregister_error,
                    e.getMessage());
            CommonUtilities.displayMessage(context, message);
        }
    }

    /**
     * Issue a POST request to the server.
     *
     * @param endpoint POST address.
     * @param params request parameters.
     *
     * @throws IOException propagated from POST.
     */
    private static void post(String endpoint, Map&lt;String, String&gt; params)
            throws IOException {   	
        
        URL url;
        try {
            url = new URL(endpoint);
        } catch (MalformedURLException e) {
            throw new IllegalArgumentException(&quot;invalid url: &quot; + endpoint);
        }
        StringBuilder bodyBuilder = new StringBuilder();
        Iterator&lt;Entry&lt;String, String&gt;&gt; iterator = params.entrySet().iterator();
        // constructs the POST body using the parameters
        while (iterator.hasNext()) {
            Entry&lt;String, String&gt; param = iterator.next();
            bodyBuilder.append(param.getKey()).append('=')
                    .append(param.getValue());
            if (iterator.hasNext()) {
                bodyBuilder.append('&amp;');
            }
        }
        String body = bodyBuilder.toString();
        Log.v(TAG, &quot;Posting '&quot; + body + &quot;' to &quot; + url);
        byte[] bytes = body.getBytes();
        HttpURLConnection conn = null;
        try {
        	Log.e(&quot;URL&quot;, &quot;&gt; &quot; + url);
            conn = (HttpURLConnection) url.openConnection();
            conn.setDoOutput(true);
            conn.setUseCaches(false);
            conn.setFixedLengthStreamingMode(bytes.length);
            conn.setRequestMethod(&quot;POST&quot;);
            conn.setRequestProperty(&quot;Content-Type&quot;,
                    &quot;application/x-www-form-urlencoded;charset=UTF-8&quot;);
            // post the request
            OutputStream out = conn.getOutputStream();
            out.write(bytes);
            out.close();
            // handle the response
            int status = conn.getResponseCode();
            if (status != 200) {
              throw new IOException(&quot;Post failed with error code &quot; + status);
            }
        } finally {
            if (conn != null) {
                conn.disconnect();
            }
        }
      }
}
</pre><p><strong>8</strong>. Add a new class file called <em>GCMIntentService.java</em> This class handles all GCM related services.</p><pre class="brush: java; title: ; notranslate" title="">
// method called once the device successfully registered with GCM
protected void onRegistered()

// called when a new message arrived to device
protected void onMessage()

// called when device is unregistered with GCM services
protected void onUnregistered()

// On receiving an error
public void onError()

// method to generate a notification
private static void generateNotification()

</pre><pre class="brush: java; title: GCMIntentService.java; notranslate" title="GCMIntentService.java">
package com.androidhive.pushnotifications;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

import com.google.android.gcm.GCMBaseIntentService;

import static com.androidhive.pushnotifications.CommonUtilities.SENDER_ID;
import static com.androidhive.pushnotifications.CommonUtilities.displayMessage;

public class GCMIntentService extends GCMBaseIntentService {

	private static final String TAG = &quot;GCMIntentService&quot;;

    public GCMIntentService() {
        super(SENDER_ID);
    }

    /**
     * Method called on device registered
     **/
    @Override
    protected void onRegistered(Context context, String registrationId) {
        Log.i(TAG, &quot;Device registered: regId = &quot; + registrationId);
        displayMessage(context, &quot;Your device registred with GCM&quot;);
        Log.d(&quot;NAME&quot;, MainActivity.name);
        ServerUtilities.register(context, MainActivity.name, MainActivity.email, registrationId);
    }

    /**
     * Method called on device un registred
     * */
    @Override
    protected void onUnregistered(Context context, String registrationId) {
        Log.i(TAG, &quot;Device unregistered&quot;);
        displayMessage(context, getString(R.string.gcm_unregistered));
        ServerUtilities.unregister(context, registrationId);
    }

    /**
     * Method called on Receiving a new message
     * */
    @Override
    protected void onMessage(Context context, Intent intent) {
        Log.i(TAG, &quot;Received message&quot;);
        String message = intent.getExtras().getString(&quot;price&quot;);
        
        displayMessage(context, message);
        // notifies user
        generateNotification(context, message);
    }

    /**
     * Method called on receiving a deleted message
     * */
    @Override
    protected void onDeletedMessages(Context context, int total) {
        Log.i(TAG, &quot;Received deleted messages notification&quot;);
        String message = getString(R.string.gcm_deleted, total);
        displayMessage(context, message);
        // notifies user
        generateNotification(context, message);
    }

    /**
     * Method called on Error
     * */
    @Override
    public void onError(Context context, String errorId) {
        Log.i(TAG, &quot;Received error: &quot; + errorId);
        displayMessage(context, getString(R.string.gcm_error, errorId));
    }

    @Override
    protected boolean onRecoverableError(Context context, String errorId) {
        // log message
        Log.i(TAG, &quot;Received recoverable error: &quot; + errorId);
        displayMessage(context, getString(R.string.gcm_recoverable_error,
                errorId));
        return super.onRecoverableError(context, errorId);
    }

    /**
     * Issues a notification to inform the user that server has sent a message.
     */
    private static void generateNotification(Context context, String message) {
        int icon = R.drawable.ic_launcher;
        long when = System.currentTimeMillis();
        NotificationManager notificationManager = (NotificationManager)
                context.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(icon, message, when);
        
        String title = context.getString(R.string.app_name);
        
        Intent notificationIntent = new Intent(context, MainActivity.class);
        // set intent so it does not start a new activity
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |
                Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent intent =
                PendingIntent.getActivity(context, 0, notificationIntent, 0);
        notification.setLatestEventInfo(context, title, message, intent);
        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        
        // Play default notification sound
        notification.defaults |= Notification.DEFAULT_SOUND;
        
        // Vibrate if vibrate is enabled
        notification.defaults |= Notification.DEFAULT_VIBRATE;
        notificationManager.notify(0, notification);      

    }

}
</pre><p><strong>9</strong>. Here i am adding a registration screen where user can register using their details. To make this tutorial simple i am asking only name and email only. Once user registration is done the user details will be sent to our server where the user details will be stored in mysql database.</p><p>Create a new xml file called <em>activity_register.xml</em> under <em>res -> layout</em> folder and paste the following code.</p><pre class="brush: xml; title: activity_register.xml; notranslate" title="activity_register.xml">
&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:orientation=&quot;vertical&quot; &gt;    
     
     &lt;TextView android:layout_width=&quot;fill_parent&quot;
         android:layout_height=&quot;wrap_content&quot;
         android:text=&quot;Full Name:&quot;
         android:layout_marginLeft=&quot;10dip&quot;
         android:layout_marginRight=&quot;10dip&quot;
         android:layout_marginTop=&quot;20dip&quot;/&gt;
     
     &lt;EditText android:id=&quot;@+id/txtName&quot; 
         android:layout_width=&quot;fill_parent&quot;
         android:layout_height=&quot;wrap_content&quot;
         android:layout_margin=&quot;10dip&quot;
         android:layout_marginBottom=&quot;20dip&quot;/&gt;
     
     &lt;TextView android:layout_width=&quot;fill_parent&quot;
         android:layout_height=&quot;wrap_content&quot;
         android:text=&quot;Email:&quot;
         android:layout_marginLeft=&quot;10dip&quot;
         android:layout_marginRight=&quot;10dip&quot;/&gt;
     
     &lt;EditText android:id=&quot;@+id/txtEmail&quot; 
         android:layout_width=&quot;fill_parent&quot;
         android:layout_height=&quot;wrap_content&quot;
         android:layout_margin=&quot;10dip&quot;
         android:layout_marginBottom=&quot;20dip&quot;/&gt;
     
     &lt;Button android:id=&quot;@+id/btnRegister&quot;
         android:layout_width=&quot;fill_parent&quot;
         android:layout_height=&quot;wrap_content&quot;
         android:text=&quot;Register&quot;
         android:layout_margin=&quot;10dip&quot;/&gt;

&lt;/LinearLayout&gt;
</pre><p><strong>10</strong>. Create a new class called <em>RegisterActivity.java</em> This class will be used to handler user registration.</p><p>In the following code first internet status and gcm configuration is checked and once user presses the registration button user details will be send to <em>MainActivity.java</em> from there they will send to our server.</p><pre class="brush: java; title: RegisterActivity.java; notranslate" title="RegisterActivity.java">
package com.androidhive.pushnotifications;

import static com.androidhive.pushnotifications.CommonUtilities.SENDER_ID;
import static com.androidhive.pushnotifications.CommonUtilities.SERVER_URL;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class RegisterActivity extends Activity {
	// alert dialog manager
	AlertDialogManager alert = new AlertDialogManager();
	
	// Internet detector
	ConnectionDetector cd;
	
	// UI elements
	EditText txtName;
	EditText txtEmail;
	
	// Register button
	Button btnRegister;

	@Override
	public void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_register);
		
		cd = new ConnectionDetector(getApplicationContext());

		// Check if Internet present
		if (!cd.isConnectingToInternet()) {
			// Internet Connection is not present
			alert.showAlertDialog(RegisterActivity.this,
					&quot;Internet Connection Error&quot;,
					&quot;Please connect to working Internet connection&quot;, false);
			// stop executing code by return
			return;
		}

		// Check if GCM configuration is set
		if (SERVER_URL == null || SENDER_ID == null || SERVER_URL.length() == 0
				|| SENDER_ID.length() == 0) {
			// GCM sernder id / server url is missing
			alert.showAlertDialog(RegisterActivity.this, &quot;Configuration Error!&quot;,
					&quot;Please set your Server URL and GCM Sender ID&quot;, false);
			// stop executing code by return
			 return;
		}
		
		txtName = (EditText) findViewById(R.id.txtName);
		txtEmail = (EditText) findViewById(R.id.txtEmail);
		btnRegister = (Button) findViewById(R.id.btnRegister);
		
		/*
		 * Click event on Register button
		 * */
		btnRegister.setOnClickListener(new View.OnClickListener() {
			
			@Override
			public void onClick(View arg0) {
				// Read EditText dat
				String name = txtName.getText().toString();
				String email = txtEmail.getText().toString();
				
				// Check if user filled the form
				if(name.trim().length() &gt; 0 &amp;&amp; email.trim().length() &gt; 0){
					// Launch Main Activity
					Intent i = new Intent(getApplicationContext(), MainActivity.class);
					
					// Registering user on our server					
					// Sending registraiton details to MainActivity
					i.putExtra(&quot;name&quot;, name);
					i.putExtra(&quot;email&quot;, email);
					startActivity(i);
					finish();
				}else{
					// user doen't filled that data
					// ask him to fill the form
					alert.showAlertDialog(RegisterActivity.this, &quot;Registration Error!&quot;, &quot;Please enter your details&quot;, false);
				}
			}
		});
	}

}
</pre><div class="image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2012/10/android_gcm_device_registration.png" alt="android device gcm registration" title="android device gcm registration" width="580" height="566" class="alignnone size-full wp-image-2371" srcset="http://www.androidhive.info/wp-content/uploads/2012/10/android_gcm_device_registration-300x293.png 300w, http://www.androidhive.info/wp-content/uploads/2012/10/android_gcm_device_registration.png 580w" sizes="(max-width: 580px) 100vw, 580px" /><noscript><img src="http://www.androidhive.info/wp-content/uploads/2012/10/android_gcm_device_registration.png" alt="android device gcm registration" title="android device gcm registration" width="580" height="566" class="alignnone size-full wp-image-2371" srcset="http://www.androidhive.info/wp-content/uploads/2012/10/android_gcm_device_registration-300x293.png 300w, http://www.androidhive.info/wp-content/uploads/2012/10/android_gcm_device_registration.png 580w" sizes="(max-width: 580px) 100vw, 580px" /></noscript></div><p><strong>11</strong>. Now open your main activity file (In my case <em>MainActivity.java</em>) and type the following code.<br /> In the following code<br /> I am receiving name, email sent from RegisterActivity and storing them in static variables.</p><p>Then i am checking whether this device has gcm registration id, if not i am registering it on gcm by calling <em>GCMRegistrar.register(this, SENDER_ID)</em> method</p><p><em>private final BroadcastReceiver mHandleMessageReceiver = new BroadcastReceiver()</em> method will be called when device gets a new push notification message. For now i am displaying the message on the screen. You might need to take appropriate action on the message depending upon your app requirement. (Example: Storing it in SQLite database)</p><pre class="brush: java; title: MainActivity.java; notranslate" title="MainActivity.java">
package com.androidhive.pushnotifications;

import static com.androidhive.pushnotifications.CommonUtilities.DISPLAY_MESSAGE_ACTION;
import static com.androidhive.pushnotifications.CommonUtilities.EXTRA_MESSAGE;
import static com.androidhive.pushnotifications.CommonUtilities.SENDER_ID;
import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;
import android.widget.Toast;

import com.google.android.gcm.GCMRegistrar;

public class MainActivity extends Activity {
	// label to display gcm messages
	TextView lblMessage;
	
	// Asyntask
	AsyncTask&lt;Void, Void, Void&gt; mRegisterTask;
	
	// Alert dialog manager
	AlertDialogManager alert = new AlertDialogManager();
	
	// Connection detector
	ConnectionDetector cd;
	
	public static String name;
	public static String email;

	@Override
	public void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_main);
		
		cd = new ConnectionDetector(getApplicationContext());

		// Check if Internet present
		if (!cd.isConnectingToInternet()) {
			// Internet Connection is not present
			alert.showAlertDialog(MainActivity.this,
					&quot;Internet Connection Error&quot;,
					&quot;Please connect to working Internet connection&quot;, false);
			// stop executing code by return
			return;
		}
		
		// Getting name, email from intent
		Intent i = getIntent();
		
		name = i.getStringExtra(&quot;name&quot;);
		email = i.getStringExtra(&quot;email&quot;);		
		
		// Make sure the device has the proper dependencies.
		GCMRegistrar.checkDevice(this);

		// Make sure the manifest was properly set - comment out this line
		// while developing the app, then uncomment it when it's ready.
		GCMRegistrar.checkManifest(this);

		lblMessage = (TextView) findViewById(R.id.lblMessage);
		
		registerReceiver(mHandleMessageReceiver, new IntentFilter(
				DISPLAY_MESSAGE_ACTION));
		
		// Get GCM registration id
		final String regId = GCMRegistrar.getRegistrationId(this);

		// Check if regid already presents
		if (regId.equals(&quot;&quot;)) {
			// Registration is not present, register now with GCM			
			GCMRegistrar.register(this, SENDER_ID);
		} else {
			// Device is already registered on GCM
			if (GCMRegistrar.isRegisteredOnServer(this)) {
				// Skips registration.				
				Toast.makeText(getApplicationContext(), &quot;Already registered with GCM&quot;, Toast.LENGTH_LONG).show();
			} else {
				// Try to register again, but not in the UI thread.
				// It's also necessary to cancel the thread onDestroy(),
				// hence the use of AsyncTask instead of a raw thread.
				final Context context = this;
				mRegisterTask = new AsyncTask&lt;Void, Void, Void&gt;() {

					@Override
					protected Void doInBackground(Void... params) {
						// Register on our server
						// On server creates a new user
						ServerUtilities.register(context, name, email, regId);
						return null;
					}

					@Override
					protected void onPostExecute(Void result) {
						mRegisterTask = null;
					}

				};
				mRegisterTask.execute(null, null, null);
			}
		}
	}		

	/**
	 * Receiving push messages
	 * */
	private final BroadcastReceiver mHandleMessageReceiver = new BroadcastReceiver() {
		@Override
		public void onReceive(Context context, Intent intent) {
			String newMessage = intent.getExtras().getString(EXTRA_MESSAGE);
			// Waking up mobile if it is sleeping
			WakeLocker.acquire(getApplicationContext());
			
			/**
			 * Take appropriate action on this message
			 * depending upon your app requirement
			 * For now i am just displaying it on the screen
			 * */
			
			// Showing received message
			lblMessage.append(newMessage + &quot;\n&quot;);			
			Toast.makeText(getApplicationContext(), &quot;New Message: &quot; + newMessage, Toast.LENGTH_LONG).show();
			
			// Releasing wake lock
			WakeLocker.release();
		}
	};
	
	@Override
	protected void onDestroy() {
		if (mRegisterTask != null) {
			mRegisterTask.cancel(true);
		}
		try {
			unregisterReceiver(mHandleMessageReceiver);
			GCMRegistrar.onDestroy(this);
		} catch (Exception e) {
			Log.e(&quot;UnRegister Receiver Error&quot;, &quot;&gt; &quot; + e.getMessage());
		}
		super.onDestroy();
	}

}
</pre><p>Now we are done with our android project. Following are the enhancements to enhance the user experience.<br /></p><h3>Playing custom notification sound</h3><p>If you want to play custom notification sound, copy your sound file in your project assets folder and write the following code in in <em>private static void generateNotification()</em> function which presents in <em>GCMIntentService.java</em> file.</p><pre class="brush: java; title: ; notranslate" title="">
notification.sound = Uri.parse(&quot;android.resource://&quot; + context.getPackageName() + &quot;your_sound_file_name.mp3&quot;);
</pre><p></p><h3>Vibrating device on receiving new notification</h3><p>If you wan&#8217;t to vibrate the device on receiving a new notification add the following lines of code in <em>private static void generateNotification()</em> function which presents in <em>GCMIntentService.java</em> file. Also make sure that you added following permission in <em>AndroidManifest.xml</em> file</p><pre class="brush: xml; title: ; notranslate" title="">
&lt;uses-permission android:name=&quot;android.permission.VIBRATE&quot; /&gt;
</pre><pre class="brush: java; title: ; notranslate" title="">
// Vibrate if vibrate is enabled
notification.defaults |= Notification.DEFAULT_VIBRATE;
</pre><p></p><h3>Waking up device on receiving new notification</h3><p>You can also wake the device on receiving new notification if the device is sleeping. Add the following permission in your AndroidManifest.xml file</p><pre class="brush: xml; title: ; notranslate" title="">
&lt;uses-permission android:name=&quot;android.permission.WAKE_LOCK&quot; /&gt;
</pre><p>Add a new class file named <em>WakeLocker.java</em> and paste the following code.</p><pre class="brush: java; title: WakeLocker.java; notranslate" title="WakeLocker.java">
package com.androidhive.pushnotifications;

import android.content.Context;
import android.os.PowerManager;

public abstract class WakeLocker {
    private static PowerManager.WakeLock wakeLock;

    public static void acquire(Context context) {
        if (wakeLock != null) wakeLock.release();

        PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
        wakeLock = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK |
                PowerManager.ACQUIRE_CAUSES_WAKEUP |
                PowerManager.ON_AFTER_RELEASE, &quot;WakeLock&quot;);
        wakeLock.acquire();
    }

    public static void release() {
        if (wakeLock != null) wakeLock.release(); wakeLock = null;
    }
}
</pre><p>and call the following lines code in <em>private final BroadcastReceiver mHandleMessageReceiver = new BroadcastReceiver()</em> presents in <em>MainActivity.java</em>.</p><pre class="brush: java; title: ; notranslate" title="">
// Waking up mobile if it is sleeping
WakeLocker.acquire(getApplicationContext());

// new message code here

// Releasing wake lock
WakeLocker.release();
</pre><p>Run the project and i&#8217;ll be happy to solve the errors if you got any.</p><div style="display: none"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2012/10/banner_gcm.png" alt="android google cloud messaging" title="android google cloud messaging" width="166" height="198" class="alignnone size-full wp-image-2451" /><noscript><img src="http://www.androidhive.info/wp-content/uploads/2012/10/banner_gcm.png" alt="android google cloud messaging" title="android google cloud messaging" width="166" height="198" class="alignnone size-full wp-image-2451" /></noscript></div><div style="font-size:0px;height:0px;line-height:0px;margin:0;padding:0;clear:both"></div><span id="tve_leads_end_content" style="display: block; visibility: hidden; border: 1px solid red;"></span> <script type="text/javascript">jQuery(document).ready(function($) {
    $.post('http://www.androidhive.info/wp-admin/admin-ajax.php', {action: 'mts_view_count', id: '2171'});
});</script> </div></div></div><div class="postauthor"><h4>About The Author</h4> <img alt='' src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src='http://0.gravatar.com/avatar/9578184c8f454a148b0b59dd1d21dfaf?s=100&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/9578184c8f454a148b0b59dd1d21dfaf?s=200&amp;d=mm&amp;r=g 2x' class='avatar avatar-100 photo' height='100' width='100' /><noscript><img alt='' src='http://0.gravatar.com/avatar/9578184c8f454a148b0b59dd1d21dfaf?s=100&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/9578184c8f454a148b0b59dd1d21dfaf?s=200&amp;d=mm&amp;r=g 2x' class='avatar avatar-100 photo' height='100' width='100' /></noscript><h5 class="vcard"><a href="http://www.androidhive.info/author/admin/" rel="nofollow" class="fn">Ravi Tamada</a></h5><p>Ravi is hardcore Android programmer and Android programming has been his passion since he compiled his first hello-world program. Solving real problems of Android developers through tutorials has always been interesting part for him.</p></div><div class="related-posts"><h4>Related Posts</h4><div class="clear"> <article class="latestPost excerpt  "> <a href="http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/" title="How to connect Android with PHP, MySQL" rel="nofollow" id="featured-thumbnail"><div class="featured-thumbnail"><img width="270" height="165" src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2012/05/banner_mysql_php1-270x165.png" class="attachment-featured size-featured wp-post-image" alt="android connecting to mysql php" title="" /><noscript><img width="270" height="165" src="http://www.androidhive.info/wp-content/uploads/2012/05/banner_mysql_php1-270x165.png" class="attachment-featured size-featured wp-post-image" alt="android connecting to mysql php" title="" /></noscript></div> </a> <header><h2 class="title front-view-title"><a href="http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/" title="How to connect Android with PHP, MySQL">How to connect Android with PHP, MySQL</a></h2><div class="post-info"> <span class="theauthor">by <span itemprop="author"><a rel="nofollow" href="http://www.androidhive.info/author/admin/" title="Posts by Ravi Tamada" rel="author">Ravi Tamada</a><span class="divider1">/</span></div> </header> </article> <article class="latestPost excerpt  "> <a href="http://www.androidhive.info/2016/06/android-getting-started-firebase-simple-login-registration-auth/" title="Android Getting Started with Firebase &#8211; Login and Registration Authentication" rel="nofollow" id="featured-thumbnail"><div class="featured-thumbnail"><img width="270" height="165" src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2016/06/android-getting-started-with-firebase-270x165.png" class="attachment-featured size-featured wp-post-image" alt="android-getting-started-with-firebase" title="" /><noscript><img width="270" height="165" src="http://www.androidhive.info/wp-content/uploads/2016/06/android-getting-started-with-firebase-270x165.png" class="attachment-featured size-featured wp-post-image" alt="android-getting-started-with-firebase" title="" /></noscript></div> </a> <header><h2 class="title front-view-title"><a href="http://www.androidhive.info/2016/06/android-getting-started-firebase-simple-login-registration-auth/" title="Android Getting Started with Firebase &#8211; Login and Registration Authentication">Android Getting Started with Firebase &#8211; Login and Registration Authentication</a></h2><div class="post-info"> <span class="theauthor">by <span itemprop="author"><a rel="nofollow" href="http://www.androidhive.info/author/admin/" title="Posts by Ravi Tamada" rel="author">Ravi Tamada</a><span class="divider1">/</span></div> </header> </article> <article class="latestPost excerpt  last"> <a href="http://www.androidhive.info/2015/06/android-push-notifications-using-parse-com/" title="Android Push Notifications using Parse.com" rel="nofollow" id="featured-thumbnail"><div class="featured-thumbnail"><img width="270" height="165" src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2015/06/parse-banner-270x165.png" class="attachment-featured size-featured wp-post-image" alt="Android Push Notifications using Parse.com" title="" /><noscript><img width="270" height="165" src="http://www.androidhive.info/wp-content/uploads/2015/06/parse-banner-270x165.png" class="attachment-featured size-featured wp-post-image" alt="Android Push Notifications using Parse.com" title="" /></noscript></div> </a> <header><h2 class="title front-view-title"><a href="http://www.androidhive.info/2015/06/android-push-notifications-using-parse-com/" title="Android Push Notifications using Parse.com">Android Push Notifications using Parse.com</a></h2><div class="post-info"> <span class="theauthor">by <span itemprop="author"><a rel="nofollow" href="http://www.androidhive.info/author/admin/" title="Posts by Ravi Tamada" rel="author">Ravi Tamada</a><span class="divider1">/</span></div> </header> </article> <article class="latestPost excerpt  "> <a href="http://www.androidhive.info/2013/12/android-populating-spinner-data-from-mysql-database/" title="Android Populating Spinner data from MySQL Database" rel="nofollow" id="featured-thumbnail"><div class="featured-thumbnail"><img width="270" height="165" src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2013/12/android-populating-spinner-from-mysql-270x165.jpg" class="attachment-featured size-featured wp-post-image" alt="android populating spinner mysql database" title="" /><noscript><img width="270" height="165" src="http://www.androidhive.info/wp-content/uploads/2013/12/android-populating-spinner-from-mysql-270x165.jpg" class="attachment-featured size-featured wp-post-image" alt="android populating spinner mysql database" title="" /></noscript></div> </a> <header><h2 class="title front-view-title"><a href="http://www.androidhive.info/2013/12/android-populating-spinner-data-from-mysql-database/" title="Android Populating Spinner data from MySQL Database">Android Populating Spinner data from MySQL Database</a></h2><div class="post-info"> <span class="theauthor">by <span itemprop="author"><a rel="nofollow" href="http://www.androidhive.info/author/admin/" title="Posts by Ravi Tamada" rel="author">Ravi Tamada</a><span class="divider1">/</span></div> </header> </article></div></div></div><div id="disqus_thread" data-disqus-shortname="androidhive"></div></div> </article> <aside id="sidebar" class="sidebar c-4-12 " role="complementary" itemscope itemtype="http://schema.org/WPSideBar"><div id="search-2" class="widget widget_search"><h3 class="widget-title">SEARCH HERE</h3><form method="get" id="searchform" class="search-form" action="http://www.androidhive.info" _lpchecked="1"><fieldset> <input type="text" name="s" id="s" value="" placeholder="Search the site"  /> <button id="search-image" class="sbutton" type="submit" value=""> <i class="fa fa-search"></i> </button></fieldset></form></div><div id="text-9" class="widget widget_text"><div class="textwidget"><a href="http://www.androidhive.info/reviews"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://api.androidhive.info/tmp/reviews_banner.jpg"/><noscript><img src="http://api.androidhive.info/tmp/reviews_banner.jpg"/></noscript></a></div></div><div id="text-6" class="widget widget_text"><h3 class="widget-title">WEâRE SOCIAL</h3><div class="textwidget"><div class="fb-page"
data-href="https://www.facebook.com/AndroidHive/"
data-width="340"
data-hide-cover="false"
data-show-facepile="true"></div></div></div><div id="text-8" class="widget widget_text"><div class="textwidget"><div class="tve-leads-shortcode tve-tl-anim tl-anim-instant tve-leads-track-shortcode_39260"><div class="tl-style" id="tve_36_set" data-state="6"><div class="tve-leads-conversion-object" data-tl-type="shortcode_39260"><div class="tve_flt"><div class="thrv-leads-form-box tve_no_drag tve_no_icons tve_element_hover thrv_wrapper tve_editor_main_content tve_36_set tve_brdr_solid tve_blue"><h2 class="tve_p_center" style="font-size: 17px;">Subscribe to Newsletter</h2><p class="tve_p_center" style="font-size: 14px;">Join our 746,498 subscribers and get access to the latest android tutorials, freebies, scripts and much more!</p><div class="thrv_wrapper thrv_lead_generation tve_clearfix tve_red tve_11 thrv_lead_generation_vertical" data-tve-style="1" data-tve-version="1" data-inputs-count="11" data-connection="api"><input type="hidden" class="tve-lg-err-msg" value="{&quot;email&quot;:&quot;Please enter a valid email address&quot;,&quot;phone&quot;:&quot;Please enter a valid phone number&quot;,&quot;required&quot;:&quot;Highlighted fields are required&quot;}"><div class="thrv_lead_generation_code" style="display: none;"></div><div class="thrv_lead_generation_container tve_clearfix"><form action="#" method="post"><input type="hidden" class="tve-f-a-hidden" value="#"><div class="tve_lead_generated_inputs_container tve_clearfix"><div class="tve_lead_fields_overlay"></div><div class="tve_lg_input_container tve_lg_input tve_lg_2"><input type="email" data-field="email" data-required="1" data-validation="email" name="email" placeholder="Email" data-placeholder="Email" style="padding-right: 20px;"></div><input id="__tcb_lg_fc" type="hidden" name="__tcb_lg_fc" value="YToxOntzOjU6InNlbmR5IjtzOjI0OiJTcHMzNzYzaEwweTVrbnZHS2xIVjB4QnciO30="><input id="_asset_group" type="hidden" name="_asset_group" value=""><input id="_asset_option" type="hidden" name="_asset_option" value=""><input id="_back_url" type="hidden" name="_back_url" value="http://www.androidhive.info/subscription-successful/"><input id="_submit_option" type="hidden" name="_submit_option" value="redirect"><input id="_use_captcha" type="hidden" name="_use_captcha" value=""><input id="_captcha_theme" type="hidden" name="_captcha_theme" value="light"><input id="_captcha_type" type="hidden" name="_captcha_type" value="image"><input id="_captcha_size" type="hidden" name="_captcha_size" value="normal"><div style="display: none"></div><div class="tve_lg_input_container tve_submit_container tve_lg_submit tve_lg_2" tve-data-style="1"><button type="Submit">Sign Up</button></div></div></form></div></div><p class="tve_p_center" style="font-size: 14px;">We strictly care about your privacy!</p></div></div></div></div></div></div></div><div id="views-2" class="widget widget_views"><h3 class="widget-title">POPULAR ANDROID TUTORIALS</h3><ul><li class="postviews"><a href="http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/"  title="Android SQLite Database Tutorial">Android SQLite Database Tutorial - 1,451,466 views</a></li><li class="postviews"><a href="http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/"  title="How to connect Android with PHP, MySQL">How to connect Android with PHP, MySQL - 1,434,222 views</a></li><li class="postviews"><a href="http://www.androidhive.info/2012/01/android-json-parsing-tutorial/"  title="Android JSON Parsing Tutorial">Android JSON Parsing Tutorial - 1,283,625 views</a></li><li class="postviews"><a href="http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/"  title="Android Push Notifications using Google Cloud Messaging (GCM), PHP and MySQL">Android Push Notifications using Google Cloud Messaging (GCM), PHP and MySQL - 1,215,920 views</a></li><li class="postviews"><a href="http://www.androidhive.info/2013/11/android-sliding-menu-using-navigation-drawer/"  title="Android Sliding Menu using Navigation Drawer">Android Sliding Menu using Navigation Drawer - 1,121,008 views</a></li><li class="postviews"><a href="http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/"  title="Android Custom ListView with Image and Text">Android Custom ListView with Image and Text - 988,385 views</a></li><li class="postviews"><a href="http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/"  title="Android Login and Registration with PHP, MySQL and SQLite">Android Login and Registration with PHP, MySQL and SQLite - 986,913 views</a></li><li class="postviews"><a href="http://www.androidhive.info/2012/07/android-gps-location-manager-tutorial/"  title="Android GPS, Location Manager Tutorial">Android GPS, Location Manager Tutorial - 754,124 views</a></li><li class="postviews"><a href="http://www.androidhive.info/2013/10/android-tab-layout-with-swipeable-views-1/"  title="Android Tab Layout with Swipeable Views">Android Tab Layout with Swipeable Views - 702,932 views</a></li><li class="postviews"><a href="http://www.androidhive.info/2013/08/android-working-with-google-maps-v2/"  title="Android working with Google Maps V2">Android working with Google Maps V2 - 623,736 views</a></li></ul></div></aside></div> <footer id="site-footer" role="contentinfo" itemscope itemtype="http://schema.org/WPFooter"><div class="container"><div class="footer-widgets first-footer-widgets widgets-num-3"><div class="f-widget f-widget-1"><div id="nav_menu-2" class="widget widget_nav_menu"><h3 class="widget-title">QUICK CONTACT</h3><div class="menu-quick-contact-container"><ul id="menu-quick-contact" class="menu"><li id="menu-item-39273" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-39273"><a href="http://www.androidhive.info/advertise-with-us/">Advertise with us</a></li><li id="menu-item-39244" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-39244"><a href="http://www.androidhive.info/privacy-policy/">Privacy Policy</a></li><li id="menu-item-39245" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-39245"><a href="http://www.androidhive.info/terms-of-service/">Terms of Service</a></li><li id="menu-item-39266" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-39266"><a href="http://www.androidhive.info/sitemap/">Sitemap</a></li></ul></div></div></div><div class="f-widget f-widget-2"></div><div class="f-widget last f-widget-3"><div id="text-7" class="widget widget_text"><h3 class="widget-title">ABOUT ANDROIDHIVE</h3><div class="textwidget">AndroidHive is beginner's paradise for android tutorials, tips & tricks, games, app reviews, hacks and super cool advanced topics.</div></div></div></div><div class="copyrights"><div class="row" id="copyright-note"> <span>Copyright &copy; 2016 Droid5 Informatics Pvt Ltd.</span><div class="to-top"></div></div></div></div> </footer></div><div id="fb-root"></div> <script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&version=v2.6";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> <script id="dsq-count-scr" src="//androidhive.disqus.com/count.js" async></script> <script>/**************************************************************/
/*AM22 Named Function to load Disqus - START*/
jQuery(document).ready(function(){
var disqus_identifier = window.location.url; //Use current page URL as Disqus_URL_Identifier. You can change it as per your requirement.
var ds_loaded = false; //To track loading only once on a page.
function loadDisqus()
{
    var disqus_div = jQuery("#disqus_thread"); //The ID of the Disqus DIV tag
    var top = disqus_div.offset().top;
    var disqus_data = disqus_div.data();
    if ( !ds_loaded && jQuery(window).scrollTop() + jQuery(window).height() > top ) 
    {
        ds_loaded = true;
        for (var key in disqus_data) 
        {
            if (key.substr(0,6) == 'disqus') 
            {
                window['disqus_' + key.replace('disqus','').toLowerCase()] = disqus_data[key];
            }
        }
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = 'http://' + window.disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }  
}
/*AM22 Named Function to load Disqus - END*/
/*AM22 Disqus lazy load - START*/
jQuery(function () 
{
    var disqus_div = jQuery("#disqus_thread");
    if (disqus_div.size() > 0) 
    {
        jQuery(window).scroll(loadDisqus);      
    }  
}
);
/*AM22 Disqus lazy load - END*/
});</script><div id="tve_notification_box"></div><script type='text/javascript' src='http://www.androidhive.info/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.9b'></script> <script type='text/javascript' src='http://www.androidhive.info/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.9b'></script> <script type='text/javascript' src='http://www.androidhive.info/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushSql.js?ver=3.0.9b'></script> <script type='text/javascript' src='http://www.androidhive.info/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPhp.js?ver=3.0.9b'></script> <script type='text/javascript' src='http://www.androidhive.info/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJava.js?ver=3.0.9b'></script> <script type='text/javascript'>(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://www.androidhive.info/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://www.androidhive.info/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();</script> <link rel='stylesheet' id='tve-leads-font-9062833c9baa57b288ba47a7993dc1c0-css'  href='//fonts.googleapis.com/css?family=Open+Sans%3A400%2C300%2C600%2C700' type='text/css' media='all' /> <script type='text/javascript'>/*  */
var viewsCacheL10n = {"admin_ajax_url":"http:\/\/www.androidhive.info\/wp-admin\/admin-ajax.php","post_id":"2171"};
/*  */</script> <script type='text/javascript' src='http://www.androidhive.info/wp-content/plugins/wp-postviews/postviews-cache.js?ver=1.68'></script> <script type='text/javascript' src='http://www.androidhive.info/wp-includes/js/comment-reply.min.js'></script> <script type='text/javascript'>/*  */
var tve_dash_front = {"ajaxurl":"http:\/\/www.androidhive.info\/wp-admin\/admin-ajax.php"};
/*  */</script> <script type='text/javascript' src='http://www.androidhive.info/wp-content/plugins/thrive-leads/thrive-dashboard/js/dist/frontend.min.js?ver=1.0.10'></script> <script type='text/javascript' src='http://www.androidhive.info/wp-includes/js/wp-embed.min.js'></script> <script type='text/javascript'>/*  */
var tve_frontend_options = {"is_editor_page":"","page_events":[],"is_single":"1","ajaxurl":"http:\/\/www.androidhive.info\/wp-admin\/admin-ajax.php","social_fb_app_id":""};
/*  */</script> <script type='text/javascript' src='http://www.androidhive.info/wp-content/plugins/thrive-leads/tcb/editor/js/thrive_content_builder_frontend.min.js?ver=1.200.5'></script> <script type='text/javascript' src='//www.androidhive.info/wp-content/plugins/thrive-leads/js/frontend.min.js?ver=1.75'></script> <script type="text/javascript">/**/var TL_Const={"security":"62e7a1ef75","ajax_url":"\/\/www.androidhive.info\/wp-admin\/admin-ajax.php","forms":{"shortcode_39260":{"_key":"6","trigger":"page_load","trigger_config":{},"form_type_id":"39260","main_group_id":"39260","active_test_id":""}},"action_conversion":"tve_leads_ajax_conversion","action_impression":"tve_leads_ajax_impression","ajax_load":0,"shortcode_ids":["39260"],"custom_post_data":{"get_data":{"q":"\/2012\/10\/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql\/"},"http_referrer":"https:\/\/www.google.com.br\/"},"current_screen":{"screen_type":4,"screen_id":2171},"ignored_fields":["email","_captcha_size","_captcha_theme","_captcha_type","_submit_option","_use_captcha","g-recaptcha-response","__tcb_lg_fc","_back_url","_submit_option","url","_asset_group","_asset_option","mailchimp_optin"]}/* */</script><script type="text/javascript">var TL_Front = TL_Front || {}; TL_Front.impressions_data = TL_Front.impressions_data || {};TL_Front.impressions_data.shortcode_39260 = {"group_id":"39260","form_type_id":"39260","variation_key":"6","active_test_id":null,"output_js":true};</script><script type="text/javascript">(function ($) {
	$(function () {
		var event_data = {"form_id":"tve-leads-track-shortcode_39260","form_type":"shortcode"};
		event_data.source = 'page_load';
		setTimeout(function () {
			ThriveGlobal.$j(TL_Front).trigger('showform.thriveleads', event_data);
			}, 200);
		});
	})
(ThriveGlobal.$j);</script></body></html>
<!-- This website is like a Rocket, isn't it ? Performance optimized by WP Rocket. Learn more: http://wp-rocket.me - Debug: cached@1470854803 -->
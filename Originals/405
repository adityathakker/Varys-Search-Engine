<!DOCTYPE html><html class="no-js" lang="en-US" prefix="og: http://ogp.me/ns#"><head itemscope itemtype="http://schema.org/WebSite"><!--[if IE]><![endif]--><link rel="dns-prefetch" href="//fonts.googleapis.com" /><link rel="stylesheet" href="http://www.androidhive.info/wp-content/cache/min/1/911656fa177846aec61d653c98674a7b.css" data-minify="1"/><link rel="stylesheet" href="http://www.androidhive.info/wp-content/cache/min/1/eb9f2973d1f94378cd51f247183dd68f.css" data-minify="1"/><link rel="stylesheet" href="http://www.androidhive.info/wp-content/cache/min/1/ed23373be97de98fd59b5c1ee55222f2.css" data-minify="1"/><meta charset="UTF-8"> <!--[if IE ]><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <![endif]--><link rel="profile" href="http://gmpg.org/xfn/11" /><link rel="icon" href="http://test.androidhive.info/wp-content/uploads/2016/04/favicon.png" type="image/x-icon" /><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta itemprop="name" content="androidhive" /><meta itemprop="url" content="http://www.androidhive.info" /><meta itemprop="creator accountablePerson" content=" " /><link rel="pingback" href="http://www.androidhive.info/xmlrpc.php" /><title>Android Building Realtime Chat App using GCM, PHP &amp; MySQL - Part 1</title><style type="text/css">.thrive-adminbar-icon {
				background: url('http://www.androidhive.info/wp-content/plugins/thrive-leads/tcb/editor/css/images/tcb-close-icon.png') no-repeat 0px 0px;
				padding-left: 25px !important;
				width: 20px !important;
				height: 20px !important;
			}</style> <script type="text/javascript">document.documentElement.className = document.documentElement.className.replace( /\bno-js\b/,'js' );</script> <meta name="description" content="Android tutorial about integrating Google Cloud Messaging 3.0. Explained with an example of realtime chat app using PHP &amp; MySQL including android app and an admin panel."/><meta name="robots" content="noodp"/><link rel="canonical" href="http://www.androidhive.info/2016/02/android-push-notifications-using-gcm-php-mysql-realtime-chat-app-part-1/" /><meta property="og:locale" content="en_US" /><meta property="og:type" content="article" /><meta property="og:title" content="Android Building Realtime Chat App using GCM, PHP &amp; MySQL - Part 1" /><meta property="og:description" content="Android tutorial about integrating Google Cloud Messaging 3.0. Explained with an example of realtime chat app using PHP &amp; MySQL including android app and an admin panel." /><meta property="og:url" content="http://www.androidhive.info/2016/02/android-push-notifications-using-gcm-php-mysql-realtime-chat-app-part-1/" /><meta property="og:site_name" content="androidhive" /><meta property="article:section" content="GCM" /><meta property="article:published_time" content="2016-02-09T07:17:48+00:00" /><meta property="article:modified_time" content="2016-03-02T17:06:13+00:00" /><meta property="og:updated_time" content="2016-03-02T17:06:13+00:00" /><meta property="og:image" content="http://www.androidhive.info/wp-content/uploads/2016/02/android-realtime-chat-app-using-gcm-php-mysql-part-1.png" /><meta property="og:image:width" content="720" /><meta property="og:image:height" content="316" /><meta name="twitter:card" content="summary" /><meta name="twitter:description" content="Android tutorial about integrating Google Cloud Messaging 3.0. Explained with an example of realtime chat app using PHP &amp; MySQL including android app and an admin panel." /><meta name="twitter:title" content="Android Building Realtime Chat App using GCM, PHP &amp; MySQL - Part 1" /><meta name="twitter:image" content="http://www.androidhive.info/wp-content/uploads/2016/02/android-realtime-chat-app-using-gcm-php-mysql-part-1.png" /><link rel="alternate" type="application/rss+xml" title="androidhive &raquo; Feed" href="http://www.androidhive.info/feed/" /><link rel="alternate" type="application/rss+xml" title="androidhive &raquo; Comments Feed" href="http://www.androidhive.info/comments/feed/" /> <script type="text/javascript">window._wpemojiSettings = {"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/www.androidhive.info\/wp-includes\/js\/wp-emoji-release.min.js"}};
			!function(a,b,c){function d(a){var c,d=b.createElement("canvas"),e=d.getContext&&d.getContext("2d");return e&&e.fillText?(e.textBaseline="top",e.font="600 32px Arial","flag"===a?(e.fillText(String.fromCharCode(55356,56806,55356,56826),0,0),d.toDataURL().length>3e3):"diversity"===a?(e.fillText(String.fromCharCode(55356,57221),0,0),c=e.getImageData(16,16,1,1).data.toString(),e.fillText(String.fromCharCode(55356,57221,55356,57343),0,0),c!==e.getImageData(16,16,1,1).data.toString()):("simple"===a?e.fillText(String.fromCharCode(55357,56835),0,0):e.fillText(String.fromCharCode(55356,57135),0,0),0!==e.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);</script> <style type="text/css">img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}</style><style id='stylesheet-inline-css' type='text/css'>body {background-color:#ffffff; }
		body {background-image: url( http://www.androidhive.info/wp-content/themes/androidhive-theme/images/nobg.png );}

        .header-social a:hover, header .breadcrumb > div i:hover, header .breadcrumb > div a:hover, .breadcrumb > div a:hover, .post-info a, .latestPost .title a:hover, #site-footer .toggle-menu .toggle-caret .fa:hover, #primary-navigation .sub-menu a:hover, .latestPost .title a:hover, ul.ajax-search-results li a:hover, .sidebar .ajax-search-meta a, .breadcrumb > div i, .single .tags a, .postauthor h5 a:hover, .sidebar a, .comment-meta a, .trending-stories .latestPost .title:hover, .postauthor h5, .copyrights a, .single_post a, .textwidget a, .pnavigation2 a, #sidebar a:hover, .copyrights a:hover, #site-footer .widget li a:hover, .related-posts a:hover, .reply a, .title a:hover, .post-info a:hover, .comm, #tabber .inside li a:hover, .readMore a:hover, .fn a, a, a:hover { color: #000000; }

        .latestPost-categories ul li:hover a, .footer-widgets h3, .reply a:hover, #primary-navigation .sub-menu a:hover, #primary-navigation .sub-menu li.current-menu-item a { color: #000000 !important; }

        .latestPost-news .latestPost { border-top: 2px solid #000000; }

        
        .navigation.mobile-menu-wrapper { background: #000000 !important; }

        #header, .pace .pace-progress, #mobile-menu-wrapper ul li a:hover, .widget h3:before, .featured-category-title:before, .widget .wpt_widget_content .tab_title.selected a, #move-to-top, #load-posts, .featured-videos h4:after, .related-posts h4:after, .postauthor h4:after, #comments h4:after, #commentsAdd h4:after, .contact-form input[type='submit'], #commentform input#submit:hover, .contact-form input[type='submit']:hover, #primary-navigation li a:hover, .pagination a:hover, .pagination ul, .latestPost-review-wrapper, a#pull, #commentform input#submit, .contactform #submit, #move-to-top:hover, .navigation ul .current-menu-item > a, .navigation ul li:hover, .pagination a, #tabber ul.tabs li a.selected, .tagcloud a:hover, .latestPost .review-type-circle.review-total-only, .latestPost .review-type-circle.wp-review-show-total, .single .pagination > .current, .bypostauthor .comment-author .fn:after { background-color:#000000; color: #fff!important; }

		.owl-prev, .owl-next { background-color:#000000!important; }

        #site-footer { background: #EAEAEA; }
		
		.shareit { top: 282px; left: 0; margin: 0; width: 90px; position: fixed; padding: 5px; border:none; border-right: 0;}
		.share-item {margin: 2px;}
		
		.bypostauthor { background: none; }
        .bypostauthor > div .comment-author .fn:after { content: "Author"; position: relative; padding: 2px 10px; margin: 0 10px; color: #FFF; font-size: 13px; line-height: 1; font-weight: normal; border-radius: 3px; }</style> <script type='text/javascript' src='http://www.androidhive.info/wp-includes/js/jquery/jquery.js?ver=1.11.3'></script> <script type='text/javascript' src='http://www.androidhive.info/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script> <script type='text/javascript' src='http://www.androidhive.info/wp-content/plugins/thrive-leads/tcb/editor/js/compat.min.js?ver=1.200.5'></script> <script type='text/javascript'>/*  */
var mts_customscript = {"responsive":"1","nav_menu":"primary"};
/*  */</script> <script type='text/javascript' src='http://www.androidhive.info/wp-content/themes/androidhive-theme/js/customscript.js'></script> <script type='text/javascript'>/*  */
var tickeropts = {"rtl_support":"0"};
/*  */</script> <script type='text/javascript' src='http://www.androidhive.info/wp-content/themes/androidhive-theme/js/jquery.webticker.js'></script> <link rel='https://api.w.org/' href='http://www.androidhive.info/wp-json/' /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.androidhive.info/xmlrpc.php?rsd" /><link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.androidhive.info/wp-includes/wlwmanifest.xml" /><link rel='shortlink' href='http://www.androidhive.info/?p=38919' /><link rel="alternate" type="application/json+oembed" href="http://www.androidhive.info/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.androidhive.info%2F2016%2F02%2Fandroid-push-notifications-using-gcm-php-mysql-realtime-chat-app-part-1%2F" /><link rel="alternate" type="text/xml+oembed" href="http://www.androidhive.info/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.androidhive.info%2F2016%2F02%2Fandroid-push-notifications-using-gcm-php-mysql-realtime-chat-app-part-1%2F&#038;format=xml" /> <script type="text/javascript">window._wp_rp_static_base_url = 'https://wprp.zemanta.com/static/';
	window._wp_rp_wp_ajax_url = "http://www.androidhive.info/wp-admin/admin-ajax.php";
	window._wp_rp_plugin_version = '3.6';
	window._wp_rp_post_id = '38919';
	window._wp_rp_num_rel_posts = '4';
	window._wp_rp_thumbnails = true;
	window._wp_rp_post_title = 'Android+Building+Realtime+Chat+App+using+GCM%2C+PHP+%26+MySQL+-+Part+1';
	window._wp_rp_post_tags = ['push+notifications', 'rest', 'gcm', 'slim', 'google', 'volley', 'json', 'mysql', 'php', 'app', 'panel', 'mysql', 'multi', 'io', 'free', 'server', 'batteri', 'height', 'android', 'api', 'cloud', 'php', 'chat', 'storag'];
	window._wp_rp_promoted_content = true;</script> <script type="text/javascript" src="https://wprp.zemanta.com/static/js/loader.js?version=3.6" async></script> <style type="text/css">.related_post_title {
}
ul.related_post {
}
ul.related_post li {
}
ul.related_post li a {
}
ul.related_post li img {
}</style><link href="//fonts.googleapis.com/css?family=Open+Sans|Merriweather&amp;subset=latin" rel="stylesheet" type="text/css"><style type="text/css">#header h1, #header h2 { font-family: 'Open Sans'; font-weight: ; font-size: 25px; color: #ffffff; }
.menu li, .menu li a { font-family: 'Open Sans'; font-weight: ; font-size: 15px; color: #ffffff; }
.latestPost .title a, .latestPost-news .title, .latestPost .title { font-family: 'Merriweather'; font-weight: ; font-size: 23px; color: #252525; }
.single-title { font-family: 'Merriweather'; font-weight: ; font-size: 35px; color: #252525; }
body { font-family: 'Open Sans'; font-weight: ; font-size: 15px; color: #252525; }
.widget h3, .featured-category-title { font-family: 'Open Sans'; font-weight: ; font-size: 15px; color: #252525; }
#sidebar .widget { font-family: 'Open Sans'; font-weight: ; font-size: 14px; color: #252525; }
.footer-widgets, footer .widget li a { font-family: 'Open Sans'; font-weight: ; font-size: 13px; color: #252525; }
h1 { font-family: 'Merriweather'; font-weight: ; font-size: 35px; color: #252525; }
h2 { font-family: 'Merriweather'; font-weight: ; font-size: 24px; color: #252525; }
h3 { font-family: 'Merriweather'; font-weight: ; font-size: 25px; color: #252525; }
h4 { font-family: 'Merriweather'; font-weight: ; font-size: 20px; color: #252525; }
h5 { font-family: 'Merriweather'; font-weight: ; font-size: 18px; color: #252525; }
h6 { font-family: 'Merriweather'; font-weight: ; font-size: 16px; color: #252525; }</style><style type="text/css" id="syntaxhighlighteranchor"></style> <script data-no-minify="1" data-cfasync="false">(function(w,d){function a(){var b=d.createElement("script");b.async=!0;b.src="http://www.androidhive.info/wp-content/plugins/wp-rocket/inc/front/js/lazyload.1.0.2.min.js";var a=d.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)}w.attachEvent?w.attachEvent("onload",a):w.addEventListener("load",a,!1)})(window,document);</script> <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-24602371-1', 'auto');
  ga('send', 'pageview');</script> </head><body id="blog" class="single single-post postid-38919 single-format-standard main" itemscope itemtype="http://schema.org/WebPage"><div class="main-container"> <header id="site-header" role="banner" itemscope itemtype="http://schema.org/WPHeader"><div class="upper-navigation"><div class="container clearfix"><div class="breadcrumb"><div class="root"><a href="http://www.androidhive.info/"><i class="fa fa-home"></i></a></div><div class="breaking"><ul class="trending-slider"><li><a href="http://www.androidhive.info/2016/05/android-working-with-card-view-and-recycler-view/" title="Android working with Card View and Recycler View">Android working with Card View and Recycler View</a></li><li><a href="http://www.androidhive.info/2016/02/android-push-notifications-using-gcm-php-mysql-realtime-chat-app-part-3/" title="Android Building Realtime Chat App using GCM, PHP &#038; MySQL &#8211; Part 3">Android Building Realtime Chat App using GCM, PHP &#038; MySQL &#8211; Part 3</a></li><li><a href="http://www.androidhive.info/2016/02/android-push-notifications-using-gcm-php-mysql-realtime-chat-app-part-2/" title="Android Building Realtime Chat App using GCM, PHP &#038; MySQL &#8211; Part 2">Android Building Realtime Chat App using GCM, PHP &#038; MySQL &#8211; Part 2</a></li><li><a href="http://www.androidhive.info/2016/02/android-push-notifications-using-gcm-php-mysql-realtime-chat-app-part-1/" title="Android Building Realtime Chat App using GCM, PHP &#038; MySQL &#8211; Part 1">Android Building Realtime Chat App using GCM, PHP &#038; MySQL &#8211; Part 1</a></li><li><a href="http://www.androidhive.info/2015/12/android-material-design-floating-action-button/" title="Android Material Design Floating Action Button">Android Material Design Floating Action Button</a></li><li><a href="http://www.androidhive.info/2015/09/android-material-design-snackbar-example/" title="Android Material Design Snackbar Example">Android Material Design Snackbar Example</a></li><li><a href="http://www.androidhive.info/2015/09/android-material-design-floating-labels-for-edittext/" title="Android Material Design Floating Labels for EditText">Android Material Design Floating Labels for EditText</a></li><li><a href="http://www.androidhive.info/2015/09/android-material-design-working-with-tabs/" title="Android Material Design working with Tabs">Android Material Design working with Tabs</a></li><li><a href="http://www.androidhive.info/2015/06/android-push-notifications-using-parse-com/" title="Android Push Notifications using Parse.com">Android Push Notifications using Parse.com</a></li><li><a href="http://www.androidhive.info/2015/04/android-getting-started-with-material-design/" title="Android Getting Started with Material Design">Android Getting Started with Material Design</a></li></ul></div></div><div class="header-social"> <a rel="nofollow" href="http://www.facebook.com/ravi8x" class="header-facebook"><span class="fa fa-facebook"></span></a> <a rel="nofollow" href="http://www.twitter.com/ravitamada" class="header-twitter"><span class="fa fa-twitter"></span></a> <a rel="nofollow" href="https://plus.google.com/u/0/108738908574182577919/posts" class="header-google-plus"><span class="fa fa-google-plus"></span></a> <a rel="nofollow" href="http://instagram.com/ravitamada" class="header-instagram"><span class="fa fa-instagram"></span></a></div></div></div><div id="header"><div class="container"><div class="logo-wrap"><h1 id="logo" class="image-logo" itemprop="headline"> <a href="http://www.androidhive.info"><img src="http://www.androidhive.info/wp-content/uploads/2016/04/logo-3.png" alt="androidhive"></a></h1></div><div id="primary-navigation" role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement"> <a href="#" id="pull" class="toggle-mobile-menu">Menu</a> <nav class="navigation clearfix mobile-menu-wrapper"><ul id="menu-menu-1" class="menu clearfix"><li id="menu-item-39241" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-39241"><a href="http://download.androidhive.info">Downloads</a></li><li id="menu-item-39242" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-39242"><a href="http://tips.androidhive.info">Tips</a></li><li id="menu-item-39327" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-39327"><a href="http://www.androidhive.info/write-for-us/">Write for Us</a></li></ul> </nav></div></div></div> </header><div id="page" class="single"> <article class="article" itemscope itemtype="http://schema.org/BlogPosting"><meta itemprop="image" content="http://www.androidhive.info/wp-content/uploads/2016/02/android-realtime-chat-app-using-gcm-php-mysql-part-1.png" /><div id="content_box" ><div id="post-38919" class="g post post-38919 type-post status-publish format-standard has-post-thumbnail hentry category-gcm category-google category-json category-mysql category-php category-push-notifications category-rest category-slim category-volley has_thumb"><div class="breadcrumb" xmlns:v="http://rdf.data-vocabulary.org/#"><div typeof="v:Breadcrumb" class="root"><a rel="v:url" property="v:title" href="http://www.androidhive.info" rel="nofollow">Home</a></div><div><i class="fa fa-angle-right"></i></div><div typeof="v:Breadcrumb"><a href="http://www.androidhive.info/category/gcm/" rel="v:url" property="v:title">GCM</a></div><div><i class="fa fa-angle-right"></i></div><div><span>Android Building Realtime Chat App using GCM, PHP &#038; MySQL &#8211; Part 1</span></div></div><div class="single_post"> <header><h1 class="title single-title entry-title" itemprop="headline">Android Building Realtime Chat App using GCM, PHP &#038; MySQL &#8211; Part 1</h1><div class="post-info"> <span class="theauthor">by <span itemprop="author"><a rel="nofollow" href="http://www.androidhive.info/author/admin/" title="Posts by Ravi Tamada" rel="author">Ravi Tamada</a><span class="divider1">/</span></span></span> <span class="thetime updated"><span itemprop="datePublished">February 9, 2016<span class="divider1">/</span></span></span> <span class="thecomment"><i class="fa fa-comments"></i> <a href="http://www.androidhive.info/2016/02/android-push-notifications-using-gcm-php-mysql-realtime-chat-app-part-1/#disqus_thread">Comments</a></span></div> </header><div class="post-single-content box mark-links entry-content"><div class="thecontent" itemprop="articleBody"><div style="float:left;margin:10px 10px 10px 0;"> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>  <ins class="adsbygoogle"
style="display:inline-block;width:336px;height:280px"
data-ad-client="ca-pub-9207768510467156"
data-ad-slot="1410361821"></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script> </div><p><a rel="nofollow" href="https://developers.google.com/cloud-messaging/" target="_blank">Google Cloud Messaging</a> allows you send lightweight messages from the backend server to all the devices whenever there is new data available. This saves lot of userâs battery by avoiding poll request to server for new data. Using GCM you can build powerful multi platform (iOS, Android &#038; Web) apps like real time chat, news feed, cloud storage and lot more. On top of everything, GCM is completely free and there are no limitations.</p><p>As <a rel="nofollow" href="http://parse.com" target="_blank">parse.com</a> announced their <a rel="nofollow" href="http://blog.parse.com/announcements/moving-on/" target="_blank">shutdown</a> recently, GCM is the only best option even though it won&#8217;t comes with an admin interface. But don&#8217;t worry, we&#8217;ll build a simple admin panel in this article.</p><div style="display:none"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2016/02/android-google-cloud-messaging-realtime-chat-app.png" alt="android realtime chat app using gcm php mysql" width="720" height="541" class="alignnone size-full wp-image-39105" srcset="http://www.androidhive.info/wp-content/uploads/2016/02/android-google-cloud-messaging-realtime-chat-app-300x225.png 300w, http://www.androidhive.info/wp-content/uploads/2016/02/android-google-cloud-messaging-realtime-chat-app.png 720w" sizes="(max-width: 720px) 100vw, 720px" /><noscript><img src="http://www.androidhive.info/wp-content/uploads/2016/02/android-google-cloud-messaging-realtime-chat-app.png" alt="android realtime chat app using gcm php mysql" width="720" height="541" class="alignnone size-full wp-image-39105" srcset="http://www.androidhive.info/wp-content/uploads/2016/02/android-google-cloud-messaging-realtime-chat-app-300x225.png 300w, http://www.androidhive.info/wp-content/uploads/2016/02/android-google-cloud-messaging-realtime-chat-app.png 720w" sizes="(max-width: 720px) 100vw, 720px" /></noscript></div><div class="clear"></div><div class="download_code"><a href="http://download.androidhive.info/download?code=ezIaenBbBvpi9mHPgfJORAf29XiwLMoBYda5USk3IGtj6%2Faczubg6fCH0vmiw9zHaMdsR5SffC%2Fre3SW9U7yMBKw6UcfzOxvM9abmgXdKVv1IqCCx0krVRKXw%3D%3DV49ttmJZCuX14D55E1n1NQdeFCYyRRMEhlJ" target="_blank">DOWNLOAD CODE</a></div><div class="download_code"><a href="http://demo.androidhive.info/gcm_chat/" target="_blank">LIVE DEMO</a></div><div class="yt_video"> <label>VIDEO DEMO</label><br /> <iframe src="http://www.youtube.com/embed/jGuv7QOwYSQ" frameborder="0" allowfullscreen="" style="width: 719px; height: 444.7265625px;"></iframe></div><p></p><p>As this article is pretty lengthy, I have divided it into <strong>3 parts</strong>. Each part covers a unique part in building the final realtime chat app.</p><p><a href="http://www.androidhive.info/2016/02/android-push-notifications-using-gcm-php-mysql-realtime-chat-app-part-1" target="_blank">Part 1</a>: Covers building the REST API for chat app including the GCM server app.</p><p><a href="http://www.androidhive.info/2016/02/android-push-notifications-using-gcm-php-mysql-realtime-chat-app-part-2" target="_blank">Part 2</a>: Explains integrating GCM into your android app including a test message.</p><p><a href="http://www.androidhive.info/2016/02/android-push-notifications-using-gcm-php-mysql-realtime-chat-app-part-3" target="_blank">Part 3</a>: Building Simple Realtime Chat App.</p><h2>1. Google Cloud Messaging</h2><p>Typically GCM implementation involves three components. Google cloud messaging server, the app server and the client app. We should take care of writing the app server and the client app. In order to make calls from the app server to GCM server, you can follow <a rel="nofollow" href="https://developers.google.com/cloud-messaging/http" target="_blank">HTTP</a> or <a rel="nofollow" href="https://developers.google.com/cloud-messaging/ccs" target="_blank">XMPP</a> protocol. HTTP supports downstream (gcm to client) messages only. XMPP supports both downstream and upstream  (device to gcm, then from gcm to server) messages.</p><p>Below is the pictorial representation of the overall architecture.</p><div class="image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2016/02/android-google-cloud-messaging-architecture.png" alt="android-google-cloud-messaging-architecture" width="719" height="519" class="alignnone size-full wp-image-38965" srcset="http://www.androidhive.info/wp-content/uploads/2016/02/android-google-cloud-messaging-architecture-300x217.png 300w, http://www.androidhive.info/wp-content/uploads/2016/02/android-google-cloud-messaging-architecture.png 719w" sizes="(max-width: 719px) 100vw, 719px" /><noscript><img src="http://www.androidhive.info/wp-content/uploads/2016/02/android-google-cloud-messaging-architecture.png" alt="android-google-cloud-messaging-architecture" width="719" height="519" class="alignnone size-full wp-image-38965" srcset="http://www.androidhive.info/wp-content/uploads/2016/02/android-google-cloud-messaging-architecture-300x217.png 300w, http://www.androidhive.info/wp-content/uploads/2016/02/android-google-cloud-messaging-architecture.png 719w" sizes="(max-width: 719px) 100vw, 719px" /></noscript></div><p><strong>1</strong>. First the app connects to GCM server and register itself.</p><p><strong>2</strong>. Upon successful registration, GCM issues gcm <strong>registration token</strong> to device. This registration token uniquely identifies each device.</p><p><strong>3</strong>. The device sends the registration token to our server to store it in <strong>MySQL</strong>.</p><p><strong>4</strong>. Whenever app server wants to send push notification, it sends a request to GCM server sending the <strong>push message</strong> along with the <strong>registration token</strong>.</p><p><strong>5</strong>. GCM server identifies the device using the registration token and initiates the push message.</p><p><strong>6</strong>. The device receives the <strong>push messages</strong> and further action takes place.</p><p></p><h2>2. Obtaining Google API Key</h2><p>Google API key is necessary to interact with GCM server. GCM uses this key to identify your server app. Follow the below steps to obtain your API key. Note that the developer console interface is changing more frequently. So, the below steps may vary in future.</p><p><strong>1</strong>. Goto Google <a rel="nofollow" href="https://console.developers.google.com/project" target="_blank">developers console</a> and create a new app. If you have already created one, select the app.</p><p><strong>2</strong>. Give a name to your new project. Once the project is created, goto project&#8217;s dashboard and click on <strong>Use Google APIs</strong></p><p><strong>3</strong>. Under <strong>Mobile APIs</strong>, click on <strong>Cloud Messaging for Android</strong> and enable the API by clicking on top <strong>enable API</strong> button.</p><p><strong>4</strong>. Once enabled, click on <strong>Credentials</strong> on the left. You will be asked to create <strong>new credentials</strong> by showing multiple options. Choose <strong>API Key</strong> and then <strong>Server Key</strong>.</p><p><strong>5</strong>. After choosing Server Key, your API key will be displayed on the dashboard. Note down the <strong>API key</strong> as we need to use it in our PHP project.</p><div class="yt_video"> <iframe src="http://www.youtube.com/embed/gMycphJ_PRI" frameborder="0" allowfullscreen="" style="width: 719px; height: 444.7265625px;"></iframe></div><p></p><h2>3. Building Simple Realtime Chat App</h2><p>In this article, we are going to learn how to create a simple realtime chat app by using Android, GCM, PHP, MySQL, HTML &#038; CSS. We use HTML &#038; CSS to build the admin panel for the server app.</p><p>Below are the screens of the android app.</p><div class="image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2016/02/android-simple-chat-app-using-gcm-php-mysql.png" alt="android-simple-chat-app-using-gcm-php-mysql" width="719" height="609" class="alignnone size-full wp-image-38967" srcset="http://www.androidhive.info/wp-content/uploads/2016/02/android-simple-chat-app-using-gcm-php-mysql-300x254.png 300w, http://www.androidhive.info/wp-content/uploads/2016/02/android-simple-chat-app-using-gcm-php-mysql.png 719w" sizes="(max-width: 719px) 100vw, 719px" /><noscript><img src="http://www.androidhive.info/wp-content/uploads/2016/02/android-simple-chat-app-using-gcm-php-mysql.png" alt="android-simple-chat-app-using-gcm-php-mysql" width="719" height="609" class="alignnone size-full wp-image-38967" srcset="http://www.androidhive.info/wp-content/uploads/2016/02/android-simple-chat-app-using-gcm-php-mysql-300x254.png 300w, http://www.androidhive.info/wp-content/uploads/2016/02/android-simple-chat-app-using-gcm-php-mysql.png 719w" sizes="(max-width: 719px) 100vw, 719px" /></noscript></div></p><p>And the server app comes with the option of choosing the user(s) / topic and send the push notification.</p><div class="image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2016/02/android-php-mysql-gcm-chat-app-admin-panel.png" alt="android-php-mysql-gcm-chat-app-admin-panel" width="719" height="900" class="alignnone size-full wp-image-38981" srcset="http://www.androidhive.info/wp-content/uploads/2016/02/android-php-mysql-gcm-chat-app-admin-panel-240x300.png 240w, http://www.androidhive.info/wp-content/uploads/2016/02/android-php-mysql-gcm-chat-app-admin-panel.png 719w" sizes="(max-width: 719px) 100vw, 719px" /><noscript><img src="http://www.androidhive.info/wp-content/uploads/2016/02/android-php-mysql-gcm-chat-app-admin-panel.png" alt="android-php-mysql-gcm-chat-app-admin-panel" width="719" height="900" class="alignnone size-full wp-image-38981" srcset="http://www.androidhive.info/wp-content/uploads/2016/02/android-php-mysql-gcm-chat-app-admin-panel-240x300.png 240w, http://www.androidhive.info/wp-content/uploads/2016/02/android-php-mysql-gcm-chat-app-admin-panel.png 719w" sizes="(max-width: 719px) 100vw, 719px" /></noscript></div></p><p>This part of the article involves building the server app including designing the MySQL database, REST API for mobile app and an admin panel to send push notifications. I am using <a rel="nofollow" href="https://netbeans.org/downloads/" target="_blank">Netbeans</a> IDE to develop the PHP code and <a rel="nofollow" href="http://www.wampserver.com/en/" target="_blank">WAMP</a> / <a rel="nofollow" href="https://www.mamp.info/en/downloads/" target="_blank">MAMP</a> server to create the php, mysql environment.</p><p>Now let&#8217;s start designing the database first.<br /></p><h2>4. Designing MySQL Database</h2><p>For this app we need only three tables. users, chat rooms and messages.</p><p><em>users</em> &#8211; This table holds the user information like <strong>name</strong>, <strong>email</strong> and other profile information along with <strong>gcm registration id</strong>.</p><p><em>chat_rooms</em> &#8211; Contains the chat room information.</p><p><em>messages</em> &#8211; Contains the messages sent in the chat rooms.</p><div class="image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2016/02/android-simple-chat-app-mysql-database-1.png" alt="android-simple-chat-app-mysql-database" width="719" height="428" class="alignnone size-full wp-image-38938" srcset="http://www.androidhive.info/wp-content/uploads/2016/02/android-simple-chat-app-mysql-database-1-300x179.png 300w, http://www.androidhive.info/wp-content/uploads/2016/02/android-simple-chat-app-mysql-database-1.png 719w" sizes="(max-width: 719px) 100vw, 719px" /><noscript><img src="http://www.androidhive.info/wp-content/uploads/2016/02/android-simple-chat-app-mysql-database-1.png" alt="android-simple-chat-app-mysql-database" width="719" height="428" class="alignnone size-full wp-image-38938" srcset="http://www.androidhive.info/wp-content/uploads/2016/02/android-simple-chat-app-mysql-database-1-300x179.png 300w, http://www.androidhive.info/wp-content/uploads/2016/02/android-simple-chat-app-mysql-database-1.png 719w" sizes="(max-width: 719px) 100vw, 719px" /></noscript></div><p>Open phpmyadmin and execute the below sql query to create the required database and tables.</p><pre class="brush: sql; title: ; notranslate" title="">
CREATE DATABASE gcm_chat;

CREATE TABLE `chat_rooms` (
  `chat_room_id` int(11) NOT NULL,
  `name` varchar(100) NOT NULL,
  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1;

CREATE TABLE `messages` (
  `message_id` int(11) NOT NULL,
  `chat_room_id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  `message` text NOT NULL,
  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE `users` (
  `user_id` int(11) NOT NULL,
  `name` varchar(255) NOT NULL,
  `email` varchar(255) NOT NULL,
  `gcm_registration_id` text NOT NULL,
  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

ALTER TABLE `chat_rooms`
  ADD PRIMARY KEY (`chat_room_id`);

ALTER TABLE `messages`
  ADD PRIMARY KEY (`message_id`),
  ADD KEY `chat_room_id` (`chat_room_id`),
  ADD KEY `user_id` (`user_id`),
  ADD KEY `chat_room_id_2` (`chat_room_id`);

ALTER TABLE `users`
  ADD PRIMARY KEY (`user_id`),
  ADD UNIQUE KEY `email` (`email`);

ALTER TABLE `messages`
  ADD CONSTRAINT `messages_ibfk_3` FOREIGN KEY (`chat_room_id`) REFERENCES `chat_rooms` (`chat_room_id`),
  ADD CONSTRAINT `messages_ibfk_2` FOREIGN KEY (`user_id`) REFERENCES `users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE;
</pre><h2>5. Creating PHP REST API</h2><p>I am using <a rel="nofollow" href="http://www.slimframework.com/" target="_blank">Slim</a> framework to create the REST endpoints. If you are not aware of PHP Slim, refer my previous tutorial <a href="http://www.androidhive.info/2014/01/how-to-create-rest-api-for-android-app-using-php-slim-and-mysql-day-12-2/" target="_blank">REST API for Android app using PHP, Slim and MySQL</a> to understand how easily you can create the REST API endpoints for your android app.</p><p>Below is the project structure of the PHP app. You have to make sure that you are following same structure while following the further steps.</p><div class="image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2016/02/gcm-simple-chat-app-php-mysql-project.png" alt="gcm-simple-chat-app-php-mysql-project" width="719" height="428" class="alignnone size-full wp-image-38941" srcset="http://www.androidhive.info/wp-content/uploads/2016/02/gcm-simple-chat-app-php-mysql-project-300x179.png 300w, http://www.androidhive.info/wp-content/uploads/2016/02/gcm-simple-chat-app-php-mysql-project.png 719w" sizes="(max-width: 719px) 100vw, 719px" /><noscript><img src="http://www.androidhive.info/wp-content/uploads/2016/02/gcm-simple-chat-app-php-mysql-project.png" alt="gcm-simple-chat-app-php-mysql-project" width="719" height="428" class="alignnone size-full wp-image-38941" srcset="http://www.androidhive.info/wp-content/uploads/2016/02/gcm-simple-chat-app-php-mysql-project-300x179.png 300w, http://www.androidhive.info/wp-content/uploads/2016/02/gcm-simple-chat-app-php-mysql-project.png 719w" sizes="(max-width: 719px) 100vw, 719px" /></noscript></div><p><em>include</em> &#8211; Contains the database classes to perform CRUD operations on the database.</p><p><em>libs</em> &#8211; Contains the libraries needed for the app (slim, gcm)</p><p><em>v1</em> &#8211; Root directory of the REST API</p><p><em>index.php, demo.php, styles.css</em> &#8211; Required to create the admin interface.</p><p><strong>1</strong>. Goto your <strong>WAMP/MAMP</strong> installation location and open the web directory. On windows, it will be <strong>c:/wamp/www</strong> directory. On Mac, the path will be <strong>/Applications/MAMP/htdocs</strong>.</p><p><strong>2</strong>. Inside the web directory (<strong>www</strong> or <strong>htdocs</strong>), create a directory named <strong>gcm_chat</strong>. This will be the root directory of our project.</p><p><strong>3</strong>. Inside <strong>gcm_chat</strong> folder, create the remaining directories as shown in the above image. Create folders named <strong>include</strong>, <strong>libs</strong> and <strong>v1</strong>. Inside <strong>libs</strong>, create another folder named <strong>gcm</strong>.</p><p><strong>4</strong>. <a href="http://api.androidhive.info/Slim.zip" target="_blank">Download</a> Slim framework and paste it inside <strong>libs</strong> folder.</p><p><strong>5</strong>. Create a file named <strong>config.php</strong> in <strong>include</strong>. This file contains the app configuration like database credentials, google API Key and other information.</p><p>Replace <strong>GOOGLE_API_KEY</strong> with your API Key which you obtained in 2nd section. Also keep the correct database credentials.</p><pre class="brush: php; title: config.php; notranslate" title="config.php">
&lt;?php
/**
 * Database configuration
 */
define('DB_USERNAME', 'root');
define('DB_PASSWORD', 'root');
define('DB_HOST', 'localhost');
define('DB_NAME', 'gcm_chat');

define(&quot;GOOGLE_API_KEY&quot;, &quot;AIzaSyDKk_Ew7Vi4FZnMzu6GCY5PLb4xZG8muvX&quot;);

// push notification flags
define('PUSH_FLAG_CHATROOM', 1);
define('PUSH_FLAG_USER', 2);

?&gt;
</pre><p> <strong>6</strong>. Create a file named <strong>db_connect.php</strong> inside <strong>include</strong> folder. This class takes care of database connection.</p><pre class="brush: php; title: db_connect.php; notranslate" title="db_connect.php">
&lt;?php

/**
 * Handling database connection
 *
 */
class DbConnect {

    private $conn;

    function __construct() {        
    }

    /**
     * Establishing database connection
     * @return database connection handler
     */
    function connect() {
        include_once dirname(__FILE__) . '/config.php';

        // Connecting to mysql database
        $this-&gt;conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);

        // Check for database connection error
        if (mysqli_connect_errno()) {
            echo &quot;Failed to connect to MySQL: &quot; . mysqli_connect_error();
        }

        // returing connection resource
        return $this-&gt;conn;
    }
}
?&gt;
</pre><p> <strong>7</strong>. Create another file named <strong>db_handler.php</strong> inside <strong>include</strong> folder. This file contains all the necessary functions to interact with database tables.</p><pre class="brush: php; title: db_handler.php; notranslate" title="db_handler.php">
&lt;?php

/**
 * Class to handle all db operations
 * This class will have CRUD methods for database tables
 *
 * @author Ravi Tamada
 */
class DbHandler {

    private $conn;

    function __construct() {
        require_once dirname(__FILE__) . '/db_connect.php';
        // opening db connection
        $db = new DbConnect();
        $this-&gt;conn = $db-&gt;connect();
    }

    // creating new user if not existed
    public function createUser($name, $email) {
        $response = array();

        // First check if user already existed in db
        if (!$this-&gt;isUserExists($email)) {
            // insert query
            $stmt = $this-&gt;conn-&gt;prepare(&quot;INSERT INTO users(name, email) values(?, ?)&quot;);
            $stmt-&gt;bind_param(&quot;ss&quot;, $name, $email);

            $result = $stmt-&gt;execute();

            $stmt-&gt;close();

            // Check for successful insertion
            if ($result) {
                // User successfully inserted
                $response[&quot;error&quot;] = false;
                $response[&quot;user&quot;] = $this-&gt;getUserByEmail($email);
            } else {
                // Failed to create user
                $response[&quot;error&quot;] = true;
                $response[&quot;message&quot;] = &quot;Oops! An error occurred while registereing&quot;;
            }
        } else {
            // User with same email already existed in the db
            $response[&quot;error&quot;] = false;
            $response[&quot;user&quot;] = $this-&gt;getUserByEmail($email);
        }

        return $response;
    }

    // updating user GCM registration ID
    public function updateGcmID($user_id, $gcm_registration_id) {
        $response = array();
        $stmt = $this-&gt;conn-&gt;prepare(&quot;UPDATE users SET gcm_registration_id = ? WHERE user_id = ?&quot;);
        $stmt-&gt;bind_param(&quot;si&quot;, $gcm_registration_id, $user_id);

        if ($stmt-&gt;execute()) {
            // User successfully updated
            $response[&quot;error&quot;] = false;
            $response[&quot;message&quot;] = 'GCM registration ID updated successfully';
        } else {
            // Failed to update user
            $response[&quot;error&quot;] = true;
            $response[&quot;message&quot;] = &quot;Failed to update GCM registration ID&quot;;
            $stmt-&gt;error;
        }
        $stmt-&gt;close();

        return $response;
    }

    // fetching single user by id
    public function getUser($user_id) {
        $stmt = $this-&gt;conn-&gt;prepare(&quot;SELECT user_id, name, email, gcm_registration_id, created_at FROM users WHERE user_id = ?&quot;);
        $stmt-&gt;bind_param(&quot;s&quot;, $user_id);
        if ($stmt-&gt;execute()) {
            // $user = $stmt-&gt;get_result()-&gt;fetch_assoc();
            $stmt-&gt;bind_result($user_id, $name, $email, $gcm_registration_id, $created_at);
            $stmt-&gt;fetch();
            $user = array();
            $user[&quot;user_id&quot;] = $user_id;
            $user[&quot;name&quot;] = $name;
            $user[&quot;email&quot;] = $email;
            $user[&quot;gcm_registration_id&quot;] = $gcm_registration_id;
            $user[&quot;created_at&quot;] = $created_at;
            $stmt-&gt;close();
            return $user;
        } else {
            return NULL;
        }
    }

    // fetching multiple users by ids
    public function getUsers($user_ids) {

        $users = array();
        if (sizeof($user_ids) &gt; 0) {
            $query = &quot;SELECT user_id, name, email, gcm_registration_id, created_at FROM users WHERE user_id IN (&quot;;

            foreach ($user_ids as $user_id) {
                $query .= $user_id . ',';
            }

            $query = substr($query, 0, strlen($query) - 1);
            $query .= ')';

            $stmt = $this-&gt;conn-&gt;prepare($query);
            $stmt-&gt;execute();
            $result = $stmt-&gt;get_result();

            while ($user = $result-&gt;fetch_assoc()) {
                $tmp = array();
                $tmp[&quot;user_id&quot;] = $user['user_id'];
                $tmp[&quot;name&quot;] = $user['name'];
                $tmp[&quot;email&quot;] = $user['email'];
                $tmp[&quot;gcm_registration_id&quot;] = $user['gcm_registration_id'];
                $tmp[&quot;created_at&quot;] = $user['created_at'];
                array_push($users, $tmp);
            }
        }

        return $users;
    }

    // messaging in a chat room / to persional message
    public function addMessage($user_id, $chat_room_id, $message) {
        $response = array();

        $stmt = $this-&gt;conn-&gt;prepare(&quot;INSERT INTO messages (chat_room_id, user_id, message) values(?, ?, ?)&quot;);
        $stmt-&gt;bind_param(&quot;iis&quot;, $chat_room_id, $user_id, $message);

        $result = $stmt-&gt;execute();

        if ($result) {
            $response['error'] = false;

            // get the message
            $message_id = $this-&gt;conn-&gt;insert_id;
            $stmt = $this-&gt;conn-&gt;prepare(&quot;SELECT message_id, user_id, chat_room_id, message, created_at FROM messages WHERE message_id = ?&quot;);
            $stmt-&gt;bind_param(&quot;i&quot;, $message_id);
            if ($stmt-&gt;execute()) {
                $stmt-&gt;bind_result($message_id, $user_id, $chat_room_id, $message, $created_at);
                $stmt-&gt;fetch();
                $tmp = array();
                $tmp['message_id'] = $message_id;
                $tmp['chat_room_id'] = $chat_room_id;
                $tmp['message'] = $message;
                $tmp['created_at'] = $created_at;
                $response['message'] = $tmp;
            }
        } else {
            $response['error'] = true;
            $response['message'] = 'Failed send message';
        }

        return $response;
    }

    // fetching all chat rooms
    public function getAllChatrooms() {
        $stmt = $this-&gt;conn-&gt;prepare(&quot;SELECT * FROM chat_rooms&quot;);
        $stmt-&gt;execute();
        $tasks = $stmt-&gt;get_result();
        $stmt-&gt;close();
        return $tasks;
    }

    // fetching single chat room by id
    function getChatRoom($chat_room_id) {
        $stmt = $this-&gt;conn-&gt;prepare(&quot;SELECT cr.chat_room_id, cr.name, cr.created_at as chat_room_created_at, u.name as username, c.* FROM chat_rooms cr LEFT JOIN messages c ON c.chat_room_id = cr.chat_room_id LEFT JOIN users u ON u.user_id = c.user_id WHERE cr.chat_room_id = ?&quot;);
        $stmt-&gt;bind_param(&quot;i&quot;, $chat_room_id);
        $stmt-&gt;execute();
        $tasks = $stmt-&gt;get_result();
        $stmt-&gt;close();
        return $tasks;
    }

    /**
     * Checking for duplicate user by email address
     * @param String $email email to check in db
     * @return boolean
     */
    private function isUserExists($email) {
        $stmt = $this-&gt;conn-&gt;prepare(&quot;SELECT user_id from users WHERE email = ?&quot;);
        $stmt-&gt;bind_param(&quot;s&quot;, $email);
        $stmt-&gt;execute();
        $stmt-&gt;store_result();
        $num_rows = $stmt-&gt;num_rows;
        $stmt-&gt;close();
        return $num_rows &gt; 0;
    }

    /**
     * Fetching user by email
     * @param String $email User email id
     */
    public function getUserByEmail($email) {
        $stmt = $this-&gt;conn-&gt;prepare(&quot;SELECT user_id, name, email, created_at FROM users WHERE email = ?&quot;);
        $stmt-&gt;bind_param(&quot;s&quot;, $email);
        if ($stmt-&gt;execute()) {
            // $user = $stmt-&gt;get_result()-&gt;fetch_assoc();
            $stmt-&gt;bind_result($user_id, $name, $email, $created_at);
            $stmt-&gt;fetch();
            $user = array();
            $user[&quot;user_id&quot;] = $user_id;
            $user[&quot;name&quot;] = $name;
            $user[&quot;email&quot;] = $email;
            $user[&quot;created_at&quot;] = $created_at;
            $stmt-&gt;close();
            return $user;
        } else {
            return NULL;
        }
    }

}

?&gt;

</pre><p> <strong>8</strong>. Now let&#8217;s start creating the files required for GCM. Create a file named <strong>gcm.php</strong> inside <strong>libs â gcm</strong> folder. This file contains necessary functions required to interact with GCM server. These functions basically makes a CURL request to GCM server by passing required parameters in order to invoke a push notification.</p><p><em>send()</em> &#8211; Function sends push notification to a single user</p><p><em>sendToTopic()</em> &#8211; Sends push notification to a topic</p><p><em>sendToMultiple()</em> &#8211; Send push notification to multiple users</p><pre class="brush: php; title: gcm.php; notranslate" title="gcm.php">
&lt;?php
class GCM {

    // constructor
    function __construct() {
        
    }

    // sending push message to single user by gcm registration id
    public function send($to, $message) {
        $fields = array(
            'to' =&gt; $to,
            'data' =&gt; $message,
        );
        return $this-&gt;sendPushNotification($fields);
    }

    // Sending message to a topic by topic id
    public function sendToTopic($to, $message) {
        $fields = array(
            'to' =&gt; '/topics/' . $to,
            'data' =&gt; $message,
        );
        return $this-&gt;sendPushNotification($fields);
    }

    // sending push message to multiple users by gcm registration ids
    public function sendMultiple($registration_ids, $message) {
        $fields = array(
            'registration_ids' =&gt; $registration_ids,
            'data' =&gt; $message,
        );

        return $this-&gt;sendPushNotification($fields);
    }

    // function makes curl request to gcm servers
    private function sendPushNotification($fields) {

        // include config
        include_once __DIR__ . '/../../include/config.php';

        // Set POST variables
        $url = 'https://gcm-http.googleapis.com/gcm/send';

        $headers = array(
            'Authorization: key=' . GOOGLE_API_KEY,
            'Content-Type: application/json'
        );
        // Open connection
        $ch = curl_init();

        // Set the url, number of POST vars, POST data
        curl_setopt($ch, CURLOPT_URL, $url);

        curl_setopt($ch, CURLOPT_POST, true);
        curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

        // Disabling SSL Certificate support temporarly
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

        curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($fields));

        // Execute post
        $result = curl_exec($ch);
        if ($result === FALSE) {
            die('Curl failed: ' . curl_error($ch));
        }

        // Close connection
        curl_close($ch);

        return $result;
    }

}

?&gt;
</pre><p> <strong>9</strong>. Under <strong>libs â gcm</strong>, create another file named <strong>push.php</strong>. This class prepares the required json format that is transferred as a push message to device. If you want to add additional fields to json, you need to add them in this class.</p><pre class="brush: php; title: push.php; notranslate" title="push.php">
&lt;?php
/**
 * @author Ravi Tamada
 * @link URL Tutorial link
 */

class Push{
    // push message title
    private $title;
    
    // push message payload
    private $data;
    
    // flag indicating background task on push received
    private $is_background;
    
    // flag to indicate the type of notification
    private $flag;
    
    function __construct() {
        
    }
    
    public function setTitle($title){
        $this-&gt;title = $title;
    }
    
    public function setData($data){
        $this-&gt;data = $data;
    }
    
    public function setIsBackground($is_background){
        $this-&gt;is_background = $is_background;
    }
    
    public function setFlag($flag){
        $this-&gt;flag = $flag;
    }
    
    public function getPush(){
        $res = array();
        $res['title'] = $this-&gt;title;
        $res['is_background'] = $this-&gt;is_background;
        $res['flag'] = $this-&gt;flag;
        $res['data'] = $this-&gt;data;
        
        return $res;
    }
}
</pre><p> <strong>10</strong>. At this stage, we have all the necessary functions ready. Let&#8217;s start preparing the REST API endpoints for the android app. Create a file named <strong>.htaccess</strong> inside <strong>v1</strong> folder and add below rules.</p><pre class="brush: php; title: .htaccess; notranslate" title=".htaccess">
RewriteEngine On 
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteRule ^(.*)$ %{ENV:BASE}index.php [QSA,L]
</pre><p> <strong>11</strong>. Create <strong>index.php</strong> inside <strong>v1</strong> folder. All the rest api requests will be handled by this file only.</p><pre class="brush: php; title: v1/index.php; notranslate" title="v1/index.php">
&lt;?php

error_reporting(-1);
ini_set('display_errors', 'On');

require_once '../include/db_handler.php';
require '.././libs/Slim/Slim.php';

\Slim\Slim::registerAutoloader();

$app = new \Slim\Slim();

// User login
$app-&gt;post('/user/login', function() use ($app) {
    // check for required params
    verifyRequiredParams(array('name', 'email'));

    // reading post params
    $name = $app-&gt;request-&gt;post('name');
    $email = $app-&gt;request-&gt;post('email');

    // validating email address
    validateEmail($email);

    $db = new DbHandler();
    $response = $db-&gt;createUser($name, $email);

    // echo json response
    echoRespnse(200, $response);
});


/* * *
 * Updating user
 *  we use this url to update user's gcm registration id
 */
$app-&gt;put('/user/:id', function($user_id) use ($app) {
    global $app;

    verifyRequiredParams(array('gcm_registration_id'));

    $gcm_registration_id = $app-&gt;request-&gt;put('gcm_registration_id');

    $db = new DbHandler();
    $response = $db-&gt;updateGcmID($user_id, $gcm_registration_id);

    echoRespnse(200, $response);
});

/* * *
 * fetching all chat rooms
 */
$app-&gt;get('/chat_rooms', function() {
    $response = array();
    $db = new DbHandler();

    // fetching all user tasks
    $result = $db-&gt;getAllChatrooms();

    $response[&quot;error&quot;] = false;
    $response[&quot;chat_rooms&quot;] = array();

    // pushing single chat room into array
    while ($chat_room = $result-&gt;fetch_assoc()) {
        $tmp = array();
        $tmp[&quot;chat_room_id&quot;] = $chat_room[&quot;chat_room_id&quot;];
        $tmp[&quot;name&quot;] = $chat_room[&quot;name&quot;];
        $tmp[&quot;created_at&quot;] = $chat_room[&quot;created_at&quot;];
        array_push($response[&quot;chat_rooms&quot;], $tmp);
    }

    echoRespnse(200, $response);
});

/**
 * Messaging in a chat room
 * Will send push notification using Topic Messaging
 *  */
$app-&gt;post('/chat_rooms/:id/message', function($chat_room_id) {
    global $app;
    $db = new DbHandler();

    verifyRequiredParams(array('user_id', 'message'));

    $user_id = $app-&gt;request-&gt;post('user_id');
    $message = $app-&gt;request-&gt;post('message');

    $response = $db-&gt;addMessage($user_id, $chat_room_id, $message);

    if ($response['error'] == false) {
        require_once __DIR__ . '/../libs/gcm/gcm.php';
        require_once __DIR__ . '/../libs/gcm/push.php';
        $gcm = new GCM();
        $push = new Push();

        // get the user using userid
        $user = $db-&gt;getUser($user_id);

        $data = array();
        $data['user'] = $user;
        $data['message'] = $response['message'];
        $data['chat_room_id'] = $chat_room_id;

        $push-&gt;setTitle(&quot;Google Cloud Messaging&quot;);
        $push-&gt;setIsBackground(FALSE);
        $push-&gt;setFlag(PUSH_FLAG_CHATROOM);
        $push-&gt;setData($data);
        
        // echo json_encode($push-&gt;getPush());exit;

        // sending push message to a topic
        $gcm-&gt;sendToTopic('topic_' . $chat_room_id, $push-&gt;getPush());

        $response['user'] = $user;
        $response['error'] = false;
    }

    echoRespnse(200, $response);
});


/**
 * Sending push notification to a single user
 * We use user's gcm registration id to send the message
 * * */
$app-&gt;post('/users/:id/message', function($to_user_id) {
    global $app;
    $db = new DbHandler();

    verifyRequiredParams(array('message'));

    $from_user_id = $app-&gt;request-&gt;post('user_id');
    $message = $app-&gt;request-&gt;post('message');

    $response = $db-&gt;addMessage($from_user_id, $to_user_id, $message);

    if ($response['error'] == false) {
        require_once __DIR__ . '/../libs/gcm/gcm.php';
        require_once __DIR__ . '/../libs/gcm/push.php';
        $gcm = new GCM();
        $push = new Push();

        $user = $db-&gt;getUser($to_user_id);

        $data = array();
        $data['user'] = $user;
        $data['message'] = $response['message'];
        $data['image'] = '';

        $push-&gt;setTitle(&quot;Google Cloud Messaging&quot;);
        $push-&gt;setIsBackground(FALSE);
        $push-&gt;setFlag(PUSH_FLAG_USER);
        $push-&gt;setData($data);

        // sending push message to single user
        $gcm-&gt;send($user['gcm_registration_id'], $push-&gt;getPush());

        $response['user'] = $user;
        $response['error'] = false;
    }

    echoRespnse(200, $response);
});


/**
 * Sending push notification to multiple users
 * We use gcm registration ids to send notification message
 * At max you can send message to 1000 recipients
 * * */
$app-&gt;post('/users/message', function() use ($app) {

    $response = array();
    verifyRequiredParams(array('user_id', 'to', 'message'));

    require_once __DIR__ . '/../libs/gcm/gcm.php';
    require_once __DIR__ . '/../libs/gcm/push.php';

    $db = new DbHandler();

    $user_id = $app-&gt;request-&gt;post('user_id');
    $to_user_ids = array_filter(explode(',', $app-&gt;request-&gt;post('to')));
    $message = $app-&gt;request-&gt;post('message');

    $user = $db-&gt;getUser($user_id);
    $users = $db-&gt;getUsers($to_user_ids);

    $registration_ids = array();

    // preparing gcm registration ids array
    foreach ($users as $u) {
        array_push($registration_ids, $u['gcm_registration_id']);
    }

    // insert messages in db
    // send push to multiple users
    $gcm = new GCM();
    $push = new Push();

    // creating tmp message, skipping database insertion
    $msg = array();
    $msg['message'] = $message;
    $msg['message_id'] = '';
    $msg['chat_room_id'] = '';
    $msg['created_at'] = date('Y-m-d G:i:s');

    $data = array();
    $data['user'] = $user;
    $data['message'] = $msg;
    $data['image'] = '';

    $push-&gt;setTitle(&quot;Google Cloud Messaging&quot;);
    $push-&gt;setIsBackground(FALSE);
    $push-&gt;setFlag(PUSH_FLAG_USER);
    $push-&gt;setData($data);

    // sending push message to multiple users
    $gcm-&gt;sendMultiple($registration_ids, $push-&gt;getPush());

    $response['error'] = false;

    echoRespnse(200, $response);
});

$app-&gt;post('/users/send_to_all', function() use ($app) {

    $response = array();
    verifyRequiredParams(array('user_id', 'message'));

    require_once __DIR__ . '/../libs/gcm/gcm.php';
    require_once __DIR__ . '/../libs/gcm/push.php';

    $db = new DbHandler();

    $user_id = $app-&gt;request-&gt;post('user_id');
    $message = $app-&gt;request-&gt;post('message');

    require_once __DIR__ . '/../libs/gcm/gcm.php';
    require_once __DIR__ . '/../libs/gcm/push.php';
    $gcm = new GCM();
    $push = new Push();

    // get the user using userid
    $user = $db-&gt;getUser($user_id);
    
    // creating tmp message, skipping database insertion
    $msg = array();
    $msg['message'] = $message;
    $msg['message_id'] = '';
    $msg['chat_room_id'] = '';
    $msg['created_at'] = date('Y-m-d G:i:s');

    $data = array();
    $data['user'] = $user;
    $data['message'] = $msg;
    $data['image'] = 'http://www.androidhive.info/wp-content/uploads/2016/01/Air-1.png';

    $push-&gt;setTitle(&quot;Google Cloud Messaging&quot;);
    $push-&gt;setIsBackground(FALSE);
    $push-&gt;setFlag(PUSH_FLAG_USER);
    $push-&gt;setData($data);

    // sending message to topic `global`
    // On the device every user should subscribe to `global` topic
    $gcm-&gt;sendToTopic('global', $push-&gt;getPush());

    $response['user'] = $user;
    $response['error'] = false;

    echoRespnse(200, $response);
});

/**
 * Fetching single chat room including all the chat messages
 *  */
$app-&gt;get('/chat_rooms/:id', function($chat_room_id) {
    global $app;
    $db = new DbHandler();

    $result = $db-&gt;getChatRoom($chat_room_id);

    $response[&quot;error&quot;] = false;
    $response[&quot;messages&quot;] = array();
    $response['chat_room'] = array();

    $i = 0;
    // looping through result and preparing tasks array
    while ($chat_room = $result-&gt;fetch_assoc()) {
        // adding chat room node
        if ($i == 0) {
            $tmp = array();
            $tmp[&quot;chat_room_id&quot;] = $chat_room[&quot;chat_room_id&quot;];
            $tmp[&quot;name&quot;] = $chat_room[&quot;name&quot;];
            $tmp[&quot;created_at&quot;] = $chat_room[&quot;chat_room_created_at&quot;];
            $response['chat_room'] = $tmp;
        }

        if ($chat_room['user_id'] != NULL) {
            // message node
            $cmt = array();
            $cmt[&quot;message&quot;] = $chat_room[&quot;message&quot;];
            $cmt[&quot;message_id&quot;] = $chat_room[&quot;message_id&quot;];
            $cmt[&quot;created_at&quot;] = $chat_room[&quot;created_at&quot;];

            // user node
            $user = array();
            $user['user_id'] = $chat_room['user_id'];
            $user['username'] = $chat_room['username'];
            $cmt['user'] = $user;

            array_push($response[&quot;messages&quot;], $cmt);
        }
    }

    echoRespnse(200, $response);
});

/**
 * Verifying required params posted or not
 */
function verifyRequiredParams($required_fields) {
    $error = false;
    $error_fields = &quot;&quot;;
    $request_params = array();
    $request_params = $_REQUEST;
    // Handling PUT request params
    if ($_SERVER['REQUEST_METHOD'] == 'PUT') {
        $app = \Slim\Slim::getInstance();
        parse_str($app-&gt;request()-&gt;getBody(), $request_params);
    }
    foreach ($required_fields as $field) {
        if (!isset($request_params[$field]) || strlen(trim($request_params[$field])) &lt;= 0) {
            $error = true;
            $error_fields .= $field . ', ';
        }
    }

    if ($error) {
        // Required field(s) are missing or empty
        // echo error json and stop the app
        $response = array();
        $app = \Slim\Slim::getInstance();
        $response[&quot;error&quot;] = true;
        $response[&quot;message&quot;] = 'Required field(s) ' . substr($error_fields, 0, -2) . ' is missing or empty';
        echoRespnse(400, $response);
        $app-&gt;stop();
    }
}

/**
 * Validating email address
 */
function validateEmail($email) {
    $app = \Slim\Slim::getInstance();
    if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
        $response[&quot;error&quot;] = true;
        $response[&quot;message&quot;] = 'Email address is not valid';
        echoRespnse(400, $response);
        $app-&gt;stop();
    }
}

function IsNullOrEmptyString($str) {
    return (!isset($str) || trim($str) === '');
}

/**
 * Echoing json response to client
 * @param String $status_code Http response code
 * @param Int $response Json response
 */
function echoRespnse($status_code, $response) {
    $app = \Slim\Slim::getInstance();
    // Http response code
    $app-&gt;status($status_code);

    // setting response content type to json
    $app-&gt;contentType('application/json');

    echo json_encode($response);
}

$app-&gt;run();
?&gt;
</pre><p></p><div id="changelog"> <strong>REST API Endpoints</strong></p><div style="float:none;margin:10px 0 10px 0;text-align:center;"> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>  <ins class="adsbygoogle"
style="display:inline-block;width:300px;height:250px"
data-ad-client="ca-pub-9207768510467156"
data-ad-slot="2887095024"></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script> </div><p>The <strong>index.php</strong> inside <strong>v1</strong> folder providers the below endpoints.</p><p>Base URL: <strong>http://localhost/gcm_chat/v1</strong></p><table border="0" width="100%"><tbody><tr><td><strong>Endpoint</strong></td><td><strong>Params</strong></td><td><strong>Method</strong></td><td><strong>Description</strong></td></tr><tr><td>/user/login</td><td>name, email</td><td>POST</td><td>User login or registration</td></tr><tr><td>/user/:id</td><td>gcm_registration_id</td><td>PUT</td><td>Updates user&#8217;s gcm registration id in database</td></tr><tr><td>/chat_rooms</td><td>&#8211;</td><td>GET</td><td>Fetches all chat rooms</td></tr><tr><td>/chat_rooms/:id</td><td>replace :id with actual chat room id</td><td>GET</td><td>Fetches single chat room messages</td></tr><tr><td>/chat_rooms/:id/message</td><td>replace :id with actual chat room id</td><td>POST</td><td>Posting a message in a chat room</td></tr><tr><td>/users/:id/message</td><td>replace :id with actual user id</td><td>POST</td><td>Sending a message to user</td></tr><tr><td>/users/message</td><td>user_id, to, message<br /> `to` &#8211; param is user ids separated by comma (,)</td><td>POST</td><td>Sending a message to multiple users</td></tr><tr><td>/users/send_to_all</td><td>user_id, message</td><td>POST</td><td>Sending a message to all the users subscribed to `<strong>global</strong>` topic</td></tr></tbody></table></div><h2>6. Testing the REST API</h2><p>Before starting the android project, make sure that the php project is running without any errors. Follow the below steps to test the API.</p><p><strong>1</strong>. Enable apache <strong>mod_rewrite</strong> module (<a rel="nofollow" href="http://stackoverflow.com/questions/869092/how-to-enable-mod-rewrite-for-apache-2-2" target="_blank">link</a>)</p><p><strong>2</strong>. Enable <strong>curl</strong> extension. This allows php to make http requests from the backend (<a rel="nofollow" href="http://stackoverflow.com/questions/13021536/how-to-enable-curl-in-wamp-server" target="_blank">link</a>).</p><p><strong>3</strong>. Install <a rel="nofollow" href="https://chrome.google.com/webstore/detail/postman/fhbjgbiflinjbdggehcddcbncdddomop?hl=en" target="_blank">Postman</a> Chrome REST API extension. You can use any other rest api clients too.</p><p>The below video takes you through testing the API using Postman.</p><div class="yt_video"> <iframe src="http://www.youtube.com/embed/aMBdEO4nZLk" frameborder="0" allowfullscreen="" style="width: 719px; height: 444.7265625px;"></iframe></div><p></p><h2>7. Building the Admin Panel</h2><p>I created very simple admin panel using PHP, HTML, CSS &#038; jQuery. This admin panel might not be used in production stage, but gives you necessary functions to build a better one.</p><p><strong>1</strong>. Create a file named <strong>demo.php</strong> in the root directory of <strong>gcm_chat</strong>. This class contains function for the admin panel.</p><pre class="brush: php; title: demo.php; notranslate" title="demo.php">
&lt;?php

/**
 * Class to handle all db operations
 * This class will have CRUD methods for database tables
 *
 * @author Ravi Tamada
 */
class Demo {

    private $conn;

    function __construct() {
        require_once dirname(__FILE__) . '/include/db_connect.php';
        // opening db connection
        $db = new DbConnect();
        $this-&gt;conn = $db-&gt;connect();
    }

    public function getAllChatRooms() {
        $stmt = $this-&gt;conn-&gt;prepare(&quot;SELECT * FROM chat_rooms&quot;);
        $stmt-&gt;execute();
        $tasks = $stmt-&gt;get_result();
        $stmt-&gt;close();
        return $tasks;
    }

    public function getAllUsers() {
        $stmt = $this-&gt;conn-&gt;prepare(&quot;SELECT * FROM users&quot;);
        $stmt-&gt;execute();
        $tasks = $stmt-&gt;get_result();
        $stmt-&gt;close();
        return $tasks;
    }

    public function getDemoUser() {
        $name = 'AndroidHive';
        $email = 'admin@androidhive.info';
        
        $stmt = $this-&gt;conn-&gt;prepare(&quot;SELECT user_id from users WHERE email = ?&quot;);
        $stmt-&gt;bind_param(&quot;s&quot;, $email);
        $stmt-&gt;execute();
        $stmt-&gt;store_result();
        $num_rows = $stmt-&gt;num_rows;
        if ($num_rows &gt; 0) {
            $stmt-&gt;bind_result($user_id);
            $stmt-&gt;fetch();
            return $user_id;
        } else {
            $stmt = $this-&gt;conn-&gt;prepare(&quot;INSERT INTO users(name, email) values(?, ?)&quot;);
            $stmt-&gt;bind_param(&quot;ss&quot;, $name, $email);
            $result = $stmt-&gt;execute();
            $user_id = $stmt-&gt;insert_id;
            $stmt-&gt;close();
            return $user_id;
        }
    }
}
?&gt;
</pre><p><strong>2</strong>. Create a style sheet named <strong>style.css</strong> in the root directory.</p><pre class="brush: css; title: style.css; notranslate" title="style.css">
/* 
    Created on : 22 Jan, 2016, 10:12:06 PM
    Author     : Ravi Tamada
*/

body{
    width: 100%;
    margin: 0;
    padding: 0;   
    font-family: 'Raleway', sans-serif;
}
.container_body{
    width: 1000px;
    margin: 0 auto;
}
.header{
    padding: 100px 0;
    text-align: center;
    color: #fff;
    background: -moz-radial-gradient(center, ellipse cover, rgba(227,71,73,1) 0%, rgba(186,27,31,1) 100%); /* ff3.6+ */
    background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%, rgba(227,71,73,1)), color-stop(100%, rgba(186,27,31,1))); /* safari4+,chrome */
    background:-webkit-radial-gradient(center, ellipse cover, rgba(227,71,73,1) 0%, rgba(186,27,31,1) 100%); /* safari5.1+,chrome10+ */
    background: -o-radial-gradient(center, ellipse cover, rgba(227,71,73,1) 0%, rgba(186,27,31,1) 100%); /* opera 11.10+ */
    background: -ms-radial-gradient(center, ellipse cover, rgba(227,71,73,1) 0%, rgba(186,27,31,1) 100%); /* ie10+ */
    background:radial-gradient(ellipse at center, rgba(227,71,73,1) 0%, rgba(186,27,31,1) 100%); /* w3c */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#e34749', endColorstr='#ba1b1f',GradientType=1 ); /* ie6-9 */
}
.header .logo{
    font-weight: bold;
    font-size: 30px;
    display: block;
    margin: 10px 0;
    letter-spacing: 3px;
}
.header h2{
    display: block;
    font-size: 50px;
    font-weight: 100;
    line-height: 10px;
}
.header h2.small{
    font-size: 25px;
    font-weight: 300;
    padding-top: 20px;
    letter-spacing: 1px;
}
.topics{
    text-align: center;
    padding-top: 50px;
}
.topics h2.heading{
    font-size: 30px;
    color: #666;
    font-weight: 400;
    display: block;
}
.box{
    width: 900px;
    margin: 40px auto;
    border: 1px solid #dedede;
    background: #f2f4f8;
    position: relative;
}
.box .usr_container,
.box .msg_container{
    float: left;
    height: 600px;
    overflow-x: hidden;
    overflow-y: auto;
}
.box .usr_container{
    width: 350px;
    border-right: 1px solid #dedede;
    background: #fff;
}
.box .msg_container{
    width: 548px;
    position: relative;
}
.box ul{
    margin: 0;
    padding: 0;
}
.box ul li{
    margin: 0;
    padding: 0;
    list-style: none;
    text-align: left;
    cursor: pointer;
}

.box .usr_container ul li{
    padding: 20px 10px;
    background: #fff;
    border-bottom: 1px solid #dedede;
}
.box .usr_container ul li label{
    display: block;
    width: 100%;
    font-family: arial;
    font-weight: 400;
    color: #333;
    font-size: 18px;
    margin-bottom: 5px;
}
.box .usr_container ul li label:hover{
    cursor: pointer;
}
.box .usr_container ul li span{
    color: #777;
    font-family: arial;
    font-size: 14px;
    font-style: italic;
}
.box .usr_container ul li.selected{
    background: #f2f4f8;
}
.box .usr_container ul li.selected label{
    color: #e34749;
}
.box .usr_container ul li.selected span{
    color: #000;
}
.box .usr_container ul li:hover{
    background: #dedede;
    cursor: pointer;
}
.box .msg_container ul{
    padding: 10px 0;
    margin-bottom: 75px;
}
.box .msg_container li{
    padding: 10px 0;
}
.box .msg_container li.others{
    cursor: auto;
    text-align: left;
    padding-left: 20px;
}
.box .msg_container li.self{
    text-align: right;
    cursor: auto;
    padding-right: 20px;
}
.box .msg_container li.self label{
    float: right;
}
.box .msg_container li .message{
    background: #fff;
    border-radius: 3px;
    padding: 15px;
    max-width: 400px;
    font-size: 15px;
    font-family: arial;
    float: left;
    line-height: 20px;
    margin: 5px 0 10px 0;
}
.box .msg_container li label{
    float: left;
    display: block;
    width: 100%;
    font-size: 12px;
    color: #777;
    font-family: arial;
}
.box .msg_container li.others .message{

}
.box .msg_container li.self .message{
    background: #dee2ef;
    float: right;
    display: inline-block;
}
.clear{
    clear:both;
}
.send_container{
    border-top: 1px solid #dedede;
    background: #f7f9fd;
    position: absolute;
    bottom: 0;
    height:75px;
    right: 0;
}
.send_container textarea{
    background: #f7f9fd;
    height: 30px;
    width: 550px;
    font-size: 15px;
    text-align: left;
    padding: 20px;
    border: none;
    resize: none;
    outline: none;
}
.send_container input[type=&quot;button&quot;]{
    position: absolute;
    top: 20px;
    right: 20px;
    padding: 10px;
    background: #e34749;
    outline: none;
    border: none;
    cursor: pointer;
    color: #fff;
    font-weight: bold;
    font-size: 15px;
}
.btn_send{
    padding: 10px;
    background: #e34749;
    outline: none;
    border: none;
    cursor: pointer;
    color: #fff;
    font-weight: bold;
    font-size: 15px;
}
.box .msg_container li label.name{
    display: block;
}
div.container{
    width: 900px;
    margin: 0 auto;
}
select.select_single{
    padding: 10px;
    font-size: 16px;
    width: 400px;
}
select.select_single option{
    font-size: 19px;
}
select.select_multiple{
    font-size: 15px;
    width: 400px;
    height: 200px;
}
select.select_multiple option{
    padding: 5px;
}
textarea.textarea_msg{
    width: 400px;
    height: 120px;
    resize: none;
    margin:20px auto;
    padding: 15px;
    background: #f7f9fd;
    font-size: 15px;
}
.loader{
    display: none;
}
pre{
    width: 800px;
    text-align: left !important;
    font-size: 16px;
    font-family: monospace;
    margin: 0 auto;
    line-height: 20px;
}
.separator{
    width: 100%;
    height: 1px;
    background: #cdcdcd;
    margin: 50px 0;
}
</pre><p><strong>3</strong>. Paste the <a href="http://demo.androidhive.info/gcm_chat/loader.gif" target="_blank">loader.gif</a> image in the same directory.</p><p><strong>4</strong>. Create <strong>index.php</strong> in the root directory. Here I have written necessary php, html and jQuery code to build the admin UI.</p><pre class="brush: php; title: index.php; notranslate" title="index.php">
&lt;?php
error_reporting(-1);
ini_set('display_errors', 'On');
?&gt;

&lt;?php
require_once __DIR__ . '/demo.php';
$demo = new Demo();
$admin_id = $demo-&gt;getDemoUser();
?&gt;

&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Google Cloud Messaging 3.0 | AndroidHive&lt;/title&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
        &lt;link href='https://fonts.googleapis.com/css?family=Raleway:400,800,100' rel='stylesheet' type='text/css'&gt;
        &lt;link href='style.css' rel='stylesheet' type='text/css'&gt;
        &lt;link href='http://api.androidhive.info/gcm/styles/default.css' rel='stylesheet' type='text/css'&gt;
        &lt;script type=&quot;text/javascript&quot; src=&quot;https://code.jquery.com/jquery-2.2.0.min.js&quot;&gt;&lt;/script&gt;
        &lt;script type=&quot;text/javascript&quot;&gt;
            var user_id = '&lt;?= $admin_id ?&gt;';
            $(document).ready(function () {

                getChatroomMessages($('#topics li:first').attr('id'));


                $('ul#topics li').on('click', function () {
                    $('ul#topics li').removeClass('selected');
                    $(this).addClass('selected');
                    getChatroomMessages($(this).prop('id'))
                });

                function getChatroomMessages(id) {
                    $.getJSON(&quot;v1/chat_rooms/&quot; + id, function (data) {
                        var li = '';
                        $.each(data.messages, function (i, message) {
                            li += '&lt;li class=&quot;others&quot;&gt;&lt;label class=&quot;name&quot;&gt;' + message.user.username + '&lt;/label&gt;&lt;div class=&quot;message&quot;&gt;' + message.message + '&lt;/div&gt;&lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;&lt;/li&gt;';
                        });
                        $('ul#topic_messages').html(li);
                        if (data.messages.length &gt; 0) {
                            scrollToBottom('msg_container_topic');
                        }
                    }).done(function () {

                    }).fail(function () {
                        alert('Sorry! Unable to fetch topic messages');
                    }).always(function () {

                    });

                    // attaching the chatroom id to send button
                    $('#send_to_topic').attr('chat_room', id);
                }

                $('#send_to_topic').on('click', function () {
                    var msg = $('#send_to_topic_message').val();
                    if (msg.trim().length === 0) {
                        alert('Enter a message');
                        return;
                    }

                    $('#send_to_topic_message').val('');
                    $('#loader_topic').show();

                    $.post(&quot;v1/chat_rooms/&quot; + $(this).attr('chat_room') + '/message',
                            {user_id: user_id, message: msg},
                    function (data) {
                        if (data.error === false) {
                            var li = '&lt;li class=&quot;self&quot; tabindex=&quot;1&quot;&gt;&lt;label class=&quot;name&quot;&gt;' + data.user.name + '&lt;/label&gt;&lt;div class=&quot;message&quot;&gt;' + data.message.message + '&lt;/div&gt;&lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;&lt;/li&gt;';
                            $('ul#topic_messages').append(li);
                            scrollToBottom('msg_container_topic');
                        } else {
                            alert('Sorry! Unable to send message');
                        }
                    }).done(function () {

                    }).fail(function () {
                        alert('Sorry! Unable to send message');
                    }).always(function () {
                        $('#loader_topic').hide();
                    });
                });

                $('input#send_to_single_user').on('click', function () {
                    var msg = $('#send_to_single').val();
                    var to = $('.select_single').val();
                    if (msg.trim().length === 0) {
                        alert('Enter a message');
                        return;
                    }

                    $('#send_to_single').val('');
                    $('#loader_single').show();

                    $.post(&quot;v1/users/&quot; + to + '/message',
                            {user_id: user_id, message: msg},
                    function (data) {
                        if (data.error === false) {
                            $('#loader_single').hide();
                            alert('Push notification sent successfully! You should see a Toast message on device.');
                        } else {
                            alert('Sorry! Unable to post message');
                        }
                    }).done(function () {

                    }).fail(function () {
                        alert('Sorry! Unable to send message');
                    }).always(function () {
                        $('#loader_single').hide();
                    });
                });

                $('input#send_to_multiple_users').on('click', function () {
                    var msg = $('#send_to_multiple').val();
                    var to = $('.select_multiple').val();

                    if (to === null) {
                        alert(&quot;Please select the users!&quot;);
                        return;
                    }

                    if (msg.trim().length === 0) {
                        alert('Enter a message');
                        return;
                    }

                    $('#send_to_multiple').val('');
                    $('#loader_multiple').show();

                    var selMulti = $.map($(&quot;.select_multiple option:selected&quot;), function (el, i) {
                        return $(el).val();
                    });

                    to = selMulti.join(&quot;,&quot;);

                    $.post(&quot;v1/users/message&quot;,
                            {user_id: user_id, to: to, message: msg},
                    function (data) {
                        if (data.error === false) {
                            $('#loader_multiple').hide();
                            alert('Push notification sent successfully to multiple users');
                        } else {
                            alert('Sorry! Unable to send message');
                        }
                    }).done(function () {

                    }).fail(function () {
                        alert('Sorry! Unable to send message');
                    }).always(function () {
                        $('#loader_multiple').hide();
                    });
                });

                $('input#send_to_multiple_users_with_image').on('click', function () {

                    var msg = $('#send_to_multiple_with_image').val();
                    if (msg.trim().length === 0) {
                        alert('Enter a message');
                        return;
                    }

                    $('#send_to_multiple_with_image').val('');
                    $('#loader_multiple_with_image').show();

                    $.post(&quot;v1/users/send_to_all&quot;,
                            {user_id: user_id, message: msg},
                    function (data) {
                        if (data.error === false) {
                            $('#loader_multiple_with_image').hide();
                            alert('Push notification sent successfully to multiple users');
                        } else {
                            alert('Sorry! Unable to send message');
                        }
                    }).done(function () {

                    }).fail(function () {
                        alert('Sorry! Unable to send message');
                    }).always(function () {
                        $('#loader_topic_with_image').hide();
                    });
                });

                function scrollToBottom(cls) {
                    $('.' + cls).scrollTop($('.' + cls + ' ul li').last().position().top + $('.' + cls + ' ul li').last().height());
                }
            });
        &lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div class=&quot;header&quot;&gt;
            &lt;label class=&quot;logo&quot;&gt;ANDROIDHIVE&lt;/label&gt;
            &lt;h2&gt;Google Cloud Messaging&lt;/h2&gt;
            &lt;h2 class=&quot;small&quot;&gt;Sending push notifications using Android, PHP &amp; MySQL&lt;/h2&gt;
        &lt;/div&gt;
        &lt;div class=&quot;container_body&quot;&gt;
            &lt;div class=&quot;topics&quot;&gt;
                &lt;h2 class=&quot;heading&quot;&gt;Download &amp; Install the GCM apk&lt;/h2&gt;
                Download &amp; Install the Google Cloud Messaging &lt;a href=&quot;#&quot;&gt;apk&lt;/a&gt; before trying the demos. &lt;br/&gt;&lt;br/&gt;Once installed, refresh this page 
                to see your name, email in the recipients list.
            &lt;/div&gt;

            &lt;div class=&quot;topics&quot;&gt;
                &lt;div class=&quot;separator&quot;&gt;&lt;/div&gt;
                &lt;h2 class=&quot;heading&quot;&gt;Sending message to a `topic`&lt;/h2&gt;
                Select any of the topics below and send a message.&lt;br/&gt;&lt;br/&gt;
                &lt;div class=&quot;box&quot;&gt;
                    &lt;div class=&quot;usr_container&quot;&gt;
                        &lt;ul id=&quot;topics&quot;&gt;
                            &lt;?php
                            $chatrooms = $demo-&gt;getAllChatRooms();
                            foreach ($chatrooms as $key =&gt; $chatroom) {
                                $cls = $key == 0 ? 'selected' : '';
                                ?&gt;
                                &lt;li id=&quot;&lt;?= $chatroom['chat_room_id'] ?&gt;&quot; class=&quot;&lt;?= $cls ?&gt;&quot;&gt;
                                    &lt;label&gt;&lt;?= $chatroom['name'] ?&gt;&lt;/label&gt;
                                    &lt;span&gt;topic_&lt;?= $chatroom['chat_room_id'] ?&gt;&lt;/span&gt;
                                &lt;/li&gt;
                                &lt;?php
                            }
                            ?&gt;
                        &lt;/ul&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;msg_container msg_container_topic&quot;&gt;
                        &lt;ul id=&quot;topic_messages&quot;&gt;&lt;/ul&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;send_container&quot;&gt;
                        &lt;textarea placeholder=&quot;Type a message here&quot; id=&quot;send_to_topic_message&quot;&gt;&lt;/textarea&gt;
                        &lt;input id=&quot;send_to_topic&quot; type=&quot;button&quot; value=&quot;Send to Topic&quot;/&gt;
                        &lt;img src=&quot;loader.gif&quot; id=&quot;loader_topic&quot; class=&quot;loader&quot;/&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;
                &lt;/div&gt;
                &lt;br/&gt;
                &lt;div class=&quot;separator&quot;&gt;&lt;/div&gt;
                &lt;h2 class=&quot;heading&quot;&gt;Sending message to `Single User`&lt;/h2&gt;
                Select your name from the below recipients and send a message&lt;br/&gt;&lt;br/&gt;

                &lt;div class=&quot;container&quot;&gt;
                    &lt;select class=&quot;select_single&quot;&gt;
                        &lt;?php
                        $users = $demo-&gt;getAllUsers();
                        foreach ($users as $key =&gt; $user) {
                            ?&gt;
                            &lt;option value=&quot;&lt;?= $user['user_id'] ?&gt;&quot;&gt;&lt;?= $user['name'] ?&gt; (&lt;?= $user['email'] ?&gt;)&lt;/option&gt;
                            &lt;?php
                        }
                        ?&gt;
                    &lt;/select&gt;&lt;br/&gt;
                    &lt;textarea id=&quot;send_to_single&quot; class=&quot;textarea_msg&quot; placeholder=&quot;Type a message&quot;&gt;&lt;/textarea&gt;&lt;br/&gt;
                    &lt;input id=&quot;send_to_single_user&quot; type=&quot;button&quot; value=&quot;Send to single user&quot; class=&quot;btn_send&quot;/&gt;
                    &lt;img src=&quot;loader.gif&quot; id=&quot;loader_single&quot; class=&quot;loader&quot;/&gt;
                &lt;/div&gt;
                &lt;br/&gt;
                &lt;div class=&quot;separator&quot;&gt;&lt;/div&gt;
                &lt;h2 class=&quot;heading&quot;&gt;Sending message to `Multiple Users`&lt;/h2&gt;
                Select multiple recipients and send a message. You can use ctrl or shift to select multiple users&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;

                &lt;div class=&quot;container&quot;&gt;
                    &lt;select multiple class=&quot;select_multiple&quot;&gt;
                        &lt;?php
                        foreach ($users as $key =&gt; $user) {
                            ?&gt;
                            &lt;option value=&quot;&lt;?= $user['user_id'] ?&gt;&quot;&gt;&lt;?= $user['name'] ?&gt; (&lt;?= $user['email'] ?&gt;)&lt;/option&gt;
                            &lt;?php
                        }
                        ?&gt;
                    &lt;/select&gt;
                    &lt;br/&gt;
                    &lt;textarea id=&quot;send_to_multiple&quot; class=&quot;textarea_msg&quot; placeholder=&quot;Type a message&quot;&gt;&lt;/textarea&gt;&lt;br/&gt;
                    &lt;input id=&quot;send_to_multiple_users&quot; type=&quot;button&quot; value=&quot;Send to multiple users&quot; class=&quot;btn_send&quot;/&gt;
                    &lt;img src=&quot;loader.gif&quot; id=&quot;loader_multiple&quot; class=&quot;loader&quot;/&gt;
                &lt;/div&gt;

                &lt;br/&gt;
                &lt;div class=&quot;separator&quot;&gt;&lt;/div&gt;
                &lt;h2 class=&quot;heading&quot;&gt;Sending push notification with an `Image`&lt;/h2&gt;
                A message with an image attachment will be sent to every user. You have to minimize or close the app in order to see
                it in action.&lt;br/&gt;&lt;br/&gt;

                &lt;div class=&quot;container&quot;&gt;
                    &lt;textarea id=&quot;send_to_multiple_with_image&quot; class=&quot;textarea_msg&quot; placeholder=&quot;Type a message&quot;&gt;&lt;/textarea&gt;&lt;br/&gt;
                    &lt;input id=&quot;send_to_multiple_users_with_image&quot; type=&quot;button&quot; value=&quot;Send with image&quot; class=&quot;btn_send&quot;/&gt;
                    &lt;img src=&quot;loader.gif&quot; id=&quot;loader_multiple_with_image&quot; class=&quot;loader&quot;/&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;br/&gt;&lt;br/&gt;
            &lt;br/&gt;&lt;br/&gt;
            &lt;br/&gt;&lt;br/&gt;
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;
</pre><p><strong>5</strong>. Finally access the admin panel by going to <a rel="nofollow" href="http://localhost/gcm_chat/" target="_blank">http://localhost/gcm_chat/</a> (If your apache is running under a port, add the port number to localhost)</p><p>You should able to see the below admin panel which provides options to send the messages to devices from admin panel. Here the <a href="http://demo.androidhive.info/gcm_chat/" target="_blank">Live Demo</a> of the admin app.</p><div class="image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2016/02/android-gcm-chat-app-admin-panel.png" alt="android-gcm-chat-app-admin-panel" width="719" height="1000" class="alignnone size-full wp-image-38998" srcset="http://www.androidhive.info/wp-content/uploads/2016/02/android-gcm-chat-app-admin-panel-216x300.png 216w, http://www.androidhive.info/wp-content/uploads/2016/02/android-gcm-chat-app-admin-panel.png 719w" sizes="(max-width: 719px) 100vw, 719px" /><noscript><img src="http://www.androidhive.info/wp-content/uploads/2016/02/android-gcm-chat-app-admin-panel.png" alt="android-gcm-chat-app-admin-panel" width="719" height="1000" class="alignnone size-full wp-image-38998" srcset="http://www.androidhive.info/wp-content/uploads/2016/02/android-gcm-chat-app-admin-panel-216x300.png 216w, http://www.androidhive.info/wp-content/uploads/2016/02/android-gcm-chat-app-admin-panel.png 719w" sizes="(max-width: 719px) 100vw, 719px" /></noscript></div><p>With this we have completed 1s part of the article, but before moving to <a href="http://www.androidhive.info/2016/02/android-push-notifications-using-gcm-php-mysql-realtime-chat-app-part-2" target="_blank">2nd Part</a>, quickly go through below code snippets which are very useful if you want to extend the server app functionality.</p><p></p><h2>7. Quick Code Snippets</h2><p></p><h3>Sending Push To Single User</h3><pre class="brush: php; title: ; notranslate" title="">
        require_once __DIR__ . '/../libs/gcm/gcm.php';
        require_once __DIR__ . '/../libs/gcm/push.php';
        $gcm = new GCM();
        $push = new Push();

        $data = array();
        // user node
        $data['user'] = $user;
        // message node
        $data['message'] = $response['message'];
        $data['image'] = '';

        $push-&gt;setTitle(&quot;Google Cloud Messaging&quot;);
        $push-&gt;setIsBackground(FALSE);
        $push-&gt;setFlag(PUSH_FLAG_USER);
        $push-&gt;setData($data);

        // Pass the receiver gcm registration token
        $gcm_registration_id = 'fnFAQ_BA7pY:APA91bFOwrCw9LHhJKatfvMx-2XA7-NdUMUMF5c9RS0....';

        // sending push message to single user
        $gcm-&gt;send($user['gcm_registration_id'], $push-&gt;getPush());
</pre><p></p><h3>Sending Push To Multiple Users</h3><pre class="brush: php; title: ; notranslate" title="">
    require_once __DIR__ . '/../libs/gcm/gcm.php';
    require_once __DIR__ . '/../libs/gcm/push.php';

    $gcm = new GCM();
    $push = new Push();

    $msg = array();
    $msg['message'] = $message;
    $msg['message_id'] = '';
    $msg['chat_room_id'] = '';
    $msg['created_at'] = date('Y-m-d G:i:s');

    $data = array();
    $data['user'] = $user;
    $data['message'] = $msg;
    $data['image'] = '';

    $push-&gt;setTitle(&quot;Google Cloud Messaging&quot;);
    $push-&gt;setIsBackground(FALSE);
    $push-&gt;setFlag(PUSH_FLAG_USER);
    $push-&gt;setData($data);

    // Keep all the recipients gcm tokens in an array 
    $registration_ids = array('fnFAQ_BA7pY:APA91bFOwrCw9LHhJKatfvMx-2XA7-NdUMUMF5c9RS0....', 'fnFAQ_BA7pY:APA91bFOwrCw9LHhJKatfvMx-2XA7-NdUMUMF5c9RS0....');

    // sending push message to multiple users
    $gcm-&gt;sendMultiple($registration_ids, $push-&gt;getPush());
</pre><p></p><h3>Sending Push To a Topic</h3><pre class="brush: php; title: ; notranslate" title="">
        require_once __DIR__ . '/../libs/gcm/gcm.php';
        require_once __DIR__ . '/../libs/gcm/push.php';

        $gcm = new GCM();
        $push = new Push();

        $data = array();
        $data['user'] = $user;
        $data['message'] = $response['message'];
        $data['chat_room_id'] = $chat_room_id;

        $push-&gt;setTitle(&quot;Google Cloud Messaging&quot;);
        $push-&gt;setIsBackground(FALSE);
        $push-&gt;setFlag(PUSH_FLAG_CHATROOM);
        $push-&gt;setData($data);

        // the topic you want to send notification
        $topic = 'your_topic_name';

        // sending push message to a topic
        $gcm-&gt;sendToTopic($topic, $push-&gt;getPush());
</pre><p></p><h3>Sending Push with an Image</h3><pre class="brush: php; title: ; notranslate" title="">
        require_once __DIR__ . '/../libs/gcm/gcm.php';
        require_once __DIR__ . '/../libs/gcm/push.php';

        $gcm = new GCM();
        $push = new Push();

        // keep the notification image url here
        $image = 'http://api.androidhive.info/gcm/panda.jpg';

        $data = array();
        $data['user'] = $user;
        $data['message'] = $response['message'];
        $data['image'] = $image;

        $push-&gt;setTitle(&quot;Google Cloud Messaging&quot;);
        $push-&gt;setIsBackground(FALSE);
        $push-&gt;setFlag(PUSH_FLAG_USER);
        $push-&gt;setData($data);

        $gcm_registration_id = 'fnFAQ_BA7pY:APA91bFOwrCw9LHhJKatfvMx-2XA7-NdUMUMF5c9RS0....';

        // sending push message to single user
        $gcm-&gt;send($user['gcm_registration_id'], $push-&gt;getPush());
</pre><p>By far we have successfully built the proper REST API client and a simple admin panel. Now let&#8217;s start building the android app in <a href="http://www.androidhive.info/2016/02/android-push-notifications-using-gcm-php-mysql-realtime-chat-app-part-2" target="_blank">2nd Part</a>. If you are facing any issue in this part, please comment in below discussions.</p><div style="font-size:0px;height:0px;line-height:0px;margin:0;padding:0;clear:both"></div><span id="tve_leads_end_content" style="display: block; visibility: hidden; border: 1px solid red;"></span> <script type="text/javascript">jQuery(document).ready(function($) {
    $.post('http://www.androidhive.info/wp-admin/admin-ajax.php', {action: 'mts_view_count', id: '38919'});
});</script> </div></div></div><div class="postauthor"><h4>About The Author</h4> <img alt='' src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src='http://0.gravatar.com/avatar/9578184c8f454a148b0b59dd1d21dfaf?s=100&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/9578184c8f454a148b0b59dd1d21dfaf?s=200&amp;d=mm&amp;r=g 2x' class='avatar avatar-100 photo' height='100' width='100' /><noscript><img alt='' src='http://0.gravatar.com/avatar/9578184c8f454a148b0b59dd1d21dfaf?s=100&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/9578184c8f454a148b0b59dd1d21dfaf?s=200&amp;d=mm&amp;r=g 2x' class='avatar avatar-100 photo' height='100' width='100' /></noscript><h5 class="vcard"><a href="http://www.androidhive.info/author/admin/" rel="nofollow" class="fn">Ravi Tamada</a></h5><p>Ravi is hardcore Android programmer and Android programming has been his passion since he compiled his first hello-world program. Solving real problems of Android developers through tutorials has always been interesting part for him.</p></div><div class="related-posts"><h4>Related Posts</h4><div class="clear"> <article class="latestPost excerpt  "> <a href="http://www.androidhive.info/2014/06/android-facebook-like-custom-listview-feed-using-volley/" title="Android Facebook like Custom ListView Feed using Volley" rel="nofollow" id="featured-thumbnail"><div class="featured-thumbnail"><img width="270" height="165" src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2014/06/android-facebook-like-news-feed-270x165.jpg" class="attachment-featured size-featured wp-post-image" alt="android facebook like custom news feed view" title="" /><noscript><img width="270" height="165" src="http://www.androidhive.info/wp-content/uploads/2014/06/android-facebook-like-news-feed-270x165.jpg" class="attachment-featured size-featured wp-post-image" alt="android facebook like custom news feed view" title="" /></noscript></div> </a> <header><h2 class="title front-view-title"><a href="http://www.androidhive.info/2014/06/android-facebook-like-custom-listview-feed-using-volley/" title="Android Facebook like Custom ListView Feed using Volley">Android Facebook like Custom ListView Feed using Volley</a></h2><div class="post-info"> <span class="theauthor">by <span itemprop="author"><a rel="nofollow" href="http://www.androidhive.info/author/admin/" title="Posts by Ravi Tamada" rel="author">Ravi Tamada</a><span class="divider1">/</span></div> </header> </article> <article class="latestPost excerpt  "> <a href="http://www.androidhive.info/2016/02/android-push-notifications-using-gcm-php-mysql-realtime-chat-app-part-3/" title="Android Building Realtime Chat App using GCM, PHP &#038; MySQL &#8211; Part 3" rel="nofollow" id="featured-thumbnail"><div class="featured-thumbnail"><img width="270" height="165" src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2016/02/android-realtime-chat-app-using-gcm-php-mysql-part-3-270x165.png" class="attachment-featured size-featured wp-post-image" alt="android-realtime-chat-app-using-gcm-php-mysql-part-3" title="" /><noscript><img width="270" height="165" src="http://www.androidhive.info/wp-content/uploads/2016/02/android-realtime-chat-app-using-gcm-php-mysql-part-3-270x165.png" class="attachment-featured size-featured wp-post-image" alt="android-realtime-chat-app-using-gcm-php-mysql-part-3" title="" /></noscript></div> </a> <header><h2 class="title front-view-title"><a href="http://www.androidhive.info/2016/02/android-push-notifications-using-gcm-php-mysql-realtime-chat-app-part-3/" title="Android Building Realtime Chat App using GCM, PHP &#038; MySQL &#8211; Part 3">Android Building Realtime Chat App using GCM, PHP &#038; MySQL &#8211; Part 3</a></h2><div class="post-info"> <span class="theauthor">by <span itemprop="author"><a rel="nofollow" href="http://www.androidhive.info/author/admin/" title="Posts by Ravi Tamada" rel="author">Ravi Tamada</a><span class="divider1">/</span></div> </header> </article> <article class="latestPost excerpt  last"> <a href="http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/" title="Android Login and Registration with PHP, MySQL and SQLite" rel="nofollow" id="featured-thumbnail"><div class="featured-thumbnail"><img width="270" height="165" src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2012/01/android-login-and-registration-screen-design-270x165.jpg" class="attachment-featured size-featured wp-post-image" alt="android login and registration screen design" title="" /><noscript><img width="270" height="165" src="http://www.androidhive.info/wp-content/uploads/2012/01/android-login-and-registration-screen-design-270x165.jpg" class="attachment-featured size-featured wp-post-image" alt="android login and registration screen design" title="" /></noscript></div> </a> <header><h2 class="title front-view-title"><a href="http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/" title="Android Login and Registration with PHP, MySQL and SQLite">Android Login and Registration with PHP, MySQL and SQLite</a></h2><div class="post-info"> <span class="theauthor">by <span itemprop="author"><a rel="nofollow" href="http://www.androidhive.info/author/ravi8x/" title="Posts by Ravi Tamada" rel="author">Ravi Tamada</a><span class="divider1">/</span></div> </header> </article> <article class="latestPost excerpt  "> <a href="http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/" title="Android Push Notifications using Google Cloud Messaging (GCM), PHP and MySQL" rel="nofollow" id="featured-thumbnail"><div class="featured-thumbnail"><img width="270" height="165" src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://www.androidhive.info/wp-content/uploads/2012/10/banner_gcm-270x165.png" class="attachment-featured size-featured wp-post-image" alt="android google cloud messaging" title="" /><noscript><img width="270" height="165" src="http://www.androidhive.info/wp-content/uploads/2012/10/banner_gcm-270x165.png" class="attachment-featured size-featured wp-post-image" alt="android google cloud messaging" title="" /></noscript></div> </a> <header><h2 class="title front-view-title"><a href="http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/" title="Android Push Notifications using Google Cloud Messaging (GCM), PHP and MySQL">Android Push Notifications using Google Cloud Messaging (GCM), PHP and MySQL</a></h2><div class="post-info"> <span class="theauthor">by <span itemprop="author"><a rel="nofollow" href="http://www.androidhive.info/author/admin/" title="Posts by Ravi Tamada" rel="author">Ravi Tamada</a><span class="divider1">/</span></div> </header> </article></div></div></div><div id="disqus_thread" data-disqus-shortname="androidhive"></div></div> </article> <aside id="sidebar" class="sidebar c-4-12 " role="complementary" itemscope itemtype="http://schema.org/WPSideBar"><div id="search-2" class="widget widget_search"><h3 class="widget-title">SEARCH HERE</h3><form method="get" id="searchform" class="search-form" action="http://www.androidhive.info" _lpchecked="1"><fieldset> <input type="text" name="s" id="s" value="" placeholder="Search the site"  /> <button id="search-image" class="sbutton" type="submit" value=""> <i class="fa fa-search"></i> </button></fieldset></form></div><div id="text-9" class="widget widget_text"><div class="textwidget"><a href="http://www.androidhive.info/reviews"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://api.androidhive.info/tmp/reviews_banner.jpg"/><noscript><img src="http://api.androidhive.info/tmp/reviews_banner.jpg"/></noscript></a></div></div><div id="text-6" class="widget widget_text"><h3 class="widget-title">WEâRE SOCIAL</h3><div class="textwidget"><div class="fb-page"
data-href="https://www.facebook.com/AndroidHive/"
data-width="340"
data-hide-cover="false"
data-show-facepile="true"></div></div></div><div id="text-8" class="widget widget_text"><div class="textwidget"><div class="tve-leads-shortcode tve-tl-anim tl-anim-instant tve-leads-track-shortcode_39260"><div class="tl-style" id="tve_36_set" data-state="6"><div class="tve-leads-conversion-object" data-tl-type="shortcode_39260"><div class="tve_flt"><div class="thrv-leads-form-box tve_no_drag tve_no_icons tve_element_hover thrv_wrapper tve_editor_main_content tve_36_set tve_brdr_solid tve_blue"><h2 class="tve_p_center" style="font-size: 17px;">Subscribe to Newsletter</h2><p class="tve_p_center" style="font-size: 14px;">Join our 746,498 subscribers and get access to the latest android tutorials, freebies, scripts and much more!</p><div class="thrv_wrapper thrv_lead_generation tve_clearfix tve_red tve_11 thrv_lead_generation_vertical" data-tve-style="1" data-tve-version="1" data-inputs-count="11" data-connection="api"><input type="hidden" class="tve-lg-err-msg" value="{&quot;email&quot;:&quot;Please enter a valid email address&quot;,&quot;phone&quot;:&quot;Please enter a valid phone number&quot;,&quot;required&quot;:&quot;Highlighted fields are required&quot;}"><div class="thrv_lead_generation_code" style="display: none;"></div><div class="thrv_lead_generation_container tve_clearfix"><form action="#" method="post"><input type="hidden" class="tve-f-a-hidden" value="#"><div class="tve_lead_generated_inputs_container tve_clearfix"><div class="tve_lead_fields_overlay"></div><div class="tve_lg_input_container tve_lg_input tve_lg_2"><input type="email" data-field="email" data-required="1" data-validation="email" name="email" placeholder="Email" data-placeholder="Email" style="padding-right: 20px;"></div><input id="__tcb_lg_fc" type="hidden" name="__tcb_lg_fc" value="YToxOntzOjU6InNlbmR5IjtzOjI0OiJTcHMzNzYzaEwweTVrbnZHS2xIVjB4QnciO30="><input id="_asset_group" type="hidden" name="_asset_group" value=""><input id="_asset_option" type="hidden" name="_asset_option" value=""><input id="_back_url" type="hidden" name="_back_url" value="http://www.androidhive.info/subscription-successful/"><input id="_submit_option" type="hidden" name="_submit_option" value="redirect"><input id="_use_captcha" type="hidden" name="_use_captcha" value=""><input id="_captcha_theme" type="hidden" name="_captcha_theme" value="light"><input id="_captcha_type" type="hidden" name="_captcha_type" value="image"><input id="_captcha_size" type="hidden" name="_captcha_size" value="normal"><div style="display: none"></div><div class="tve_lg_input_container tve_submit_container tve_lg_submit tve_lg_2" tve-data-style="1"><button type="Submit">Sign Up</button></div></div></form></div></div><p class="tve_p_center" style="font-size: 14px;">We strictly care about your privacy!</p></div></div></div></div></div></div></div><div id="views-2" class="widget widget_views"><h3 class="widget-title">POPULAR ANDROID TUTORIALS</h3><ul><li class="postviews"><a href="http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/"  title="Android SQLite Database Tutorial">Android SQLite Database Tutorial - 1,451,465 views</a></li><li class="postviews"><a href="http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/"  title="How to connect Android with PHP, MySQL">How to connect Android with PHP, MySQL - 1,434,222 views</a></li><li class="postviews"><a href="http://www.androidhive.info/2012/01/android-json-parsing-tutorial/"  title="Android JSON Parsing Tutorial">Android JSON Parsing Tutorial - 1,283,623 views</a></li><li class="postviews"><a href="http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/"  title="Android Push Notifications using Google Cloud Messaging (GCM), PHP and MySQL">Android Push Notifications using Google Cloud Messaging (GCM), PHP and MySQL - 1,215,919 views</a></li><li class="postviews"><a href="http://www.androidhive.info/2013/11/android-sliding-menu-using-navigation-drawer/"  title="Android Sliding Menu using Navigation Drawer">Android Sliding Menu using Navigation Drawer - 1,121,005 views</a></li><li class="postviews"><a href="http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/"  title="Android Custom ListView with Image and Text">Android Custom ListView with Image and Text - 988,385 views</a></li><li class="postviews"><a href="http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/"  title="Android Login and Registration with PHP, MySQL and SQLite">Android Login and Registration with PHP, MySQL and SQLite - 986,909 views</a></li><li class="postviews"><a href="http://www.androidhive.info/2012/07/android-gps-location-manager-tutorial/"  title="Android GPS, Location Manager Tutorial">Android GPS, Location Manager Tutorial - 754,119 views</a></li><li class="postviews"><a href="http://www.androidhive.info/2013/10/android-tab-layout-with-swipeable-views-1/"  title="Android Tab Layout with Swipeable Views">Android Tab Layout with Swipeable Views - 702,932 views</a></li><li class="postviews"><a href="http://www.androidhive.info/2013/08/android-working-with-google-maps-v2/"  title="Android working with Google Maps V2">Android working with Google Maps V2 - 623,735 views</a></li></ul></div></aside></div> <footer id="site-footer" role="contentinfo" itemscope itemtype="http://schema.org/WPFooter"><div class="container"><div class="footer-widgets first-footer-widgets widgets-num-3"><div class="f-widget f-widget-1"><div id="nav_menu-2" class="widget widget_nav_menu"><h3 class="widget-title">QUICK CONTACT</h3><div class="menu-quick-contact-container"><ul id="menu-quick-contact" class="menu"><li id="menu-item-39273" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-39273"><a href="http://www.androidhive.info/advertise-with-us/">Advertise with us</a></li><li id="menu-item-39244" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-39244"><a href="http://www.androidhive.info/privacy-policy/">Privacy Policy</a></li><li id="menu-item-39245" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-39245"><a href="http://www.androidhive.info/terms-of-service/">Terms of Service</a></li><li id="menu-item-39266" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-39266"><a href="http://www.androidhive.info/sitemap/">Sitemap</a></li></ul></div></div></div><div class="f-widget f-widget-2"></div><div class="f-widget last f-widget-3"><div id="text-7" class="widget widget_text"><h3 class="widget-title">ABOUT ANDROIDHIVE</h3><div class="textwidget">AndroidHive is beginner's paradise for android tutorials, tips & tricks, games, app reviews, hacks and super cool advanced topics.</div></div></div></div><div class="copyrights"><div class="row" id="copyright-note"> <span>Copyright &copy; 2016 Droid5 Informatics Pvt Ltd.</span><div class="to-top"></div></div></div></div> </footer></div><div id="fb-root"></div> <script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&version=v2.6";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> <script id="dsq-count-scr" src="//androidhive.disqus.com/count.js" async></script> <script>/**************************************************************/
/*AM22 Named Function to load Disqus - START*/
jQuery(document).ready(function(){
var disqus_identifier = window.location.url; //Use current page URL as Disqus_URL_Identifier. You can change it as per your requirement.
var ds_loaded = false; //To track loading only once on a page.
function loadDisqus()
{
    var disqus_div = jQuery("#disqus_thread"); //The ID of the Disqus DIV tag
    var top = disqus_div.offset().top;
    var disqus_data = disqus_div.data();
    if ( !ds_loaded && jQuery(window).scrollTop() + jQuery(window).height() > top ) 
    {
        ds_loaded = true;
        for (var key in disqus_data) 
        {
            if (key.substr(0,6) == 'disqus') 
            {
                window['disqus_' + key.replace('disqus','').toLowerCase()] = disqus_data[key];
            }
        }
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = 'http://' + window.disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }  
}
/*AM22 Named Function to load Disqus - END*/
/*AM22 Disqus lazy load - START*/
jQuery(function () 
{
    var disqus_div = jQuery("#disqus_thread");
    if (disqus_div.size() > 0) 
    {
        jQuery(window).scroll(loadDisqus);      
    }  
}
);
/*AM22 Disqus lazy load - END*/
});</script><div id="tve_notification_box"></div><script type='text/javascript' src='http://www.androidhive.info/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.9b'></script> <script type='text/javascript' src='http://www.androidhive.info/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushSql.js?ver=3.0.9b'></script> <script type='text/javascript' src='http://www.androidhive.info/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPhp.js?ver=3.0.9b'></script> <script type='text/javascript' src='http://www.androidhive.info/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCss.js?ver=3.0.9b'></script> <script type='text/javascript'>(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://www.androidhive.info/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://www.androidhive.info/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();</script> <link rel='stylesheet' id='tve-leads-font-9062833c9baa57b288ba47a7993dc1c0-css'  href='//fonts.googleapis.com/css?family=Open+Sans%3A400%2C300%2C600%2C700' type='text/css' media='all' /> <script type='text/javascript'>/*  */
var viewsCacheL10n = {"admin_ajax_url":"http:\/\/www.androidhive.info\/wp-admin\/admin-ajax.php","post_id":"38919"};
/*  */</script> <script type='text/javascript' src='http://www.androidhive.info/wp-content/plugins/wp-postviews/postviews-cache.js?ver=1.68'></script> <script type='text/javascript'>/*  */
var tve_dash_front = {"ajaxurl":"http:\/\/www.androidhive.info\/wp-admin\/admin-ajax.php"};
/*  */</script> <script type='text/javascript' src='http://www.androidhive.info/wp-content/plugins/thrive-leads/thrive-dashboard/js/dist/frontend.min.js?ver=1.0.10'></script> <script type='text/javascript' src='http://www.androidhive.info/wp-includes/js/wp-embed.min.js'></script> <script type='text/javascript'>/*  */
var tve_frontend_options = {"is_editor_page":"","page_events":[],"is_single":"1","ajaxurl":"http:\/\/www.androidhive.info\/wp-admin\/admin-ajax.php","social_fb_app_id":""};
/*  */</script> <script type='text/javascript' src='http://www.androidhive.info/wp-content/plugins/thrive-leads/tcb/editor/js/thrive_content_builder_frontend.min.js?ver=1.200.5'></script> <script type='text/javascript' src='//www.androidhive.info/wp-content/plugins/thrive-leads/js/frontend.min.js?ver=1.75'></script> <script type="text/javascript">/**/var TL_Const={"security":"62e7a1ef75","ajax_url":"\/\/www.androidhive.info\/wp-admin\/admin-ajax.php","forms":{"shortcode_39260":{"_key":"6","trigger":"page_load","trigger_config":{},"form_type_id":"39260","main_group_id":"39260","active_test_id":""}},"action_conversion":"tve_leads_ajax_conversion","action_impression":"tve_leads_ajax_impression","ajax_load":0,"shortcode_ids":["39260"],"custom_post_data":{"get_data":{"q":"\/2016\/02\/android-push-notifications-using-gcm-php-mysql-realtime-chat-app-part-1\/"},"http_referrer":"http:\/\/www.androidhive.info\/page\/2\/"},"current_screen":{"screen_type":4,"screen_id":38919},"ignored_fields":["email","_captcha_size","_captcha_theme","_captcha_type","_submit_option","_use_captcha","g-recaptcha-response","__tcb_lg_fc","_back_url","_submit_option","url","_asset_group","_asset_option","mailchimp_optin"]}/* */</script><script type="text/javascript">var TL_Front = TL_Front || {}; TL_Front.impressions_data = TL_Front.impressions_data || {};TL_Front.impressions_data.shortcode_39260 = {"group_id":"39260","form_type_id":"39260","variation_key":"6","active_test_id":null,"output_js":true};</script><script type="text/javascript">(function ($) {
	$(function () {
		var event_data = {"form_id":"tve-leads-track-shortcode_39260","form_type":"shortcode"};
		event_data.source = 'page_load';
		setTimeout(function () {
			ThriveGlobal.$j(TL_Front).trigger('showform.thriveleads', event_data);
			}, 200);
		});
	})
(ThriveGlobal.$j);</script></body></html>
<!-- This website is like a Rocket, isn't it ? Performance optimized by WP Rocket. Learn more: http://wp-rocket.me - Debug: cached@1470854417 -->